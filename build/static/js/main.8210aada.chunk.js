(this["webpackJsonpmedical-inventory"]=this["webpackJsonpmedical-inventory"]||[]).push([[0],{142:function(e,t,a){},143:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),i=a.n(o),l=(a(81),a(4)),s=a(10),c=a(3),u=a(2),d=a(1),m=(a(82),a(11)),p=a(7),f=a(24),h={mainApp:void 0,inventoryData:void 0,inventoryConfig:void 0},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(p.a)(Object(p.a)({},e),{},{mainApp:t.payload});case"SET_INVENTORY_DATA":return Object(p.a)(Object(p.a)({},e),{},{inventoryData:t.payload.inventoryData,inventoryConfig:t.payload.inventoryConfig});default:return e}},g=[{code:"home",name:"Beranda",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1},{code:"dashboard",name:"Dasbor",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"dashboard_info",name:"Info Persediaan",url:"info",menuClass:"fas fa-info-circle"},{code:"productstat",name:"Statistik Produk",url:"productstat",menuClass:"fas fa-chart-line"},{code:"productstat",name:"Statistik Produk Detail",url:"productstatdetail",menuClass:"fas fa-chart-line"}]},{code:"INVENTORY",name:"Persediaan",url:"/inventory",menuClass:"fas fa-warehouse",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"inventory_stocks",name:"Stok",url:"stock",menuClass:"fas fa-archive"},{code:"inventory_status",name:"Status",url:"status",menuClass:"fas fa-layer-group"},{code:"report",name:"Laporan",url:"report",menuClass:"fas fa-file-alt"}]},{code:"transaction",name:"Transaksi",url:"/transaction",menuClass:"fas fa-book",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"transaction_in",name:"Pasokan",url:"productin",menuClass:"fas fa-arrow-down"},{code:"transaction_out",name:"Distribusi",url:"productout",menuClass:"fas fa-arrow-up"},{code:"transaction_detail",name:"Detail",url:"detail",menuClass:"fas fa-folder"}]},{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"user_profile",name:"Profil Pengguna",menuClass:"fas fa-user-cog",url:"user-profile"},{code:"app_profile",name:"Setting Aplikasi",menuClass:"fas fa-cog",url:"app-profile"},{code:"inventory_config",name:"Konfigurasi Persediaan",menuClass:"fas fa-cog",url:"inventory-config"}]}],E=function e(){Object(d.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.nulledFields=void 0},b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.address=void 0,e.monthlyProductCount=void 0,e}return a}(E),y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e}return a}(E),N={loginKey:null,loginStatus:!1,loginFailed:!1,menus:g,loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:new y,masterHealthCenter:new b,assetsPath:"/"},C=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,n=arguments.length>1?arguments[1]:void 0,r={};switch(n.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",n.payload.requestId),r=Object(p.a)(Object(p.a)({},a),{},{requestId:n.payload.requestId,masterHealthCenter:null!==(e=n.payload.masterHealthCenter)&&void 0!==e?e:{},applicationProfile:null!==(t=n.payload.applicationProfile)&&void 0!==t?t:{},assetsPath:n.payload.applicationProfile.assetsPath}),1==n.payload.loginStatus?(r.loggedUser=n.payload.user,r.loginStatus=!0):(r.loginStatus=!1,r.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",n.payload.requestId),console.debug("REQUEST_ID result.loginStatus:",r.loginStatus),n.payload.referer&&n.payload.referer.refresh(),r;case"do_login":return r=Object(p.a)(Object(p.a)({},a),{},{loginAttempt:!0,loginStatus:n.payload.loginStatus,loginKey:n.payload.loginKey,loginFailed:0==n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"do_logout":return r=Object(p.a)(Object(p.a)({},a),{},{loginStatus:!1,loggedUser:null}),$(null),r;case"refresh_login":return r=Object(p.a)(Object(p.a)({},a),{},{loginStatus:n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"get_logged_user":return r=Object(p.a)(Object(p.a)({},a),{},{loggedUser:n.payload.data});case"set_logged_user":return r=Object(p.a)(Object(p.a)({},a),{},{loggedUser:n.payload.user});case"SET_APPLICATION_PROFILE":return r=Object(p.a)(Object(p.a)({},a),{},{applicationProfile:n.payload.applicationProfile});default:return Object(p.a)({},a)}},S=function e(){Object(d.a)(this,e),this.name="",this.data=new Blob,this.dataUrl=""},k=a(47),D=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){k.post(e,a,{headers:X()}).then((function(e){Z(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},w=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){k.post(e,a,{responseType:"blob",headers:X()}).then((function(e){Z(e);var a=e.data;a.rawAxiosResponse=e;var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],i=new Blob([a],{type:o}),l=window.URL.createObjectURL(i),s=new S;s.name=n,s.data=i,s.dataUrl=l,t(s)})).catch((function(e){console.error(e),n(e)}))}))},O=function(){function e(){Object(d.a)(this,e),this.updateProfile=function(e){var t={user:e},a=re().concat("api/app/account/updateprofile");return D(a,t)},this.requestApplicationId=function(e,t){var a=re()+"api/public/requestid";D(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;Z(a),console.debug("response header:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){(function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){k.post(e,a,{headers:z()}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))})(re()+"api/public/requestid",{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){t(),console.error("ERROR requestApplicationIdNoAuth: ",e)}))}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();O.instance=void 0;var j=a(12),P=function(){function e(){var t=this;Object(d.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.healthCenters=[],this.getProductByCode=function(e){return t.getByKey("product","code",e)},this.getProductsByName=function(e){return t.getRecordsByKeyLike("product","name",e)},this.loadHealthCenters=function(){var e=re().concat("api/app/entity/get");return D(e,{entity:"healthcenter",filter:{orderBy:"name",orderType:"asc"}})},this.updateApplicationProfile=function(e){var t={profile:e},a=re().concat("api/app/setting/updateprofile");return D(a,t)},this.updateConfiguration=function(e){var t={inventoryConfiguration:e},a=re().concat("api/app/setting/updateconfig");return D(a,t)},this.setHealthCenters=function(e){t.healthCenters=e},this.getHealthCenters=function(){return t.healthCenters}}return Object(l.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=re().concat("api/app/entity/managementpages");return D(t,{})}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t={entity:e},a=re().concat("api/app/entity/configv2");return D(a,t)}},{key:"loadEntities",value:function(e){var t=re().concat("api/app/entity/get");return D(t,e)}},{key:"loadAllEntities",value:function(e){var t={entity:e,filter:{limit:0,page:0}},a=re().concat("api/app/entity/get");return D(a,t)}},{key:"getByKey",value:function(e,t,a){var n={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:Object(j.a)({},t,a)}},r=re().concat("api/app/entity/get");return D(r,n)}},{key:"getRecordsByKeyLike",value:function(e,t,a){var n={entity:e,filter:{limit:10,page:0,fieldsFilter:Object(j.a)({},t,a)}},r=re().concat("api/app/entity/get");return D(r,n)}},{key:"getById",value:function(e,t){var a={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}},n=re().concat("api/app/entity/get");return D(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}},r=re().concat("api/app/entity/get");return D(r,n)}},{key:"delete",value:function(e,t){var a={entity:e,filter:{fieldsFilter:{id:t}}},n=re().concat("api/app/entity/delete");return D(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object(j.a)({entity:e},e,t);return n=a?re().concat("api/app/entity/update"):re().concat("api/app/entity/add"),D(n,r)}},{key:"generateReport",value:function(e){var t=re().concat("api/app/report/records");return w(t,e)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();P.instance=void 0;var I=function(){function e(){Object(d.a)(this,e),this.submitTransactionOUT=function(e){console.debug("object: ",e);var t={transaction:e},a=re().concat("api/app/transaction/transactionout");return D(a,t)},this.submitTransactionIN=function(e){var t={transaction:e},a=re().concat("api/app/transaction/transactionin");return D(a,t)},this.getTransactionByCode=function(e){var t=re().concat("api/app/transaction/gettransaction/"+e);return D(t,{})},this.deleteTransactionByCode=function(e){var t=re().concat("api/app/transaction/deleterecord/"+e);return D(t,{})}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();I.instance=void 0;var T=function(){function e(){Object(d.a)(this,e),this.getAvailableProducts=function(e,t){var a=re().concat("api/app/inventory/availableproducts/"+e);return D(a,{healthcenter:t})},this.getProductsInHealthCenter=function(e,t){var a=re().concat("api/app/inventory/getproducts");return D(a,{healthcenter:t,filter:e})},this.adjustStocks=function(){var e=re().concat("api/app/inventory/recalculatestock");return D(e,{})},this.getInventoriesData=function(){var e=re().concat("api/app/inventory/getinventoriesdata");return D(e,{})},this.getProductUsage=function(e){var t=re().concat("api/app/inventory/getproductusage");return D(t,e)},this.getProductListWithUsage=function(e){var t=re().concat("api/app/inventory/getproductswithusage");return D(t,{filter:e})}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();T.instance=void 0;var L=function(){function e(){Object(d.a)(this,e),this.loadStockOpnameReport=function(e,t){var a=re().concat("api/app/report/stockopname");return w(a,{healthcenter:t,filter:e})},this.loadMontlyReport=function(e){var t=re().concat("api/app/report/monthly");return w(t,{filter:e})},this.printTransactionReceipt=function(e){var t=re().concat("api/app/report/transactionreceipt/"+e);return w(t,{})},this.printReceiveRequestSheet=function(e,t){var a=re().concat("api/app/report/receiverequestsheet");return w(a,{healthcenter:t,filter:e})}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();L.instance=void 0;var F={services:new function e(){Object(d.a)(this,e),this.userService=O.getInstance(),this.masterDataService=P.getInstance(),this.transactionService=I.getInstance(),this.inventoryService=T.getInstance(),this.reportService=L.getInstance()}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return e},x=Object(f.c)({appState:v,userState:C,servicesState:A}),R={appState:h,userState:N,servicesState:F},M=a(47),_=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;M.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",o=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),o=!0),Z(t);var i=Object.assign({},a,{payload:{loginStatus:o,loginKey:r,loggedUser:n.user}});delete i.meta,e.dispatch(i)})).catch(console.log).finally((function(){n.endLoading()}))}}},U=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=X();M.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},Y=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;M.post(a.meta.url,a.payload,{headers:X()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},H=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},B=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:X()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},q=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},W=null,K=function(){return W},V=function(){return W=Object(f.d)(x,R,Object(f.a)(_,Y,U,H,q,B))},X=function(){return{"Content-Type":"application/json",requestId:Q(),Authorization:"Bearer "+J()}},z=function(){return{"Content-Type":"application/json",requestId:Q()}},G="medical-inventory-login-key",Q=function(){var e=K();return null==e?"":e.getState().userState.requestId},J=function(){return te(G)},Z=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];ee(G,t)}},$=function(e){ee(G,e)},ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},te=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},ae="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,ne=ae?"/universal-good-shop/":document.getElementById("rootPath").value+"/",re=function(){var e=ae?"http://localhost:8080".concat(ne):ne;return e},oe=function(){return function(){var e=K();return null==e?"":e.getState().userState.assetsPath}()+"images/"},ie=re(),le=ie+"api/app/account/",se=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:le.concat("logout")}}},ce=function(e){return{type:"SET_INVENTORY_DATA",payload:{inventoryData:e.inventoryData,inventoryConfig:e.configuration},meta:{type:"SET_INVENTORY_DATA"}}},ue=a(5),de=a(75),me=a.n(de),pe=function(e){return{applicationProfile:e.userState.applicationProfile,masterHealthCenter:e.userState.masterHealthCenter,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp,inventoryData:e.appState.inventoryData,inventoryConfig:e.appState.inventoryConfig}};a(142);function fe(e){return e.realtime?r.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},r.a.createElement("div",{className:"col-1"},r.a.createElement("span",{style:{marginBottom:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})),r.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},r.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}}))):r.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r.a.createElement("span",{className:" "},"Loading..."))}var he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?r.a.createElement(fe,{progress:this.props.progress,realtime:this.props.realtime}):r.a.createElement("div",{className:e},r.a.createElement(fe,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(n.Component);function ve(e){return r.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function ge(e){return r.a.createElement("div",{className:"modal-footer "+e.className},r.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:r.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function Ee(e){return r.a.createElement("div",{className:"modal-header "+e.className},r.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),r.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},r.a.createElement("i",{className:"fas fa-times"}))))}var be=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).yesButtonRef=r.a.createRef(),n.noButtonRef=r.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current?this.noButtonRef.current.focus():e&&this.yesButtonRef.current&&this.yesButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve,null),r.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(Ee,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),r.a.createElement("div",{className:"modal-body"}," ",this.props.children),r.a.createElement(ge,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(n.Component),ye=1,Ne=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++ye+"-"+e},Ce=function(){var e=(new Date).getHours();return"Selamat "+(e>=3&&e<11?"Pagi":e>=11&&e<15?"Siang":e>=15&&e<18?"Sore":"Malam")};function Se(e){if(""==e||null==e)return"0";var t=new String(e).includes("."),a=new String(e).startsWith("-");a&&(e=new String(e).replace("-",""));var n=t?parseInt(new String(e).split(".")[0]):parseInt(e),r=Math.abs(n).toString(),o="";if(r.length>3){for(var i=0,l=r.length-1;l>0;l--)i++,o=r[l]+o,3==i&&(o="."+o,i=0);o=r[0]+o}else o=e;return n<0?n:(t&&(o+=","+new String(e).split(".")[1]),a&&(o="-"+o),o)}var ke=function(e){return document.getElementById(e)};function De(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))}var we,Oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(d.a)(this,a),(n=t.call(this,e)).parentApp=void 0,n.authenticated=!0,n.state={updated:new Date},n.getInventoryData=function(){return n.props.inventoryData},n.getInventoryConfig=function(){return n.props.inventoryConfig},n.getMasterHealthCenter=function(){var e;return null!==(e=n.props.masterHealthCenter)&&void 0!==e?e:new b},n.setPageTitle=function(e){document.title=e},n.validateLoginStatus=function(e){0!=n.authenticated&&n.isLoggedUserNull()?n.backToLogin():e&&e()},n.showCommonErrorAlert=function(e){var t;console.error(e),t=e.response&&e.response.data?e.response.data.message:e,n.showError("Operation Failed: "+t)},n.getServices=function(){return n.props.services},n.authenticated=r,n.state=Object(p.a)({},n.state),n.parentApp=n.props.mainApp,n}return Object(l.a)(a,[{key:"getApplicationProfile",value:function(){return null==this.props.applicationProfile?new y:this.props.applicationProfile}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;this.setState(Object(j.a)({},t.name,a)),console.debug("input changed: ",t.name,a)}},{key:"focusToActiveField",value:function(){if(null!=this.state.activeId&&null!=ke(this.state.activeId)){var e=ke(this.state.activeId);null!=e&&e.focus()}}},{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"doAjax",value:function(e,t,a,n){var r=this;this.startLoading(t);for(var o=arguments.length,i=new Array(o>4?o-4:0),l=4;l<o;l++)i[l-4]=arguments[l];e.apply(void 0,i).then((function(e){a&&a(e)})).catch((function(e){n?n(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(e){r.endLoading()}))}},{key:"commonAjax",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),o=3;o<n;o++)r[o-3]=arguments[o];this.doAjax.apply(this,[e,!1,t,a].concat(r))}},{key:"commonAjaxWithProgress",value:function(e,t,a){for(var n=arguments.length,r=new Array(n>3?n-3:0),o=3;o<n;o++)r[o-3]=arguments[o];this.doAjax.apply(this,[e,!0,t,a].concat(r))}},{key:"getLoggedUser",value:function(){var e=this.props.loggedUser;if(e)return e.password="^_^",e}},{key:"isLoggedUserNull",value:function(){return 0==this.props.loginStatus||null==this.props.loggedUser}},{key:"isUserLoggedIn",value:function(){return 1==this.props.loginStatus&&null!=this.props.loggedUser}},{key:"showConfirmation",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlert("Konfirmasi",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showConfirmationDanger",value:function(e){var t=this;return new Promise((function(a,n){t.parentApp.showAlertError("Konfirmasi",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))}},{key:"showInfo",value:function(e){this.parentApp.showAlert("Info",e,!0,(function(){}))}},{key:"showError",value:function(e){this.parentApp.showAlertError("Error",e,!0,(function(){}))}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&this.isLoggedUserNull()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(n.Component),je=a(6),Pe=(a(143),function e(){Object(d.a)(this,e),this.showNavLinks=!1}),Ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).state=new Pe,n.buttonToggleNavRef=r.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(s.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=function(){for(var e=[],t=0;t<g.length;t++){var a=g[t];e.push(a)}return e}(),n=this.getLoggedUser();return r.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},r.a.createElement(Te,{label:this.getApplicationProfile().name}),r.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},r.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),r.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},r.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;var a=e.props.activeMenuCode==t.code;return r.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},r.a.createElement(je.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},r.a.createElement("span",null,t.name)))}))),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement(Le,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(Oe),Te=function(e){return r.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},r.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},r.a.createElement("strong",null,e.label)))},Le=function(e){return e.user?r.a.createElement(n.Fragment,null,r.a.createElement(je.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},r.a.createElement("img",{width:"20",src:oe()+e.user.profileImage,className:"rounded rounded-circle"}),"\xa0",e.user.displayName),r.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):r.a.createElement(je.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",r.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},Fe=Object(m.f)(Object(ue.b)(pe,(function(e){return{performLogout:function(t){return e(se(t))}}}))(Ie)),Ae=(a(145),a(146),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(r.a.createElement("div",{key:"spinner-item-"+t}));return r.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},r.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(n.Component)),xe=function e(){Object(d.a)(this,e),this.loading=!1,this.username="",this.password=""},Re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).state=new xe,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(j.a)({},a,t.value))},n}return Object(l.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.username,this.state.password,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"Login",className:"text-center"},r.a.createElement("svg",{style:{marginTop:"20px"},width:"200",height:"201"},r.a.createElement("g",{fill:"transparent",stroke:"black",strokeWidth:3},r.a.createElement("path",{className:"animated-svg house",d:"M 100 0 L 0 100 L 15 100 L 15 200 L 185 200  L 185 100 L 200 100  Z"}),r.a.createElement("circle",{className:"animated-svg circle",cx:100,cy:122,r:68}),r.a.createElement("path",{className:"animated-svg plus",d:"M 41 111 L 88 111 L 88 64 L 113 64 \r L 113 111 L 158 111 L 158 135 L 113 135 \r L 113 181 L 88 181 L 88 135 L 41 135 Z"}))),r.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin"},r.a.createElement(_e,{value:this.state.username,onChange:this.updateCredentialProperty}),r.a.createElement(Me,{value:this.state.password,onChange:this.updateCredentialProperty}),this.state.loading?r.a.createElement(Ae,null):r.a.createElement("button",{className:"btn btn-lg btn-dark btn-block",type:"submit"},"Masuk"),r.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(Oe),Me=function(e){var t=e.value,a=e.onChange;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Kata Sandi"),r.a.createElement("input",{name:"password",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control border border-dark",placeholder:"Password",required:!0}))},_e=function(e){var t=e.value,a=e.onChange;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Nama Pengguna"),r.a.createElement("input",{name:"username",value:t,onChange:a,type:"text",id:"username",className:"form-control border border-dark",placeholder:"Username",required:!0,autoFocus:!0}))},Ue=Object(m.f)(Object(ue.b)(pe,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:re().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(Re)),Ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(d.a)(this,a),(r=t.call(this,e,o)).title="",r.title=n,r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.authenticated&&this.validateLoginStatus(),document.title=this.title}}]),a}(Oe),He=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Dasbor",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Dasbor"),r.a.createElement("div",{className:"alert alert-info"},Ce(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Ye),Be=Object(m.f)(Object(ue.b)(pe)(He)),qe=a(35),We=a(21),Ke=a(36),Ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return r.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(n.Component),Xe=function e(){Object(d.a)(this,e),this.show=!0},ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=new Xe,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(l.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return r.a.createElement(Ve,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(Ke.a)(e,["style","show","footerContent","toggleable"])}(this.props);return r.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(p.a)(Object(p.a)({},a.style),{},{marginBottom:"10px"})}),r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?r.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},r.a.createElement("i",{className:"fas fa-times"}))):null),r.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?r.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(n.Component),Ge=function e(){Object(d.a)(this,e),this.limit=5,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.beginsWith=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.module=void 0,this.fieldsFilter={},this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.ignoreEmptyValue=!1,this.filterExpDate=!1,this.useExistingFilterPage=!1};!function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_CHECKBOX="FIELD_TYPE_CHECKBOX",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE",e.FIELD_TYPE_DATETIME="FIELD_TYPE_DATETIME",e.FIELD_TYPE_TEXTEDITOR="FIELD_TYPE_TEXTEDITOR"}(we||(we={}));var Qe=function(){function e(){Object(d.a)(this,e),this.groupNames=void 0,this.entityName=void 0,this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.formInputColumn=void 0,this.editable=!0,this.creatable=!0,this.elements=new Array,this.fieldNameList=void 0,this.withProgressWhenUpdated=!1}return Object(l.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.identity)return e[r.id]}return null}}]),e}();Qe.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},Qe.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r=a[n],o={label:r.labelName,value:r.id,isDate:"date"==r.type,filterable:r.filterable};t.push(o)}return t},Qe.hasTextEditorField=function(e){for(var t=0;t<e.length;t++)if(e[t].fieldType==we.FIELD_TYPE_TEXTEDITOR)return!0;return!1};a(147);var Je=function(){function e(){Object(d.a)(this,e)}return Object(l.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a=new Array,n=t.elements,o=0;o<n.length;o++){var i=n[o],l=i.id,s=e[l];if(null!=s){switch(i.fieldType){case we.FIELD_TYPE_DATE:s=new Date(s).toDateString();break;case we.FIELD_TYPE_DATETIME:s=new Date(s).toLocaleString();break;case we.FIELD_TYPE_IMAGE:var c=new String(s).split("~")[0];s=r.a.createElement("img",{src:oe()+c,width:"50",height:"50"});break;case we.FIELD_TYPE_COLOR:s=r.a.createElement("strong",{style:{color:s}},s);break;case we.FIELD_TYPE_NUMBER:s=Se(s);break;case we.FIELD_TYPE_TEXTEDITOR:s=r.a.createElement("div",{dangerouslySetInnerHTML:{__html:new String(s).length>100?new String(s).substring(0,100)+"...":s}});break;case we.FIELD_TYPE_CHECKBOX:s=1==s?r.a.createElement("i",null,"true"):r.a.createElement("i",null,"false");break;case we.FIELD_TYPE_FIXED_LIST:case we.FIELD_TYPE_DYNAMIC_LIST:default:var u;if(i.optionItemName&&""!=i.optionItemName)s=e[l][null!==(u=i.optionItemName)&&void 0!==u?u:"id"];else s=e[l]}a.push(s)}else a.push(s)}return a}}]),e}(),Ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=$e(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,o=this.props.activePage-1<0?a-1:this.props.activePage-1;return r.a.createElement("div",null,r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(o)}},"Previous")),t.map((function(t,a){return r.a.createElement("li",{key:"NAV-"+Ne(),className:"page-item "+(t-1==e.props.activePage?"active":"")},r.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(n.Component),$e=function(e,t,a){var n=[],r=Math.ceil(t/e),o=a-1,i=a+3;r>1&&n.push(1);for(var l=o;l<=i;l++)l>1&&l<=r&&n.push(l);return i<r&&n.push(r),n},et=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).prepopulateForm=function(){},n.getEntityElement=function(){return n.props.entityElement},n.getRequiredAttr=function(){return{required:1==n.getEntityElement().required}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.prepopulateForm()}}]),a}(Oe),tt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=r.a.createRef(),n.changeSingleImageData=function(e){var t=Object(s.a)(n);De(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(s.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=oe()+e;n.setState({singlePreviewData:t,showInputFile:!0})}}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement(r.a.Fragment,null,this.state.showInputFile?r.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",name:t.id,className:"form-control"}):r.a.createElement(n.Fragment,null,r.a.createElement("p",null),r.a.createElement(Ve,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),r.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),r.a.createElement(at,{imageData:this.state.singlePreviewData}),r.a.createElement(Ve,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(et),at=function(e){return 0!=e.show&&e.imageData?r.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},nt=Object(m.f)(Object(ue.b)(pe)(tt)),rt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={previewData:new Map,inputElements:[1]},n.ref=r.a.createRef(),n.setImageData=function(e,t){var a=Object(s.a)(n);De(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(s.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=n.state.previewData,a=new String(e).split("~"),r=new Array,o=0;o<a.length;o++){var i=a[o];t.set(o,i),r.push(o)}n.setState({previewData:t,inputElements:r})}}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement(r.a.Fragment,null,this.state.inputElements.map((function(a){var o=e.state.previewData.get(a),i=void 0==o||""==new String(o).trim(),l=!i&&ot(o);return r.a.createElement(n.Fragment,{key:"IMG"+a+t.id},i?r.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?r.a.createElement("div",null,r.a.createElement("input",{value:o,type:"hidden",name:t.id}),r.a.createElement(it,{imageData:o})):i?null:r.a.createElement("div",null,r.a.createElement("input",{value:o,type:"hidden",name:t.id,className:"form-control"}),r.a.createElement(it,{imageData:oe()+o}),r.a.createElement("p",{className:"badge badge-warning"},o)),r.a.createElement(Ve,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),r.a.createElement("p",null),r.a.createElement(Ve,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(et),ot=function(e){return e&&e.startsWith("data:image")},it=function(e){return 0!=e.show&&e.imageData?r.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},lt=Object(m.f)(Object(ue.b)(pe)(rt)),st=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={inputList:[],singlePreviewData:void 0},n.ref=r.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Not found");n.setState({inputList:e.entities}),n.prepopulateForm()},n.loadInputList=function(){var e=n.getEntityElement().entityReferenceClass;n.commonAjax(n.masterDataService.loadAllEntities,n.inputListLoaded,n.showCommonErrorAlert,e)},n.isNotReady=function(){return 0==n.state.inputList.length},n.validateInputType=function(){console.debug("validateInputType"),n.isNotReady()&&n.loadInputList()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];if(t){var a;if(0!=n.state.inputList.length){var r=n.getEntityElement().optionValueName;r&&(a=t[r])&&(n.ref.current.value=a)}}}},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement();if(this.isNotReady())return r.a.createElement("div",{className:"form-group"},"Loading...");var t=this.state.inputList;return r.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},t.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?r.a.createElement("option",{key:"fid-"+Ne()+"-",value:t[a]},t[n]):null})))}}]),a}(et),ct=Object(m.f)(Object(ue.b)(pe)(st)),ut=(a(148),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return this.props.to?r.a.createElement(je.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:{marginRight:"5px"}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children):r.a.createElement("a",Object.assign({},this.props.attributes,{tyle:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:{marginRight:"5px"}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(n.Component)),dt=function e(){Object(d.a)(this,e),this.editMode=!1,this.fieldValue="",this.updated=!1},mt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new dt,n.contentRef=r.a.createRef(),n.formatDoc=function(e,t){var a=n.contentRef.current;if(a){if(console.debug("commmand: ",e),n.validateMode()){var r=document.execCommand(e,!1,t);console.debug("EXECUTED: ",r," editable: ",a.contentEditable),a.focus()}}else console.debug("oDOc is missing")},n.validateMode=function(){return!n.state.editMode||(alert('Uncheck "Show HTML".'),n.contentRef.current&&n.contentRef.current.focus(),!1)},n.setValue=function(e){n.contentRef.current&&n.setState({fieldValue:n.contentRef.current.innerHTML,updated:!0})},n.setDocMode=function(e){var t=n.contentRef.current;if(t){var a;if(e){a=document.createTextNode(t.innerHTML),t.innerHTML="";var r=document.createElement("pre");t.contentEditable="false",r.id="sourceText",r.contentEditable="true",r.appendChild(a),t.appendChild(r)}else document.all?t.innerHTML=t.innerText:((a=document.createRange()).selectNodeContents(t.firstChild),t.innerHTML=a.toString()),t.contentEditable="true";t.focus()}},n.printDoc=function(){n.validateMode()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.contentRef.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&(n.contentRef.current.innerHTML=t,n.setState({fieldValue:t,updated:!0}))}},n.setEditMode=function(e){n.setDocMode(e),n.setState({editMode:e})},n.paleteCommand=function(e){var t=e.target,a=t.dataset.command,r=t.dataset.value;"clean"==a?n.clean():n.formatDoc(a,r)},n.clean=function(){var e=Object(s.a)(n);n.showConfirmationDanger("Clean content?").then((function(t){t&&e.contentRef.current&&(e.contentRef.current.innerHTML="")}))},n.contentOnChange=function(e){n.setState({updated:!1})},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){console.debug("component updated")}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement("div",null,r.a.createElement("input",{type:"hidden",value:this.state.fieldValue,name:t.id}),r.a.createElement("div",{id:"toolBar1",className:"input-group"},r.a.createElement(vt,{onChange:this.formatDoc}),r.a.createElement(gt,{onChange:this.formatDoc}),r.a.createElement(pt,{onChange:this.formatDoc}),r.a.createElement(ht,{onChange:this.formatDoc}),r.a.createElement(ft,{onChange:this.formatDoc})),r.a.createElement("div",{id:"toolBar2"},r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"clean",className:"palete fas fa-broom"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-print "}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"undo",className:"palete fas fa-undo"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"redo",className:"palete fas fa-redo"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"removeFormat",className:"palete fas fa-times"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"bold",className:"palete fas fa-bold"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"italic",className:"palete fas fa-italic"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"underline",className:"palete fas fa-underline"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyleft",className:"palete fas fa-align-left"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifycenter",className:"palete fas fa-align-center"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyright",className:"palete fas fa-align-right"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertorderedlist",className:"palete fas fa-list-ol"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertonorderedlist",className:"palete fas fa-list-ul"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"formatblock","data-value":"blockquote",className:"palete fas fa-quote-left"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"outdent",className:"palete"},"+ Indentation"),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"indent",className:"palete"},"- Indentation"),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-link",onClick:function(t){var a=prompt("Write the URL here","http://");a&&""!=a&&"http://"!=a&&e.formatDoc("createlink",a)}}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"cut",className:"palete fas fa-cut"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"copy",className:"palete fas fa-copy"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"paste",className:"palete fas fa-paste"})),r.a.createElement("div",{onInput:this.contentOnChange,className:"container-fluid",ref:this.contentRef,id:"textBox",contentEditable:"true"},r.a.createElement("p",null,"Fill content")),r.a.createElement("p",null),r.a.createElement(ut,{show:0==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-exclamation-circle",className:"btn btn-warning btn-sm",onClick:this.setValue},"Update Content"),r.a.createElement(ut,{show:1==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-check",className:"btn btn-primary btn-sm"},"Content Updated"),r.a.createElement(ut,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!1)},show:1==this.state.editMode},"Hide Html"),r.a.createElement(ut,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!0)},show:0==this.state.editMode},"Show Html"))}}]),a}(et),pt=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontsize",a.value),a.value="-"}},r.a.createElement("option",{value:"-",className:"heading",selected:!0},"- size -"),r.a.createElement("option",{value:"1"},"Very small"),r.a.createElement("option",{value:"2"},"A bit small"),r.a.createElement("option",{value:"3"},"Normal"),r.a.createElement("option",{value:"4"},"Medium-large"),r.a.createElement("option",{value:"5"},"Big"),r.a.createElement("option",{value:"6"},"Very big"),r.a.createElement("option",{value:"7"},"Maximum"))},ft=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("backcolor",a.value),a.value="-"}},r.a.createElement("option",{value:"-",className:"heading",selected:!0},"- background -"),r.a.createElement("option",{value:"red"},"Red"),r.a.createElement("option",{value:"green"},"Green"),r.a.createElement("option",{value:"black"},"Black"))},ht=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("forecolor",a.value),a.value="-"}},r.a.createElement("option",{className:"heading",value:"-",selected:!0},"- color -"),r.a.createElement("option",{value:"red"},"Red"),r.a.createElement("option",{value:"blue"},"Blue"),r.a.createElement("option",{value:"green"},"Green"),r.a.createElement("option",{value:"black"},"Black"))},vt=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("formatblock",a.value),a.value="-"}},r.a.createElement("option",{value:"-",selected:!0},"- formatting -"),r.a.createElement("option",{value:"h1"},"Title 1 <h1>"),r.a.createElement("option",{value:"h2"},"Title 2 <h2>"),r.a.createElement("option",{value:"h3"},"Title 3 <h3>"),r.a.createElement("option",{value:"h4"},"Title 4 <h4>"),r.a.createElement("option",{value:"h5"},"Title 5 <h5>"),r.a.createElement("option",{value:"h6"},"Subtitle <h6>"),r.a.createElement("option",{value:"p"},"Paragraph <p>"),r.a.createElement("option",{value:"pre"},"Preformatted <pre>"))},gt=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontname",a.value),a.value="-"}},r.a.createElement("option",{value:"-",className:"heading",selected:!0},"- font -"),r.a.createElement("option",{value:"Arial"},"Arial"),r.a.createElement("option",{value:"Arial Black"},"Arial Black"),r.a.createElement("option",{value:"Courier New"},"Courier New"),r.a.createElement("option",{value:"Times New Roman"},"Times New Roman"))},Et=Object(m.f)(Object(ue.b)(pe)(mt)),bt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={checked:!1},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({checked:1==t})}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement(),a=this.state.checked;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"hidden",name:t.id,value:a?"true":"false"}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("a",{className:a?"btn btn-dark":"btn btn-light",onClick:function(t){return e.setState({checked:!0})}},"Yes"),r.a.createElement("a",{className:a?"btn btn-light":"btn btn-dark",onClick:function(t){return e.setState({checked:!1})}},"No")))}}]),a}(et),yt=["January","February","March","April","May","June","July","August","September","October","November","December"],Nt=function(e){return[e.getFullYear(),Ct(e.getMonth()+1),Ct(e.getDate())].join("-")};var Ct=function(e){return e>=10?e.toString():"0"+e},St=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement(),t=e.id,a=n.props.recordToEdit[t];if(void 0!=a){var r=void 0;switch(e.fieldType){case we.FIELD_TYPE_DATE:var o=new Date(a);if(!o)break;r=Nt(o);break;case we.FIELD_TYPE_NUMBER:r=new String(a);break;default:r=a}if(r)if(e.optionItemName&&""!=e.optionItemName){var i,l=r;n.ref.current.value=l[null!==(i=e.optionItemName)&&void 0!==i?i:"id"]}else n.ref.current.value=r}else console.debug(t," is undefined",n.props.recordToEdit,n.props.recordToEdit[t])}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(1==e.identity||0==e.editable)return r.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0}));var a=r.a.createElement("p",null,e.fieldType);switch(e.fieldType){case we.FIELD_TYPE_PLAIN_LIST:a=r.a.createElement("select",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}),e.plainListValues.map((function(t,a){return r.a.createElement("option",{key:"s-"+e.id+"-o-"+a,value:t},t)})));break;case we.FIELD_TYPE_TEXTAREA:a=r.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=r.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return a}}]),a}(et),kt=function e(){Object(d.a)(this,e),this.inputList=[],this.searchValue=""},Dt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new kt,n.ref=r.a.createRef(),n.inputRef=r.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error(n.getEntityElement().labelName+" Not found");n.setState({inputList:e.entities},(function(){n.inputRef.current&&n.inputRef.current.focus()}))},n.loadInputList=function(){var e,t=n.getEntityElement(),a=t.entityReferenceClass,r=t.optionItemName;if(r){var o={entity:a,filter:{limit:0,page:0,fieldsFilter:Object(j.a)({},r,null===(e=n.inputRef.current)||void 0===e?void 0:e.innerHTML)}};n.commonAjax(n.masterDataService.loadEntities,n.inputListLoaded,n.showCommonErrorAlert,o)}},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({inputList:[t],searchValue:""},(function(){var e,a=n.getEntityElement().optionValueName;a&&(e=t[a])&&(n.ref.current.value=e)}))}},n.search=function(e){if(13==e.keyCode){if(n.inputRef.current){var t=n.inputRef.current;t.innerHTML=new String(t.innerText).trim()}return e.preventDefault(),n.loadInputList(),!1}},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=e.optionValueName,a=e.optionItemName,n=this.state.inputList;console.debug("options: ",n);var o=e.entityReferenceClass+" "+a;return r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},o)),r.a.createElement("div",{onKeyDown:this.search,ref:this.inputRef,contentEditable:!0,className:"form-control"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(ut,{onClick:this.loadInputList,className:"btn btn-secondary",children:"Search"}),r.a.createElement(ut,{show:void 0!=this.props.recordToEdit,onClick:this.prepopulateForm,iconClassName:"fas fa-sync-alt",className:"btn btn-secondary"}))),r.a.createElement("select",Object.assign({},this.getRequiredAttr(),{ref:this.ref,className:"form-control",name:e.id}),n.map((function(e){return a&&t?r.a.createElement("option",{key:"fid-"+Ne()+"-",value:e[t]},e[a]):null}))))}}]),a}(et),wt=Object(m.f)(Object(ue.b)(pe)(Dt)),Ot=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){if(0==this.props.show)return null;var e="vertical"==this.props.orientation?"vertical":"horizontal";return r.a.createElement("div",{style:this.props.style,className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},r.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},r.a.createElement("strong",null,this.props.label?this.props.label:null)),r.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(n.Component),jt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).getEntityElement=function(){return n.props.entityElement},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=r.a.createElement("p",null,e.fieldType);switch(e.fieldType){case we.FIELD_TYPE_DYNAMIC_LIST:t=r.a.createElement(wt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case we.FIELD_TYPE_FIXED_LIST:t=r.a.createElement(ct,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case we.FIELD_TYPE_TEXTEDITOR:t=r.a.createElement(Et,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case we.FIELD_TYPE_IMAGE:t=e.multiple?r.a.createElement(lt,{recordToEdit:this.props.recordToEdit,entityElement:e}):r.a.createElement(nt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case we.FIELD_TYPE_CHECKBOX:t=r.a.createElement(bt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case we.FIELD_TYPE_PLAIN_LIST:case we.FIELD_TYPE_TEXTAREA:default:t=r.a.createElement(St,{recordToEdit:this.props.recordToEdit,entityElement:e})}var a=r.a.createElement("span",null,e.labelName,e.editable&&e.required?r.a.createElement("i",{className:"text-danger"},"*"):null);return r.a.createElement(Ot,{orientation:"vertical",label:a},"          ",t)}}]),a}(Oe),Pt=Object(m.f)(Object(ue.b)(pe)(jt)),It=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.editMode=!1,n.recordToEdit=void 0,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(s.a)(n);n.showConfirmation("Save data?").then((function(e){e&&a.submit(t)}))},n.submit=function(e){var t=new FormData(e),a={},r=new Array,o=[],i=!1;t.forEach((function(e,t){console.debug("Form data ",t),a[t]||(a[t]=new Array);var r=n.getEntityElement(t);if(!r)return!1;switch(r.fieldType){case we.FIELD_TYPE_CHECKBOX:a[t].push("true"==e);break;case we.FIELD_TYPE_DYNAMIC_LIST:case we.FIELD_TYPE_FIXED_LIST:var l=r.optionValueName;l&&a[t].push(Object(j.a)({},l,e));break;case we.FIELD_TYPE_IMAGE:console.debug(t," is image"),"NULLED"==e?(console.debug("NULLED VALUE ADDED: ",t),o.push(t)):(new String(e).startsWith("data:image")&&(i=!0),a[t].push(e));break;default:a[t].push(e)}return!0})),Promise.all(r).then((function(e){var t=n.generateRequestPayload(a,o);console.debug("Record object to save: ",t,"realtimeProgress: ",i),n.ajaxSubmit(t,i)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(p.a)(Object(p.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var o=e[r];console.debug(r," length: ",o.length),1==o.length?a[r]=o[0]:o.length>1&&(a[r]=o.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e,t){1==n.getEntityProperty().withProgressWhenUpdated||t?n.commonAjaxWithProgress(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode):n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved")},n.masterDataService=n.getServices().masterDataService,e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(l.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0!=this.getEntityProperty().editable&&0!=this.getEntityProperty().creatable||this.props.onClose()}},{key:"getEntityElement",value:function(e){return Qe.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?r.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return r.a.createElement("div",{id:"MasterDataForm"},r.a.createElement(Ve,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left"},"Back"),r.a.createElement("form",{onSubmit:this.onSubmit,id:"record-form"},r.a.createElement(ze,{title:r.a.createElement("span",null,e.alias," Record Form ",t),footerContent:r.a.createElement(Tt,null)},r.a.createElement(Lt,{app:this.parentApp,recordToEdit:this.recordToEdit,entityProperty:e}))))}}]),a}(Oe),Tt=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},Lt=function(e){var t=e.entityProperty.elements,a=new Array,n=0,o=Qe.hasTextEditorField(t);a.push(new Array);for(var i=0;i<t.length;i++){var l=t[i];!o&&i>0&&i%5==0&&(n++,a.push(new Array)),a[n].push(l)}return r.a.createElement("div",{className:"row"},a.map((function(t,a){return r.a.createElement("div",{key:"GROUPED_ELEMENT_"+a,className:o?"col-lg-12":"col-lg-6"},t.map((function(t){var a="form-input-for-"+e.entityProperty.entityName+t.id;return r.a.createElement(Pt,{key:a,recordToEdit:e.recordToEdit,entityElement:t})})))})))},Ft=Object(m.f)(Object(ue.b)(pe)(It)),At=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.delete=function(e){var t=Object(s.a)(n);n.showConfirmationDanger("Delete record?").then((function(e){e&&t.doDelete()}))},n.doDelete=function(){var e=n.props.record,t=n.props.entityProperty,a=Qe.getRecordId(e,t);t.withProgressWhenUpdated?n.commonAjaxWithProgress(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a):n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a)},n.getRecordById=function(){var e=n.props.record,t=n.props.entityProperty,a=Qe.getRecordId(e,t);n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,t.entityName,a)},n.recordLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Record not found");n.props.showEditForm&&n.props.showEditForm(e)},n.recordDeleted=function(e){n.showInfo("Record deleted"),n.props.reload()},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){return 0==this.props.show?null:r.a.createElement(n.Fragment,null,r.a.createElement(Ve,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),r.a.createElement(Ve,{onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(Oe),xt=Object(m.f)(Object(ue.b)(pe,(function(e){return{}}))(At)),Rt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerProps,a=e.fieldsFilter;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),t.map((function(t,o){var i,l,s,c,u=t.isDate,d=t.value;if(!t.filterable)return r.a.createElement("th",{key:"dth-"+o+"-"+d},r.a.createElement("p",null,t.label));var m="form-control input-filter";return r.a.createElement("th",{key:"dth-"+o+"-"+d},r.a.createElement("p",null,t.label),r.a.createElement("div",{style:{minWidth:"200px"},className:"input-group"},u?r.a.createElement(n.Fragment,null,r.a.createElement("input",{key:"filter-day-"+d,autoComplete:"off",value:null!==(i=a[d+"-day"])&&void 0!==i?i:"",onChange:e.filterOnChange,name:d+"-day",className:m,placeholder:"day"}),r.a.createElement("input",{key:"filter-month-"+d,autoComplete:"off",value:null!==(l=a[d+"-month"])&&void 0!==l?l:"",onChange:e.filterOnChange,name:d+"-month",className:m,placeholder:"month"}),r.a.createElement("input",{key:"filter-year-"+d,autoComplete:"off",value:null!==(s=a[d+"-year"])&&void 0!==s?s:"",onChange:e.filterOnChange,name:d+"-year",className:m,placeholder:"year"})):r.a.createElement("input",{key:"filter-common-"+d,autoComplete:"off",value:null!==(c=a[d])&&void 0!==c?c:"",onChange:e.filterOnChange,placeholder:t.label,className:m,name:d}),r.a.createElement("div",{className:"input-group-append btn-group"},r.a.createElement("button",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{"data-ordertype":"asc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-up"})),r.a.createElement("button",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{"data-ordertype":"desc",onClick:e.orderButtonOnClick,"data-orderby":d,className:"fas fa-angle-down"})))))})),r.a.createElement("th",null,"Action")))}}]),a}(n.Component),Mt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:r.a.createElement("div",{className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(n.Component),_t=function(e){var t="";return"transaction"==e.entityProperty.entityName&&(t="/transaction/detail/"+e.record.code),"product"!=e.entityProperty.entityName?null:(t="/dashboard/statistic/product/"+e.record.code,r.a.createElement(ut,{className:"btn btn-sm btn-dark",iconClassName:"fas fa-eye",to:t,attributes:{target:"_blank"}}))},Ut=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,o=this.props.active;return r.a.createElement("div",{className:"btn-group"},r.a.createElement(Ve,{className:"btn  btn-sm "+(o?"btn-dark":"btn-light"),onClick:function(e){return a.props.onClick(!0)}},null!==(e=n.yesLabel)&&void 0!==e?e:"Yes"),r.a.createElement(Ve,{className:"btn  btn-sm "+(0==o?"btn-dark":"btn-light"),onClick:function(e){return a.props.onClick(!1)}},null!==(t=n.noLabel)&&void 0!==t?t:"No"))}}]),a}(n.Component),Yt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=void 0,n.recordToEdit=void 0,n.entityProperty=void 0,n.headerProps=void 0,n.adjustFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}return e},n.loadEntities=function(e){var t=Object.assign(new Ge,n.state.filter),a=n.entityProperty.entityName;t.page=null!==e&&void 0!==e?e:t.page;var r={entity:a,filter:n.adjustFilter(t)};n.commonAjax(n.masterDataService.loadEntities,n.entitiesLoaded,n.showCommonErrorAlert,r)},n.entitiesLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.headerProps=Qe.getHeaderLabels(n.props.entityProperty),n.loadEntities(0))},n.getRecordNumber=function(e){var t,a;return(null!==(t=n.state.filter.page)&&void 0!==t?t:0)*(null!==(a=n.state.filter.limit)&&void 0!==a?a:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadEntities(t)},n.filterOnChange=function(e){e.preventDefault();var t=e.target,a=t.name,r=t.value,o=n.state.filter;void 0==o.fieldsFilter&&(o.fieldsFilter={}),o.fieldsFilter[a]=r,n.setState({filter:o})},n.setExactSearch=function(e){var t=n.state.filter;t.exacts=e,n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=e.target.dataset,a=n.state.filter;a.orderBy=t.orderby,a.orderType=t.ordertype,n.setState({filter:a}),n.loadEntities(0)},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0}))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.printRecord=function(){n.props.printRecord(n.state.filter)},n.masterDataService=n.getServices().masterDataService,n.entityProperty=n.props.entityProperty,n.headerProps=Qe.getHeaderLabels(n.props.entityProperty),n.state={showForm:!1,loading:!1,filter:{limit:5,page:0,fieldsFilter:{}}},n}return Object(l.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n,o=this;if(void 0==this.state.recordData)return r.a.createElement(Ae,null);var i=this.headerProps,l=1==this.state.filter.exacts,s=this.state.recordData.entities?this.state.recordData.entities:[];return void 0==i||void 0==s?r.a.createElement(Mt,null):1==this.state.showForm?r.a.createElement(Ft,{recordToEdit:this.recordToEdit,entityProperty:this.entityProperty,onClose:function(e){o.setState({showForm:!1})}}):r.a.createElement("div",{id:"MasterDataList"},r.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px"}},r.a.createElement(Ve,{show:1==this.entityProperty.creatable&&1==this.entityProperty.editable,onClick:this.showCreateForm,iconClassName:"fas fa-plus"},"Add Record"),r.a.createElement(Ve,{onClick:this.printRecord,iconClassName:"fas fa-file"},"Print Record")),r.a.createElement("form",{id:"filter-form",onSubmit:function(e){e.preventDefault()}},r.a.createElement(ze,{title:"Filter",toggleable:!0},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:(null!==(e=this.state.filter.page)&&void 0!==e?e:0)+1,onChange:function(e){o.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:this.state.filter.limit,onChange:function(e){return o.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null)),r.a.createElement("div",{className:"col-3"},r.a.createElement(Ut,{yesLabel:"exact",noLabel:"not exact",active:l,onClick:function(e){return o.setExactSearch(e)}})),r.a.createElement("div",{className:"col-3"},r.a.createElement(Bt,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),r.a.createElement(Ze,{limit:null!==(t=this.state.filter.limit)&&void 0!==t?t:5,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:null!==(n=this.state.filter.page)&&void 0!==n?n:0,onClick:this.loadEntities}),r.a.createElement(ze,{title:"Data List"},this.state.loading?r.a.createElement(Ht,{loading:this.state.loading}):null,r.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(Rt,{fieldsFilter:this.state.filter.fieldsFilter,orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange,headerProps:i}),r.a.createElement("tbody",null,s.map((function(e,t){var a=o.getRecordNumber(t),n=Je.parseValues(e,o.props.entityProperty);return r.a.createElement("tr",{key:"tr-result-"+t},r.a.createElement("td",null,a),n.map((function(e){try{return r.a.createElement("td",{key:"td-u-"+Ne()},e)}catch(t){return r.a.createElement("td",{key:"td-u-"+Ne()},"-")}})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement(_t,{record:e,entityProperty:o.entityProperty}),r.a.createElement(xt,{show:1==o.entityProperty.editable,showEditForm:o.showEditForm,record:e,entityProperty:o.entityProperty,reload:function(){return o.loadEntities(void 0)}}))))}))))))))}}]),a}(Oe),Ht=function(e){var t=e.loading;return r.a.createElement("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",backgroundColor:"rgb(240,240,240,0.5)",marginLeft:"-1rem",marginTop:"-1rem",position:"absolute"}},r.a.createElement(Ae,{show:t}))},Bt=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-play-circle"})),"Apply Filter"),r.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},qt=Object(m.f)(Object(ue.b)(pe)(Yt)),Wt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n.printRecord=function(e){var t=n.state.entityProperty;t&&n.showConfirmation("Print record? ").then((function(a){if(a){var r={entity:t.entityName,filter:e};n.commonAjaxWithProgress(n.masterDataService.generateReport,n.reportCreated,n.showCommonErrorAlert,r)}}))},n.reportCreated=function(e){n.showConfirmation("Save File "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(e){1==e&&Object(qe.a)(Object(We.a)(a.prototype),"startLoading",this).call(this,e)}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){return void 0==this.state.entityProperty?r.a.createElement("div",{className:" container-fluid section-body",style:{paddingTop:"20px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 text-right"},r.a.createElement("div",{className:"spinner-border",role:"status"})),r.a.createElement("div",{className:"col-8"},r.a.createElement("h4",null,"Loading configuration")))):r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,this.state.entityProperty.alias),r.a.createElement(qt,{printRecord:this.printRecord,entityProperty:this.state.entityProperty}))}}]),a}(Oe),Kt=Object(m.f)(Object(ue.b)(pe)(Wt)),Vt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Master Data",!0)).masterDataService=void 0,n.state={code:void 0},n.managementPropertiesLoaded=function(e){n.masterDataService.managementProperties=e.generalList?e.generalList:[],n.setSidebarMenus(),n.refresh()},n.setSidebarMenus=function(){for(var e=[],t=n.masterDataService.managementProperties,a=0;a<t.length;a++){var r=t[a];e.push({name:r.label,url:r.entityName,code:r.entityName,menuClass:r.iconClassName})}console.debug("this.props.setSidebarMenus: ",n.props.setSidebarMenus),n.props.setSidebarMenus&&n.props.setSidebarMenus(e)},n.loadManagamenetPages=function(){if(n.masterDataService.managementProperties.length>0)return n.setSidebarMenus(),void n.refresh();n.commonAjax(n.masterDataService.loadManagementProperties,n.managementPropertiesLoaded,n.showCommonErrorAlert)},n.getCode=function(){return n.props.match.params.code},n.masterDataService=n.getServices().masterDataService,console.debug("PROPS: ",n.props),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){Object(qe.a)(Object(We.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return r.a.createElement(Kt,{code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement(Ae,null));var e=this.masterDataService.managementProperties;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Master Data Page"),r.a.createElement("div",{className:"row"},e.map((function(e){return r.a.createElement("div",{key:"mngmnt-page-item-"+e.entityName,className:"col-md-2 text-center",style:{marginBottom:"10px"}},r.a.createElement("h2",null,r.a.createElement(je.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},r.a.createElement("i",{className:e.iconClassName}))),r.a.createElement("p",null,e.label))}))))}}]),a}(Ye),Xt=Object(m.f)(Object(ue.b)(pe)(Vt)),zt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,!1)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=oe()+e.backgroundUrl;return r.a.createElement("div",{className:"container-fluid section-body",style:{padding:0}},r.a.createElement("div",{className:"jumbotron",style:{margin:"0px",marginTop:"20px",backgroundImage:'url("'+t+'")',backgroundSize:"cover",color:e.fontColor}},r.a.createElement("h1",{className:"display-4"},e.name),r.a.createElement("p",{className:"lead"},e.shortDescription),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("p",null,e.welcomingMessage),r.a.createElement(je.b,{className:"btn btn-primary btn-lg",to:"/about",role:"button"},"About Us")))}}]),a}(Oe),Gt=Object(m.f)(Object(ue.b)(pe)(zt)),Qt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Settings",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"SettingsMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Settings"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Ye),Jt=Object(m.f)(Object(ue.b)(pe,(function(e){return{}}))(Qt)),Zt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).username=void 0,e.displayName=void 0,e.password=void 0,e.profileImage=void 0,e.authorities=void 0,e.requestId=void 0,e.processingDate=void 0,e}return a}(E),$t=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?r.a.createElement("div",{className:"card-header"},this.props.title):null,r.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?r.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(n.Component),ea=function(e){var t=e.edit,a=e.name,n=e.toggleInput,o=e.value,i=e.updateProperty,l=Object(Ke.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?r.a.createElement(ta,{updateProperty:i,name:a,toggleInput:n,value:o,type:l.type}):r.a.createElement(aa,{name:a,toggleInput:n,value:o,type:l.type})},ta=function(e){var t=e.name,a=e.toggleInput,n=e.value,o=e.updateProperty,i=e.type;return r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-md-10"},r.a.createElement("input",{type:null!==i&&void 0!==i?i:"text",name:t,onChange:o,value:n,className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Ve,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},aa=function(e){var t=e.name,a=e.toggleInput,n=e.value,o=e.type;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement("p",{style:{backgroundColor:"color"==o?n:"#fff"}},"color"==o?"Sample Color":n),"color"==o?r.a.createElement("p",null,n):null),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Ve,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},na=function(e){var t=e.name,a=e.edit,o=e.toggleInput,i=e.updateProperty;return a?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(Ve,{attributes:{"data-name":t,"data-enabled":"false"},onClick:o,className:" btn btn-secondary btn-sm"},"cancel")),r.a.createElement("input",{onChange:i,className:"form control",accept:"image/*",type:"file",name:t})):r.a.createElement("div",null,r.a.createElement(Ve,{attributes:{"data-name":t,"data-enabled":"true"},onClick:o,className:" btn btn-info btn-sm"},"edit image"))},ra=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r;return Object(d.a)(this,a),(r=t.call(this,e,!0)).masterDataService=void 0,r.saveRecord=function(e){e.preventDefault(),0!=r.state.fieldChanged()&&r.showConfirmation("Save Data?").then((function(e){e&&r.doSaveRecord()}))},r.doSaveRecord=function(){},r.postRecordSaved=function(e){},r.recordSaved=function(e){r.showInfo("Record Has Been Saved!");var t=r.state.editFields;for(var a in t)t[a]=!1;r.setState({editFields:t},(function(){r.postRecordSaved(e)}))},document.title=n,r.masterDataService=r.getServices().masterDataService,r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus()}}]),a}(Oe),oa=function e(){var t=this;Object(d.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,password:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},ia=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"User Profile")).userService=void 0,n.state=new oa,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(s.a)(n);(t.files?t.files[0].name:void 0)&&De(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({user:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getEditedRecord();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.recordSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.recordSaved,n.showCommonErrorAlert,e))},n.getEditedRecord=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new Zt;for(var o in a){a[o]&&"profileImage"!=o&&(r[o]=t[o])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.postRecordSaved=function(e){n.props.setLoggedUser(e.user)},n.userService=n.getServices().userService,n.state.user=Object.assign(new Zt,n.getLoggedUser()),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return r.a.createElement("div",{id:"UserProfile",className:"container-fluid section-body"},r.a.createElement("h2",null,"User Profile"),r.a.createElement($t,{title:"Profile Data"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},r.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:oe()+t.profileImage}),r.a.createElement(na,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),r.a.createElement(Ot,{label:"User Name"},r.a.createElement(ea,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.username})),r.a.createElement(Ot,{label:"Name"},r.a.createElement(ea,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.displayName})),r.a.createElement(Ot,{label:"Password"},r.a.createElement(ea,{edit:a.password,updateProperty:this.updateProfileProperty,name:"password",toggleInput:this.toggleInput,value:t.password})),r.a.createElement(Ot,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(ra),la=Object(m.f)(Object(ue.b)(pe,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:e},meta:{type:"set_logged_user"}}}(t))}}}))(ia)),sa=function e(){Object(d.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1,this.iconUrl=!1},ca=function e(){var t=this;Object(d.a)(this,e),this.applicationProfile=void 0,this.editFields=new sa,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},ua=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"ApplicationProfile Profile")).state=new ca,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a){var r=Object(s.a)(n);(t.files?t.files[0].name:void 0)&&De(t).then((function(e){r.setAppProfileField(a,e)})).catch(console.error)}}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({applicationProfile:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon||e.iconUrl?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.recordSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.recordSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t,a,r=n.state.applicationProfile,o=n.state.editFields;if(r){var i=new y;for(var l in o){o[l]&&"backgroundUrl"!=l&&"pageIcon"!=l&&"iconUrl"!=l&&(i[l]=r[l])}return o.backgroundUrl&&(null===(e=r.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(i.backgroundUrl=r.backgroundUrl),o.pageIcon&&(null===(t=r.pageIcon)||void 0===t?void 0:t.startsWith("data:image"))&&(i.pageIcon=r.pageIcon),o.iconUrl&&(null===(a=r.iconUrl)||void 0===a?void 0:a.startsWith("data:image"))&&(i.iconUrl=r.iconUrl),i}},n.postRecordSaved=function(e){n.props.setApplicationProfile(e.applicationProfile)},n.state.applicationProfile=Object.assign(new y,n.getApplicationProfile()),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,n=this.state.applicationProfile;if(!n)return null;var o=this.state.editFields,i=null!==(e=n.backgroundUrl)&&void 0!==e?e:"",l=null!==(t=n.pageIcon)&&void 0!==t?t:"",s=null!==(a=n.iconUrl)&&void 0!==a?a:"";return r.a.createElement("div",{id:"ApplicationProfile",className:"container-fluid section-body"},r.a.createElement("h2",null,"Application Profile"),r.a.createElement($t,{title:"Profile Data"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:i.startsWith("data:image")?i:oe()+i}),r.a.createElement(na,{name:"backgroundUrl",edit:o.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),r.a.createElement(Ot,{label:"Name"},r.a.createElement(ea,{edit:o.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:n.name})),r.a.createElement(Ot,{label:"Welcoming Message"},r.a.createElement(ea,{edit:o.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:n.welcomingMessage})),r.a.createElement(Ot,{label:"Short Description"},r.a.createElement(ea,{edit:o.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:n.shortDescription})),r.a.createElement(Ot,{label:"Address"},r.a.createElement(ea,{edit:o.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:n.address})),r.a.createElement(Ot,{label:"About"},r.a.createElement(ea,{edit:o.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:n.about})),r.a.createElement(Ot,{label:"Contact"},r.a.createElement(ea,{edit:o.contact,updateProperty:this.updateProfileProperty,name:"contact",toggleInput:this.toggleInput,value:n.contact})),r.a.createElement(Ot,{label:"Background Color"},r.a.createElement(ea,{type:"color",edit:o.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:n.color})),r.a.createElement(Ot,{label:"Font Color"},r.a.createElement(ea,{type:"color",edit:o.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:n.fontColor})),r.a.createElement(Ot,{label:"Application Icon"},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:l.startsWith("data:image")?l:oe()+l}),r.a.createElement(na,{name:"pageIcon",edit:o.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),r.a.createElement(Ot,{label:"Logo"},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:s.startsWith("data:image")?s:oe()+s}),r.a.createElement(na,{name:"iconUrl",edit:o.iconUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),r.a.createElement(Ot,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(ra),da=Object(m.f)(Object(ue.b)(pe,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(ua)),ma=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,!1)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"About Us"),r.a.createElement($t,{title:"Application"},r.a.createElement(Ot,{label:"Name"},e.name),r.a.createElement(Ot,null,r.a.createElement("i",null,e.shortDescription)),r.a.createElement(Ot,{label:"Contact"},e.contact),r.a.createElement(Ot,{label:"Address"},e.address)),r.a.createElement("p",null))}}]),a}(Oe),pa=Object(m.f)(Object(ue.b)(pe)(ma)),fa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Transaction",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Ye),ha=Object(m.f)(Object(ue.b)(pe)(fa)),va=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.description=void 0,e.unit=void 0,e.utilityTool=void 0,e.imageNames=void 0,e.count=void 0,e.getDefaultImageUrl=function(){return void 0==e.imageNames?oe()+"default.bmp":oe()+e.imageNames.split("~")[0]},e}return a}(E),ga=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).transaction=void 0,e.product=new va,e.expiredDate=new Date,e.count=0,e.usedCount=0,e.stock=0,e.suitable=!0,e.price=0,e.generic=!1,e.referenceProductFlow=void 0,e}return Object(l.a)(a,null,[{key:"fromReference",value:function(e){var t=new a;return t.referenceProductFlow=Object.assign(new a,e),t.product=t.referenceProductFlow.product,t}}]),a}(E),Ea=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.transactionDate=new Date,e.user=void 0,e.type=void 0,e.supplier=void 0,e.customer=void 0,e.healthCenterDestination=void 0,e.healthCenterLocation=void 0,e.productFlows=[],e.description=void 0,e.destination="CUSTOMER",e.productFlowCount=function(){return e.productFlows.length},e.addProductToFlow=function(t){var a=new ga;a.product=t,e.productFlows.push(a)},e.addProductFlow=function(t){e.productFlows.push(t)},e.hasProductFlowReferenceid=function(t){for(var a=0;a<e.productFlows.length;a++){var n=e.productFlows[a];if(n.referenceProductFlow&&n.referenceProductFlow.id==t)return!0}return!1},e.setProductFlowValue=function(t,a,n){try{e.productFlows[t][a]=n}catch(r){console.error(r)}},e.removeProductFlow=function(t){for(var a=0;a<e.productFlows.length;a++){e.productFlows[a];if(a==t){e.productFlows.splice(a,1);break}}},e}return a}(E),ba=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return r.a.createElement("th",{key:Ne()},e)}))))},ya=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e,o){var i;return Object(d.a)(this,a),(i=t.call(this,e,!0)).inventoryService=void 0,i.masterDataService=void 0,i.setTransaction=function(e){i.setState({transaction:e})},i.validateTransactionFromProps=function(){if(i.props.location.state){var e=i.props.location.state.transaction;e&&i.setState({transaction:Object.assign(new Ea,e)})}},i.removeProductFlow=function(e){i.showConfirmationDanger("Delete Product?").then((function(t){if(t){var a=i.state.transaction;a.removeProductFlow(e),i.setTransaction(a)}}))},i.removeAll=function(){i.showConfirmationDanger("Remove All?").then((function(e){if(e){var t=i.state.transaction;t.productFlows=[],i.setTransaction(t)}}))},i.didMountCallback=function(){},i.updateTransactionGeneralField=function(e){var t,a=e.target.name;t="date"==e.target.type?new Date(e.target.value):e.target.value;var n=i.state.transaction;n[a]=t,i.setTransaction(n)},i.updateProductFlow=function(e){var t=e.target,a=t.dataset.index,n=t.value;if(a){var r=i.state.transaction;"date"==t.type?n=new Date(n):"checkbox"==t.type&&(n=1==t.checked),r.setProductFlowValue(parseInt(a),t.name,n),i.setTransaction(r)}},i.buttonSubmitTransaction=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(Ot,{label:"Tanggal"},r.a.createElement("input",{className:"form-control",name:"transactionDate",type:"date",value:Nt(e.transactionDate),onChange:i.updateTransactionGeneralField})),r.a.createElement(Ot,{label:"Catatan"},r.a.createElement("textarea",{value:e.description,name:"description",onChange:i.updateTransactionGeneralField,className:"form-control"})),r.a.createElement("input",{type:"submit",className:"btn btn-success"}))},i.inventoryService=i.getServices().inventoryService,i.masterDataService=i.getServices().masterDataService,document.title=o,i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.validateTransactionFromProps(),this.didMountCallback()}}]),a}(Oe),Na=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={recordNotFound:!1,loading:!1,productName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(j.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.reset=function(e){n.setState({productName:""})},n.searchRecord=function(e){e.preventDefault(),""!=n.state.productName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Produk tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setProduct=function(e){n.setState({productName:e.name,product:e,recordList:void 0,recordNotFound:!1}),n.props.setProduct&&n.props.setProduct(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0,product:void 0,recordList:void 0})},n.loadRecords=function(){!n.state.loading&&n.state.productName&&n.commonAjaxWithProgress(n.masterDataService.getProductsByName,n.recordsLoaded,n.recordsNotFound,n.state.productName)},n.state=Object(p.a)({},n.state),n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,o=null!==(e=this.state.recordList)&&void 0!==e?e:[];return r.a.createElement("form",{onSubmit:this.searchRecord},r.a.createElement(ze,{toggleable:!0,title:"Pilih Produk",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(ut,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/product",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Cari"}),r.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(Ot,{label:"Nama"},r.a.createElement("input",{onChange:this.updateField,value:null!==(t=this.state.productName)&&void 0!==t?t:"",placeholder:"Nama",required:!0,type:"text",className:"form-control",name:"productName"}),o.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},o.map((function(e){return r.a.createElement("div",{className:"option-item",onClick:function(){a.setProduct(e)},style:{cursor:"pointer"},key:"p-"+e.code+e.id},e.name)})),r.a.createElement("a",{onClick:this.recordsNotFound},r.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),r.a.createElement(Ca,{loading:this.state.loading,product:this.state.product,notFound:this.state.recordNotFound})))}}]),a}(Oe),Ca=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(Ae,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Produk tidak ditemukan"));if(!e.product)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih produk"));var a=e.product;return r.a.createElement("div",{style:t},r.a.createElement("h4",null,a.name),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Kode"),r.a.createElement("th",null,"Unit"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a.code),r.a.createElement("td",null,a.unit?a.unit.name:"-")))))},Sa=Object(m.f)(Object(ue.b)(pe)(Na)),ka=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={recordNotFound:!1,loading:!1,supplierName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(j.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchRecord=function(e){e.preventDefault(),""!=n.state.supplierName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(console.debug("response: ",e),!e.entities||!e.entities[0])throw new Error("Pemasok tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setSupplier=function(e){n.setState({supplierName:e.name,supplier:e,recordList:void 0,recordNotFound:!1}),n.props.setProduct&&n.props.setSupplier(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0,supplier:void 0,recordList:void 0})},n.loadRecords=function(){!n.state.loading&&n.state.supplierName&&n.commonAjax(n.masterDataService.getRecordsByKeyLike,n.recordsLoaded,n.recordsNotFound,"supplier","name",n.state.supplierName)},n.reset=function(e){n.setState({supplierName:""})},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,o=null!==(e=this.state.recordList)&&void 0!==e?e:[];return r.a.createElement("form",{onSubmit:this.searchRecord},r.a.createElement(ze,{toggleable:!0,title:"Pilih Pemasok",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(ut,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/supplier",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Search"}),r.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(Ot,{label:"Nama"},r.a.createElement("input",{placeholder:"Nama Pemasok",required:!0,className:"form-control",onChange:this.updateField,value:null!==(t=this.state.supplierName)&&void 0!==t?t:"",name:"supplierName"}),o.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},o.map((function(e){return r.a.createElement("div",{className:"option-item",onClick:function(){a.setSupplier(e)},style:{cursor:"pointer"},key:"p-"+e.code+e.id},e.name)})),r.a.createElement("a",{onClick:this.recordsNotFound},r.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),r.a.createElement(Da,{loading:this.state.loading,supplier:this.state.supplier,notFound:this.state.recordNotFound})))}}]),a}(Oe),Da=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(Ae,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Pemasok tidak ditemukan"));if(!e.supplier)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih pemasok"));var a=e.supplier;return r.a.createElement("div",{style:t},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,"Kode: ",a.code),r.a.createElement("address",null,a.address,r.a.createElement("br",null),r.a.createElement("abbr",{title:"Contact"},"Kontak: "),a.contact))},wa=Object(m.f)(Object(ue.b)(pe,(function(e){return{}}))(ka)),Oa=function e(){Object(d.a)(this,e),this.transaction=new Ea,this.selectedProduct=void 0},ja=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Supply")).state=new Oa,n.setSupplier=function(e){var t=n.state.transaction;t.supplier=e,n.setTransaction(t)},n.setTransaction=function(e){n.setState({transaction:e})},n.setProduct=function(e){n.setState({selectedProduct:e})},n.addToCart=function(e){var t=n.state.transaction;t.addProductToFlow(e),n.setState({transaction:t,selectedProduct:void 0})},n.submit=function(e){e.preventDefault(),n.state.transaction.supplier&&0!=n.state.transaction.productFlowCount()&&n.showConfirmation("Lanjutkan Transaksi?").then((function(e){e&&n.props.history.push({pathname:"/transaction/productin/confirm",state:{transaction:n.state.transaction}})}))},n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.selectedProduct,n=this.state.transaction;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi :: Pemasokan "),r.a.createElement("div",{className:"alert alert-info"},Ce(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("p",null),r.a.createElement(Ot,{label:"Lokasi"},r.a.createElement("span",{className:"form-control"},this.getMasterHealthCenter().name," "))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Sa,{setProduct:this.setProduct})),r.a.createElement("div",{className:"col-6"},r.a.createElement(wa,{setSupplier:this.setSupplier}))),r.a.createElement($t,{title:"Rincian Produk"},a?r.a.createElement(Ia,{addToCart:this.addToCart,product:a}):r.a.createElement("i",null,"Tidak ada data")),r.a.createElement("p",null),r.a.createElement($t,{title:"Daftar Produk"},r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("table",{className:"table table-striped"},ba("No","Nama","Qty","Unit","Harga @Unit","Generik","Kadaluarsa","Opsi"),r.a.createElement("tbody",null,n.productFlows.map((function(e,a){return r.a.createElement(Pa,{updateProductFlow:t.updateProductFlow,productFlow:e,key:"PF_ITEM_"+a,index:a,remove:t.removeProductFlow})})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},r.a.createElement(Ve,{show:n.productFlowCount()>0,onClick:this.removeAll,className:"btn btn-danger",iconClassName:"fas fa-times"},"Remove All"))))),n.supplier&&n.productFlowCount()>0?this.buttonSubmitTransaction(n):null)),r.a.createElement("p",null))}}]),a}(ya),Pa=function(e){var t,a,n=e.productFlow.product;return r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,n.name),r.a.createElement("td",null,r.a.createElement("input",{required:!0,min:1,type:"number",className:"form-control",name:"count","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.count})),r.a.createElement("td",null,null===(t=n.unit)||void 0===t?void 0:t.name),r.a.createElement("td",null,r.a.createElement("input",{required:!0,type:"number",className:"form-control",name:"price","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.price})),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",className:"form-control",name:"generic","data-index":e.index,onChange:e.updateProductFlow,checked:1==e.productFlow.generic})),r.a.createElement("td",null,r.a.createElement("input",{required:!0,type:"date",className:"form-control",name:"expiredDate","data-index":e.index,onChange:e.updateProductFlow,value:Nt(null!==(a=e.productFlow.expiredDate)&&void 0!==a?a:new Date)})),r.a.createElement("td",null,r.a.createElement(Ve,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},Ia=function(e){var t;return r.a.createElement("div",null,r.a.createElement(Ot,{label:"Nama"},e.product.name),r.a.createElement(Ot,{label:"Unit"},null===(t=e.product.unit)||void 0===t?void 0:t.name),r.a.createElement(Ot,{label:"Alat Kesehatan"},1==e.product.utilityTool?"Yes":"No"),r.a.createElement(Ot,{label:"Deskripsi"},e.product.description),r.a.createElement(Ve,{className:"btn btn-dark",iconClassName:"fas fa-plus",onClick:function(t){return e.addToCart(e.product)}},"Add To Cart"))},Ta=Object(m.f)(Object(ue.b)(pe)(ja)),La=function(e){var t;return r.a.createElement("form",null,r.a.createElement(ze,{toggleable:!0,title:"Health Center Destination"},r.a.createElement(Ot,{label:"Health Center List"},r.a.createElement("select",{value:null===(t=e.value)||void 0===t?void 0:t.id,className:"form-control",onChange:e.setHealthCenter},e.healthCenters.map((function(e,t){return r.a.createElement("option",{value:e.id,key:"hc-frm-"+t},e.name)}))))))},Fa=function(e){var t,a,n=e.transaction.destination,o=e.transaction.healthCenterDestination,i=e.transaction.customer;return r.a.createElement(Ot,null,"HEALTH_CENTER"==n?null!==(t=null===o||void 0===o?void 0:o.name)&&void 0!==t?t:r.a.createElement("i",{className:"text-danger"},"Tidak ada puskesmas tujuan"):null,"CUSTOMER"==n?null!==(a=null===i||void 0===i?void 0:i.name)&&void 0!==a?a:r.a.createElement("span",{className:"text-danger"},r.a.createElement("i",{className:"fas fa-exclamation-circle"})," Tidak ada pelanggan"):null)},Aa=function(e){var t,a,n,o,i,l,s,c=e.productFlow.product,u=e.productFlow;return r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,null===(t=u.referenceProductFlow)||void 0===t?void 0:t.id),r.a.createElement("td",null,c.name),r.a.createElement("td",null,null===(a=u.referenceProductFlow)||void 0===a?void 0:a.stock," "),r.a.createElement("td",null,r.a.createElement("input",{required:!0,min:1,max:null===(n=u.referenceProductFlow)||void 0===n?void 0:n.stock,type:"number",className:"form-control",name:"count","data-index":e.index,onChange:e.updateProductFlow,value:u.count})),r.a.createElement("td",null,null===(o=c.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,(null===(i=u.referenceProductFlow)||void 0===i?void 0:i.generic)?"Yes":"No"," "),r.a.createElement("td",null,new Date(null!==(l=null===(s=u.referenceProductFlow)||void 0===s?void 0:s.expiredDate)&&void 0!==l?l:new Date).toDateString()),r.a.createElement("td",null,r.a.createElement(Ve,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},xa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:r.a.createElement("div",{style:this.props.style,className:"alert alert-warning"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(n.Component),Ra=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={recordNotFound:!1,loading:!1,customerName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(j.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchRecord=function(e){e.preventDefault(),e.preventDefault(),""!=n.state.customerName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Pelanggan tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setCustomer=function(e){n.setState({customer:e,customerName:e.name,recordList:void 0}),n.props.setCustomer&&n.props.setCustomer(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0})},n.loadRecords=function(){n.state.loading||n.commonAjax(n.masterDataService.getRecordsByKeyLike,n.recordsLoaded,n.recordsNotFound,"customer","name",n.state.customerName)},n.reset=function(e){n.setState({customerName:""})},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=null!==(e=this.state.recordList)&&void 0!==e?e:[];return r.a.createElement("form",{onSubmit:this.searchRecord},r.a.createElement(ze,{toggleable:!0,title:"Pilih Pelanggan",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(ut,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/customer",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Cari"}),r.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(Ot,{label:"Nama"},r.a.createElement("input",{placeholder:"Nama",value:this.state.customerName,onChange:this.updateField,required:!0,className:"form-control",name:"customerName"}),a.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},a.map((function(e){return r.a.createElement("div",{className:"option-item",onClick:function(){t.setCustomer(e)},style:{cursor:"pointer"},key:"CUST-"+e.id},e.name)})),r.a.createElement("a",{onClick:this.recordsNotFound},r.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),r.a.createElement(Ma,{loading:this.state.loading,customer:this.state.customer,notFound:this.state.recordNotFound})))}}]),a}(Oe),Ma=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(Ae,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Pelanggan tidak ditemukan"));if(!e.customer)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih pelanggan"));var a=e.customer;return r.a.createElement("div",{style:t},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.age," tahun"),r.a.createElement("address",null,a.address,r.a.createElement("br",null)))},_a=Object(m.f)(Object(ue.b)(pe)(Ra)),Ua=function e(){Object(d.a)(this,e),this.selectedProduct=void 0,this.transaction=new Ea,this.availableProducts=void 0,this.healthCenters=[],this.loadingProducts=!1},Ya=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Distribusi")).state=new Ua,n.updateDestination=function(e){var t=e.target.value,a=n.state.transaction;"CUSTOMER"==t?a.healthCenterDestination=void 0:"HEALTH_CENTER"==t&&(a.customer=void 0,a.healthCenterLocation=n.getMasterHealthCenter(),a.healthCenterDestination=n.state.healthCenters[0]),a.destination=t,n.setState({selectedProduct:void 0,availableProducts:[],transaction:a})},n.healthCentersLoaded=function(e){if(e.entities&&0!=e.entities.length){var t=n.state.transaction;t.healthCenterLocation||(t.healthCenterLocation=n.getMasterHealthCenter()),n.masterDataService.setHealthCenters(e.entities),n.setState({healthCenters:e.entities,transaction:t})}else n.setState({healthCenters:[{id:-1,name:"NO DATA, Please Check Master Data"}]})},n.loadHealthCenters=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state.transaction;t.healthCenterLocation=void 0,!e&&n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.setState({healthCenters:[],transaction:t,availableProduct:[]},(function(){n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)}))},n.setProduct=function(e){n.setState({selectedProduct:e},n.loadAvailableProducts)},n.availableProductsLoaded=function(e){n.setState({availableProducts:e.entities,loadingProducts:!1})},n.availableProductsNotLoaded=function(e){console.error(e),n.setState({loadingProducts:!1})},n.loadAvailableProducts=function(){n.state.selectedProduct&&n.state.transaction.healthCenterLocation?n.state.loadingProducts||(n.commonAjax(n.inventoryService.getAvailableProducts,n.availableProductsLoaded,n.availableProductsNotLoaded,n.state.selectedProduct.code,n.state.transaction.healthCenterLocation),n.setState({loadingProducts:!0})):console.warn("(!this.state.selectedProduct || !this.state.selectedHealthCenter)")},n.didMountCallback=function(){n.loadHealthCenters()},n.addToCart=function(e){var t=ga.fromReference(e),a=n.state.transaction;a.addProductFlow(t),n.setTransaction(a)},n.updateSelectedHealthCenter=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));"HEALTH_CENTER"!=n.state.transaction.destination&&n.showConfirmation("Ubah Lokasi").then((function(e){if(e){var t=new Ea;t.healthCenterLocation=a[0],a.length>0&&n.setState({selectedProduct:void 0,availableProducts:[],transaction:t})}}))},n.setCustomer=function(e){var t=n.state.transaction;t.customer=e,n.setTransaction(t)},n.submit=function(e){e.preventDefault(),n.state.transaction.healthCenterLocation&&(n.state.transaction.customer||n.state.transaction.healthCenterDestination)?n.showConfirmation("Lanjutkan Transaksi?").then((function(e){e&&n.props.history.push({pathname:"/transaction/productout/confirm",state:{transaction:n.state.transaction}})})):n.showError("Silakan lengkapi kolom")},n.setHealthCenterDestination=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return e.id==parseInt(null!==(a=t.value)&&void 0!==a?a:"0")}));if(0!=a.length){var r=n.state.transaction;r.healthCenterDestination=a[0],n.setTransaction(r)}},n.state.transaction.healthCenterLocation=n.getMasterHealthCenter(),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,n,o,i,l=this,s=null!==(e=this.state.availableProducts)&&void 0!==e?e:[],c=this.state.transaction,u=this.state.healthCenters;return c.healthCenterLocation&&0!=u.length?r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi :: Distribusi ",null===(t=c.healthCenterLocation)||void 0===t?void 0:t.name),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()},className:"alert alert-info"},Ce(),", ",r.a.createElement("strong",null,null===(a=this.getLoggedUser())||void 0===a?void 0:a.displayName),r.a.createElement("p",null),r.a.createElement(Ot,{label:"Lokasi"},r.a.createElement("select",{autoComplete:"off",value:null===(n=c.healthCenterLocation)||void 0===n?void 0:n.id,onChange:this.updateSelectedHealthCenter,className:"form-control"},u.map((function(e,t){return r.a.createElement("option",{key:"opt-location-"+t,value:e.id},e.name)})))),r.a.createElement(Ot,{label:"Tujian"},r.a.createElement("select",{autoComplete:"off",value:c.destination,onChange:this.updateDestination,className:"form-control"},r.a.createElement("option",{value:"CUSTOMER"},"Pelanggan"),(null===(o=c.healthCenterLocation)||void 0===o?void 0:o.id)==this.getMasterHealthCenter().id?r.a.createElement("option",{value:"HEALTH_CENTER"},"Puskesmas"):null)),r.a.createElement(Fa,{transaction:c}),r.a.createElement(Ve,{iconClassName:"fas fa-sync-alt",className:"btn btn-secondary btn-sm",onClick:function(e){return l.loadHealthCenters(!0)}},"Reload Location")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Sa,{setProduct:this.setProduct})),r.a.createElement("div",{className:"col-6"},"CUSTOMER"==c.destination?r.a.createElement(_a,{setCustomer:this.setCustomer}):r.a.createElement(La,{value:c.healthCenterDestination,setHealthCenter:this.setHealthCenterDestination,healthCenters:this.state.healthCenters}))),r.a.createElement(ze,{toggleable:!0,title:"Produk tersedia di "+(null===(i=c.healthCenterLocation)||void 0===i?void 0:i.name)},r.a.createElement("table",{className:"table table-striped"},ba("No","Id Stok","Nama","Jumlah Masuk","Digunakan","Stok","Unit","Generik","Kadaluarsa","Opsi"),r.a.createElement("tbody",null,this.state.loadingProducts?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:9},r.a.createElement(Ae,null))):0==s.length?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:9},r.a.createElement(xa,{children:"Tidak ada data"}))):s.map((function(e,t){var a,n,o,i=null!==(a=e.product)&&void 0!==a?a:new va,s=c.hasProductFlowReferenceid(null!==(n=e.id)&&void 0!==n?n:0);return r.a.createElement("tr",{key:"pf-tr-"+t},r.a.createElement("td",null,t+1)," ",r.a.createElement("td",null,e.id),r.a.createElement("td",null,i.name," (",i.code,")"),r.a.createElement("td",null,e.count," "),r.a.createElement("td",null,e.usedCount," "),r.a.createElement("td",null,Se(e.stock)),r.a.createElement("td",null,null===(o=i.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,e.generic?"Yes":"No"),r.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toDateString():"-"),r.a.createElement("td",null,s?r.a.createElement("i",{className:"fas fa-check text-success"}):null,r.a.createElement(Ve,{show:0==s,onClick:function(t){return l.addToCart(e)},iconClassName:"fas fa-plus",className:"btn btn-dark btn-sm"})))}))))),r.a.createElement("p",null),r.a.createElement($t,{title:"Daftar Produk"},r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("table",{className:"table table-striped"},ba("No","Id Stok","Nama","Stok","Qty","Unit","Generk","Kadaluarsa","Opsi"),r.a.createElement("tbody",null,c.productFlows.map((function(e,t){return r.a.createElement(Aa,{updateProductFlow:l.updateProductFlow,productFlow:e,key:"PF_ITEM_"+t,index:t,remove:l.removeProductFlow})})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:8},r.a.createElement(Ve,{show:c.productFlowCount()>0,onClick:this.removeAll,className:"btn btn-danger",iconClassName:"fas fa-times"},"Remove All"))))),(c.customer||c.healthCenterDestination)&&c.productFlowCount()>0?this.buttonSubmitTransaction(c):null)),r.a.createElement("p",null)):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,"Transaksi :: Distribusi"),r.a.createElement(Ae,null))}}]),a}(ya),Ha=Object(m.f)(Object(ue.b)(pe)(Ya)),Ba=function e(){Object(d.a)(this,e),this.transaction=void 0},qa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).transactionService=void 0,n.state=new Ba,n.validateTransactionFromProps=function(){if(n.props.location.state){var e=n.props.location.state.transaction;e&&n.setState({transaction:Object.assign(new Ea,e)})}else n.props.history.push("/transaction/productin")},n.back=function(e){var t;n.props.history.push({pathname:"/transaction/productin",state:{transaction:(null===(t=n.state.transaction)||void 0===t?void 0:t.code)?new Ea:n.state.transaction}})},n.onSuccess=function(e){n.showInfo("Transaksi Berhasil"),n.props.history.push({pathname:"/transaction/detail",state:{transaction:e.transaction}})},n.confirm=function(e){n.commonAjaxWithProgress(n.transactionService.submitTransactionIN,n.onSuccess,n.showCommonErrorAlert,n.state.transaction)},n.transactionService=n.getServices().transactionService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.validateTransactionFromProps(),document.title="Konfirmasi Transaksi"}},{key:"render",value:function(){var e,t=this.state.transaction;return t?r.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Konfirmasi Transaksi"),r.a.createElement("div",{className:"alert alert-info"},"Pastikan bahwa data transaksi telah sesuai"),r.a.createElement($t,{title:"Information"},t.code?r.a.createElement(Ot,{label:"Kode"},t.code):null,r.a.createElement(Ot,{label:"Tanggal"},new Date(t.transactionDate).toString()),r.a.createElement(Ot,{label:"Pemasok"},null===(e=t.supplier)||void 0===e?void 0:e.name),r.a.createElement(Ot,{label:"Catatan"}," ",t.description,"  "),r.a.createElement(Ve,{style:{marginRight:"5px"},onClick:this.back,iconClassName:"fas fa-angle-left",children:"Kembali"}),r.a.createElement(Ve,{show:void 0==t.code,onClick:this.confirm,iconClassName:"fas fa-check",className:"btn btn-primary",children:"Konfirmasi"})),r.a.createElement("p",null),r.a.createElement($t,{title:"Product List"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Nama"),r.a.createElement("th",null,"Qty"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Generik"),r.a.createElement("th",null,"Harga @Unit"),r.a.createElement("th",null,"Kadaluarsa"))),r.a.createElement("tbody",null,t.productFlows.map((function(e,t){return r.a.createElement(Wa,{productFlow:e,index:t,key:"pf-tr-cnfm-"+t})}))))),r.a.createElement("p",null)):null}}]),a}(Oe),Wa=function(e){var t,a=e.index,n=e.productFlow;return r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,n.product.name),r.a.createElement("td",null,Se(n.count)),r.a.createElement("td",null,null===(t=n.product.unit)||void 0===t?void 0:t.name),r.a.createElement("td",null,n.generic?"Yes":"No"),r.a.createElement("td",null,Se(n.price)),r.a.createElement("td",null,n.expiredDate?new Date(n.expiredDate).toDateString():"-"))},Ka=Object(m.f)(Object(ue.b)(pe)(qa)),Va=function e(){Object(d.a)(this,e),this.transaction=void 0,this.transactionCode=void 0,this.dataNotFound=!1,this.loading=!1},Xa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).transactionService=void 0,n.reportService=void 0,n.state=new Va,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.recordLoaded=function(e){if(!e.transaction)throw new Error("Not found");n.setState({transaction:e.transaction,dataNotFound:!1})},n.recordNotLoaded=function(e){console.error(e),n.setState({dataNotFound:!0,transaction:void 0})},n.onSubmit=function(e){e.preventDefault(),n.loadData()},n.loadData=function(){console.debug(" this.state.transactionCode: ",n.state.transactionCode),n.commonAjax(n.transactionService.getTransactionByCode,n.recordLoaded,n.recordNotLoaded,n.state.transactionCode)},n.setTransactionCode=function(e){n.setState({transactionCode:e.target.value})},n.recordDeleted=function(e){n.showInfo("Record has been successfully deleted"),n.loadData()},n.recordNotDeleted=function(e){var t;console.error(e),n.showError("Cannot delete transaction "+(null===(t=n.state.transaction)||void 0===t?void 0:t.code)+", please delete all related stock/ product flow data")},n.deleteRecord=function(e){var t;n.state.transaction&&n.showConfirmationDanger("Delete Record with code: "+(null===(t=n.state.transaction)||void 0===t?void 0:t.code)+"?").then((function(e){var t;e&&n.commonAjax(n.transactionService.deleteTransactionByCode,n.recordDeleted,n.recordNotDeleted,null===(t=n.state.transaction)||void 0===t?void 0:t.code)}))},n.receiptCreated=function(e){n.showConfirmation("Save "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.printReceipt=function(){var e;n.commonAjaxWithProgress(n.reportService.printTransactionReceipt,n.receiptCreated,n.showCommonErrorAlert,null===(e=n.state.transaction)||void 0===e?void 0:e.code)},n.validateTransactionFromProps=function(){if(n.props.match.params&&n.props.match.params.code){var e=n.props.match.params.code;n.commonAjax(n.transactionService.getTransactionByCode,n.recordLoaded,n.recordNotLoaded,e)}else if(n.props.location.state){var t=n.props.location.state.transaction;t&&n.setState({transaction:Object.assign(new Ea,t)})}},n.transactionService=n.getServices().transactionService,n.reportService=n.getServices().reportService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.validateTransactionFromProps(),document.title="Transaction Detail"}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){return r.a.createElement("div",{id:"TransactionDetail",className:"container-fluid section-body"},r.a.createElement("h2",null,"Rincial Transaksi"),r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-md-6",onSubmit:this.onSubmit},r.a.createElement(ze,{title:"Cari dengan kode",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(ut,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/transaction",className:"btn btn-secondary"},"Daftar Rekord Transaksi"),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Cari"}))},r.a.createElement(Ot,{label:"Kode"},r.a.createElement("input",{required:!0,onChange:this.setTransactionCode,type:"text",placeholder:"Kode Transaksi",className:"form-control"})))),r.a.createElement("div",{className:"col-md-6"}),r.a.createElement("div",{className:"col-md-12"},this.state.loading?r.a.createElement(Ae,null):r.a.createElement(n.Fragment,null,r.a.createElement(Mt,{show:1==this.state.dataNotFound},"Transaksi tidak ditemukan"),r.a.createElement(za,{show:void 0!=this.state.transaction,transaction:this.state.transaction}),r.a.createElement("p",null),r.a.createElement(ut,{show:void 0!=this.state.transaction,onClick:this.deleteRecord,iconClassName:"fas fa-times",className:"btn btn-danger"},"Hapus Transaksi"),r.a.createElement("p",null),r.a.createElement(ut,{show:void 0!=this.state.transaction,onClick:this.printReceipt,iconClassName:"fas fa-file",className:"btn btn-dark"},"Cetak Struk"),r.a.createElement("p",null)))))}}]),a}(Oe),za=function(e){var t,a,o,i,l;if(0==e.show)return null;var s=e.transaction,c=s.productFlows?s.productFlows:[],u="TRANS_IN"!=s.type;return r.a.createElement(ze,{title:"Transaction Data"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ot,{label:"Id Rekord",orientation:"horizontal"},s.id),r.a.createElement(Ot,{label:"Kode",orientation:"horizontal"},s.code),r.a.createElement(Ot,{label:"Tipe",orientation:"horizontal"},s.type),r.a.createElement(Ot,{label:"Tanggal",orientation:"horizontal"},new Date(null!==(t=s.transactionDate)&&void 0!==t?t:new Date).toLocaleString())),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(n.Fragment,null,r.a.createElement(Ot,{show:"TRANS_OUT_TO"==s.type,label:"Pelanggan",orientation:"horizontal"},null===(a=s.customer)||void 0===a?void 0:a.name),r.a.createElement(Ot,{show:"TRANS_OUT_TO_WAREHOUSE"==s.type,label:"Puskesmas",orientation:"horizontal"},null===(o=s.healthCenterDestination)||void 0===o?void 0:o.name),r.a.createElement(Ot,{show:"TRANS_IN"==s.type,label:"Pemasok",orientation:"horizontal"},null===(i=s.supplier)||void 0===i?void 0:i.name)),r.a.createElement(Ot,{label:"User",orientation:"horizontal"},null===(l=s.user)||void 0===l?void 0:l.displayName)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h5",null,"Note:"),s.description)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,"Products"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"ID Rekord"),r.a.createElement("th",null,"Nama"),r.a.createElement("th",null,"Qty"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Generik"),r.a.createElement("th",null,"Kadaluarsa"),r.a.createElement("th",null,"Harga @Unit"),r.a.createElement("th",null,"Total Harga"),u?r.a.createElement("th",null,"ID Stok"):null)),r.a.createElement("tbody",null,c.map((function(e,t){var a,n,o,i=null!==(a=e.product)&&void 0!==a?a:new va,l=e.price;return r.a.createElement("tr",{key:"pf-tr-"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.id),r.a.createElement("td",null,i.name," (",i.code,")"),r.a.createElement("td",null,Se(e.count)),r.a.createElement("td",null,null===(n=i.unit)||void 0===n?void 0:n.name),r.a.createElement("td",null,e.generic?"Yes":"No"),r.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toDateString():"-"),r.a.createElement("td",null,Se(l)),r.a.createElement("td",null,Se((null!==l&&void 0!==l?l:0)*(null!==(o=e.count)&&void 0!==o?o:0))),u?r.a.createElement("td",null,e.referenceProductFlow?e.referenceProductFlow.id:"-"):null)})))))))},Ga=Object(m.f)(Object(ue.b)(pe,(function(e){return{}}))(Xa)),Qa=function e(){Object(d.a)(this,e),this.transaction=void 0},Ja=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).transactionService=void 0,n.state=new Qa,n.validateTransactionFromProps=function(){if(n.props.location.state){var e=n.props.location.state.transaction;e&&n.setState({transaction:Object.assign(new Ea,e)})}else n.props.history.push("/transaction/productin")},n.back=function(e){var t;n.props.history.push({pathname:"/transaction/productout",state:{transaction:(null===(t=n.state.transaction)||void 0===t?void 0:t.code)?new Ea:n.state.transaction}})},n.onSuccess=function(e){n.showInfo("Transaction Success"),n.props.history.push({pathname:"/transaction/detail",state:{transaction:e.transaction}})},n.confirm=function(e){n.commonAjaxWithProgress(n.transactionService.submitTransactionOUT,n.onSuccess,n.showCommonErrorAlert,n.state.transaction)},n.transactionService=n.getServices().transactionService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.validateTransactionFromProps(),document.title="Transaction Confirmation"}},{key:"render",value:function(){var e,t,a,o,i,l=this.state.transaction;return l?r.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Konfirmasi Transaksi"),r.a.createElement("div",{className:"alert alert-info"},"Pastikan bahwa data transaksi telah sesuai"),r.a.createElement($t,{title:"Information"},l.code?r.a.createElement(Ot,{label:"Kode"},l.code):null,r.a.createElement(Ot,{label:"Tanggal"},new Date(l.transactionDate).toLocaleString()),r.a.createElement(Ot,{label:"Lokasi"},null===(e=l.healthCenterLocation)||void 0===e?void 0:e.name),r.a.createElement(Ot,{label:"Pelanggan"},null!==(t=null===(a=l.customer)||void 0===a?void 0:a.name)&&void 0!==t?t:"-"),r.a.createElement(Ot,{label:"Puskesmas"},null!==(o=null===(i=l.healthCenterDestination)||void 0===i?void 0:i.name)&&void 0!==o?o:"-"),r.a.createElement(Ot,{label:"Catatan"}," ",l.description,"  "),r.a.createElement(n.Fragment,null,r.a.createElement(Ve,{style:{marginRight:"5px"},onClick:this.back,iconClassName:"fas fa-angle-left",children:"Back"}),r.a.createElement(Ve,{show:void 0==l.code,onClick:this.confirm,iconClassName:"fas fa-check",className:"btn btn-primary",children:"Konfirmasi"}))),r.a.createElement("p",null),r.a.createElement($t,{title:"Product List"},r.a.createElement("table",{className:"table table-striped"},ba("No","Id Stok","Nama","Stok","Qty","Unit","Generik","Kadaluarsa"),r.a.createElement("tbody",null,l.productFlows.map((function(e,t){return r.a.createElement(Za,{productFlow:e,index:t,key:"pf-tr-cnfm-"+t})}))))),r.a.createElement("p",null)):null}}]),a}(Oe),Za=function(e){e.index;var t,a,n,o,i=e.productFlow,l=e.productFlow.product;return r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,null===(t=i.referenceProductFlow)||void 0===t?void 0:t.id),r.a.createElement("td",null,l.name),r.a.createElement("td",null,null===(a=e.productFlow.referenceProductFlow)||void 0===a?void 0:a.stock," "),r.a.createElement("td",null,Se(i.count)),r.a.createElement("td",null,null===(n=l.unit)||void 0===n?void 0:n.name),r.a.createElement("td",null,(null===(o=i.referenceProductFlow)||void 0===o?void 0:o.generic)?"Yes":"No"),r.a.createElement("td",null,new Date(e.productFlow.expiredDate).toDateString()))},$a=Object(m.f)(Object(ue.b)(pe)(Ja)),en=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Inventory",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"InventoryMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Persediaan"),r.a.createElement("div",{className:"alert alert-info"},Ce(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)))}}]),a}(Ye),tn=Object(m.f)(Object(ue.b)(pe)(en)),an=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=Object.assign(new va,this.props.product),a=0;return r.a.createElement("div",{className:"row alert alert-light"},r.a.createElement(nn,{number:e.number,product:t}),r.a.createElement("div",{className:"col-9"},r.a.createElement(ze,{title:t.name+"("+t.code+")",toggleable:!0},0==e.productFlows.length?r.a.createElement(xa,null,"No Data"):r.a.createElement("table",{className:"table table-striped"},ba("No","Id Stok","Qty","Digunakan","Stok","Unit","Kadaluarsa"),r.a.createElement("tbody",null,e.productFlows.map((function(t,n){var o;return a+=t.stock,r.a.createElement("tr",{key:"PF_DETAIL_STOCK"+t.id+"-"+n},r.a.createElement("td",null,n+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.count),r.a.createElement("td",null,t.usedCount),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,null===(o=e.product.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,new Date(t.expiredDate).toDateString()))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},"Total Stok"),r.a.createElement("td",null,a)))))))}}]),a}(n.Component),nn=function(e){var t=e.product;return r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card bg-light"},r.a.createElement("img",{className:"card-img-top ",src:t.getDefaultImageUrl()}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},e.number," - ",t.name))))},rn=Object(ue.b)(pe)(an),on=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.productStocks,a=this.props.startingNumber;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("strong",null,"Nama")),r.a.createElement("div",{className:"col-9"},r.a.createElement("strong",null,"Rincian"))),0==t.length?r.a.createElement(xa,{style:{marginTop:"10px"}},"Tidak ada data"):t.map((function(t,o){var i=t.product,l=t.productFlows;return r.a.createElement(n.Fragment,{key:"ps-"+o},r.a.createElement(rn,{number:a+o,location:e.props.location,product:i,productFlows:l}))})))}}]),a}(n.Component),ln=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).expiredWarningDays=0,e.leadTime=void 0,e.cycleTime=void 0,e}return a}(E),sn=function e(){Object(d.a)(this,e),this.productStocks=new Array,this.loading=!1,this.filter=new Ge,this.totalData=0,this.totalItems=0,this.healthCenters=[],this.selectedHealthCenter=new b,this.configuration=new ln},cn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.inventoryService=void 0,n.state=new sn,n.updateFilterExpDate=function(e){var t,a=function(e){return e.target}(e);if("date"==a.type){var r=new Date(a.value),o=function(e,t){console.debug("DIFF DATE ",e," vs ",t);var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)}(new Date,r);t=o,console.debug("diffDay: ",o)}else t=a.value;var i=n.state.configuration;i.expiredWarningDays=parseInt(t),n.setState({configuration:i})},n.healthCentersLoaded=function(e){var t;e.entities&&(n.masterDataService.setHealthCenters(null!==(t=e.entities)&&void 0!==t?t:[]),n.setState({healthCenters:e.entities,selectedHealthCenter:n.getMasterHealthCenter()},n.loadProducts))},n.productLoaded=function(e){var t,a=null!==(t=e.configuration)&&void 0!==t?t:new ln;n.state.filter.filterExpDate&&(a.expiredWarningDays=n.state.configuration.expiredWarningDays),n.setState({totalItems:e.totalItems,configuration:a,loading:!1,totalData:e.totalData,productStocks:e.generalList})},n.loadProductsAt=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadProducts)},n.productLoadingError=function(e){n.showCommonErrorAlert(e),n.setState({loading:!1})},n.loadProducts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;n.setState({loading:!0},(function(){if(e>=0){var t=n.state.filter;t.page=e,n.setState({filter:t},n.doLoadProduct)}else n.doLoadProduct()}))},n.doLoadProduct=function(){var e=n.state.filter;e.filterExpDate&&1==e.ignoreEmptyValue&&(e.day=n.state.configuration.expiredWarningDays),n.commonAjaxWithProgress(n.inventoryService.getProductsInHealthCenter,n.productLoaded,n.productLoadingError,e,n.state.selectedHealthCenter)},n.updateLocation=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));n.showConfirmation("Ubah Lokasi? *muat ulang untuk melihat perubahan").then((function(e){e&&a.length>0&&n.setState({selectedHealthCenter:a[0]})}))},n.loadHealthCenter=function(){n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)},n.getDisplayedRecordOptions=function(){if(n.state.totalData<=10)return[10];for(var e=n.state.totalData/10,t=[],a=10,r=0;r<e;r++)t.push(a),a+=10;return a<n.state.totalData&&t.push(n.state.totalData),t},n.setIgnoreEmpty=function(e){var t=n.state.filter;t.ignoreEmptyValue=e,n.setState({filter:t})},n.setFilterExpDate=function(e){var t=n.state.filter;t.filterExpDate=e,n.setState({filter:t})},n.updateLimit=function(e){var t=e.target.value;n.showConfirmation("Ubah jumlah tampilan?").then((function(e){if(e){var a=n.state.filter;a.limit=t,a.page=0,n.setState({filter:a},n.loadProducts)}}))},n.state.filter.limit=10,n.masterDataService=n.getServices().masterDataService,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setPageTitle("Stok Produk"),this.validateLoginStatus(this.loadHealthCenter)}},{key:"render",value:function(){var e,t,a,n,o,i=this;if(0==this.state.healthCenters.length)return r.a.createElement("div",{id:"ProductStocks",className:"container-fluid"},r.a.createElement("h2",null,"Stok Produk"),r.a.createElement(Ae,null));var l=this.state.filter.ignoreEmptyValue,s=this.state.filter.filterExpDate,c=function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a}(new Date,this.state.configuration.expiredWarningDays);return r.a.createElement("div",{id:"ProductStocks",className:"container-fluid section-body"},r.a.createElement("h2",null,"Stok Produk"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.loadProducts(0)},className:"alert alert-info"},Ce(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement(Ot,{label:"Lokasi"},r.a.createElement("select",{key:"select-health-center",onChange:this.updateLocation,value:this.state.selectedHealthCenter.id,className:"form-control"},this.state.healthCenters.map((function(e,t){return r.a.createElement("option",{key:"select-location-stock-"+t,value:e.id},e.name)})))),r.a.createElement(Ot,{label:"Jumlah Tampilan"},r.a.createElement("select",{key:"select-displayed-record",onChange:this.updateLimit,value:this.state.filter.limit,className:"form-control"},this.getDisplayedRecordOptions().map((function(e,t){return r.a.createElement("option",{key:"select-displayed-record-"+t+"-"+e,value:e},e)})))),r.a.createElement(Ot,{label:"Total Stok"},r.a.createElement("strong",null,Se(this.state.totalItems))),r.a.createElement(Ot,{label:"Abaikan Stok Kosong"},r.a.createElement(Ut,{active:1==l,onClick:this.setIgnoreEmpty})),0==l?null:r.a.createElement(Ot,{label:"Maksimal Kadaluarsa"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement(Ut,{active:1==s,onClick:this.setFilterExpDate})),s?r.a.createElement("div",{className:"col-6 input-group"},r.a.createElement("input",{required:!0,type:"number",className:"form-control-sm",value:this.state.configuration.expiredWarningDays,onChange:this.updateFilterExpDate}),r.a.createElement("input",{onChange:this.updateFilterExpDate,required:!0,type:"date",className:"form-control-sm",value:Nt(c)})):null)),r.a.createElement(Ot,null,r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{style:{marginRight:"5px"},className:"fas fa-sync-alt"}),"Muat Ulang"))),r.a.createElement("p",null),r.a.createElement($t,{title:"Daftar Produk"},r.a.createElement(Ze,{activePage:null!==(t=this.state.filter.page)&&void 0!==t?t:0,limit:null!==(a=this.state.filter.limit)&&void 0!==a?a:10,totalData:this.state.totalData,onClick:this.loadProductsAt}),this.state.loading?r.a.createElement(Ae,null):r.a.createElement(on,{location:this.state.selectedHealthCenter,startingNumber:(null!==(n=this.state.filter.page)&&void 0!==n?n:0)*(null!==(o=this.state.filter.limit)&&void 0!==o?o:0)+1,productStocks:this.state.productStocks})))}}]),a}(Oe),un=Object(m.f)(Object(ue.b)(pe)(cn)),dn=function e(){Object(d.a)(this,e),this.filter=new Ge,this.healthCenters=[],this.selectedHealthCenter=new b,this.period=new Date},mn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e,!0)).state=new dn,n.masterDataService=void 0,n.reportService=void 0,n.inventoryService=void 0,n.healthCentersLoaded=function(e){var t;e.entities&&(n.masterDataService.setHealthCenters(null!==(t=e.entities)&&void 0!==t?t:[]),n.setState({healthCenters:e.entities,selectedHealthCenter:n.getMasterHealthCenter()}))},n.loadHealthCenter=function(){n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)},n.updateLocation=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));a.length>0&&n.setState({selectedHealthCenter:a[0]})},n.reportCreated=function(e){n.showConfirmation("Simpan "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.updatePeriod=function(e){var t=new Date(e.target.value),a=n.state.filter;a.day=t.getDate(),a.month=t.getMonth()+1,a.year=t.getFullYear(),n.setState({period:t,filter:a})},n.loadStockOpname=function(){var e=n.state.selectedHealthCenter.name,t=n.state.period.toDateString();n.showConfirmation("Muat Stok Opname "+t+" : "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.loadStockOpnameReport,n.reportCreated,n.showCommonErrorAlert,n.state.filter,n.state.selectedHealthCenter)}))},n.loadMontlyReport=function(){var e=n.state.period.getMonth()+1+" - "+n.state.period.getFullYear();n.showConfirmation("Muat Laporan Bulanan "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.loadMontlyReport,n.reportCreated,n.showCommonErrorAlert,n.state.filter)}))},n.printReceiveRequestSheet=function(){var e=n.state.period.getMonth()+1+" - "+n.state.period.getFullYear();n.showConfirmation("Cetak LPLPO "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.printReceiveRequestSheet,n.reportCreated,n.showCommonErrorAlert,n.state.filter,n.state.selectedHealthCenter)}))},n.adjustStocks=function(){n.showConfirmation("Kalkulasi Ulang Stok?").then((function(e){e&&n.commonAjaxWithProgress(n.inventoryService.adjustStocks,(function(){return n.showInfo("Success")}),n.showCommonErrorAlert)}))};var r=n.state.period;return n.state.filter.day=r.getDate(),n.state.filter.month=r.getMonth()+1,n.state.filter.year=r.getFullYear(),n.reportService=n.getServices().reportService,n.masterDataService=n.getServices().masterDataService,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setPageTitle("Laporan"),this.validateLoginStatus(this.loadHealthCenter)}},{key:"render",value:function(){var e,t=this.state.period;return r.a.createElement("div",{id:"Report",className:"container-fluid section-body"},r.a.createElement("h2",null,"Report ",t.toDateString()),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement(Ot,{label:"Lokasi"},r.a.createElement("select",{autoComplete:"off",key:"select-health-center",onChange:this.updateLocation,value:this.state.selectedHealthCenter.id,className:"form-control"},this.state.healthCenters.map((function(e,t){return r.a.createElement("option",{key:"select-location-stock-"+t,value:e.id},e.name)})))),r.a.createElement(Ot,{label:"Periode"},r.a.createElement("input",{autoComplete:"off",onChange:this.updatePeriod,type:"date",className:"form-control",value:Nt(t)})),r.a.createElement(Ot,null,r.a.createElement("div",{className:"btn-group"},r.a.createElement(Ve,{className:"btn btn-dark",onClick:this.loadStockOpname},"Stok Opname"),r.a.createElement(Ve,{className:"btn btn-dark",onClick:this.loadMontlyReport},"Laporan Bulanan"),r.a.createElement(Ve,{className:"btn btn-dark",onClick:this.printReceiveRequestSheet},"LPLPO"),r.a.createElement(Ve,{className:"btn btn-dark",onClick:this.adjustStocks},"Kalkulasi Ulang Stok"))))))}}]),a}(Oe),pn=Object(m.f)(Object(ue.b)(pe)(mn)),fn=function e(){Object(d.a)(this,e),this.cycleTime=!1,this.leadTime=!1,this.expiredWarningDays=!1},hn=function e(){var t=this;Object(d.a)(this,e),this.config=void 0,this.editFields=new fn,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},vn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Configuration Profile")).actualConfig=new ln,n.state=new hn,n.loadConfiguration=function(){n.commonAjax(n.masterDataService.getByKey,n.configLoaded,n.showCommonErrorAlert,"configuration","code","APP_CONFIG")},n.configLoaded=function(e){if(e.entities&&e.entities.length>0){var t=Object.assign(new ln,e.entities[0]);n.actualConfig=Object.assign(new ln,e.entities[0]),n.setState({config:t})}},n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.config;a&&(a[t.name]=t.value,n.setState({config:a}))}},n.setProperty=function(e,t){var a=n.state.config;a&&(a[e]=t,n.setState({config:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.config,r=n.actualConfig;if(null!=t&&a){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({config:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getEditedRecord();e&&n.commonAjax(n.masterDataService.updateConfiguration,n.recordSaved,n.showCommonErrorAlert,e)},n.getEditedRecord=function(){var e=n.state.config,t=n.state.editFields;if(e){var a=new ln;for(var r in t)a[r]=e[r];return a}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(),this.loadConfiguration()}},{key:"render",value:function(){var e=this.state.config;if(!e)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement(Ae,null));var t=this.state.editFields;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Inventory Configuration"),r.a.createElement($t,{title:"Inventory Configuration"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement(Ot,{label:"Cycle Time"},r.a.createElement(ea,{type:"number",edit:t.cycleTime,updateProperty:this.updateProfileProperty,name:"cycleTime",toggleInput:this.toggleInput,value:e.cycleTime})),r.a.createElement(Ot,{label:"Lead Time"},r.a.createElement(ea,{type:"number",edit:t.leadTime,updateProperty:this.updateProfileProperty,name:"leadTime",toggleInput:this.toggleInput,value:e.leadTime})),r.a.createElement(Ot,{label:"Exp Date Warning"},r.a.createElement(ea,{type:"number",edit:t.expiredWarningDays,updateProperty:this.updateProfileProperty,name:"expiredWarningDays",toggleInput:this.toggleInput,value:e.expiredWarningDays})),r.a.createElement(Ot,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(ra),gn=Object(m.f)(Object(ue.b)(pe)(vn)),En=function e(){var t=this;Object(d.a)(this,e),this.inventories=[],this.totalItemsSum=0,this.totalExpiredSum=0,this.totalWillExpiredSum=0,this.periodicReviewResult=void 0,this.month=void 0,this.year=void 0,this.getLabel=function(){var e;return yt[(null!==(e=t.month)&&void 0!==e?e:1)-1]+" "+t.year},this.getAmount=function(){return t.totalItemsSum}};En.toDataSets=function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(Object.assign(new En,n))}return t};var bn=function e(){Object(d.a)(this,e),this.inventoryData=new En,this.configuration=new ln},yn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).state=new bn,n.inventoryService=void 0,n.inventoriesDataLoaded=function(e){n.setState({inventoryData:e.inventoryData,configuration:e.configuration},(function(){n.props.setInventoryData(e)}))},n.loadInventoriesData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||!n.getInventoryData()?n.commonAjaxWithProgress(n.inventoryService.getInventoriesData,n.inventoriesDataLoaded,n.showCommonErrorAlert):n.setState({inventoryData:n.getInventoryData(),configuration:n.getInventoryConfig()})},n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(this.loadInventoriesData),this.setPageTitle("Info Persediaan")}},{key:"render",value:function(){var e,t=this,a=this.state.inventoryData.totalItemsSum,n=this.state.inventoryData.totalWillExpiredSum,o=this.state.inventoryData.totalExpiredSum,i=a-o-n;return r.a.createElement("div",{id:"DashboardInfo",className:"section-body container-fluid"},r.a.createElement("h2",null,"Info"),r.a.createElement("div",{className:"alert alert-info"},Ce(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement($t,{className:"bg-success text-light",title:"Stok Aman"},r.a.createElement("h3",{className:"text-center"}," ",Se(i)))),r.a.createElement("div",{className:"col-4"},r.a.createElement($t,{className:"bg-warning",title:"Stok Akan Kadaluarsa"},r.a.createElement("h3",{className:"text-center"},Se(n)))),r.a.createElement("div",{className:"col-4"},r.a.createElement($t,{className:"bg-danger text-warning",title:"Stok Kadaluarsa"},r.a.createElement("h3",{className:"text-center"},Se(o)))),r.a.createElement("div",{className:"col-10"},r.a.createElement("p",null),r.a.createElement(xa,null,r.a.createElement("p",null,"Total Stok: ",r.a.createElement("strong",null,Se(a))),r.a.createElement("p",null,"Peraingatan Kadaluarsa: ",this.state.configuration.expiredWarningDays," hari")),r.a.createElement("div",{className:"btn-group"},r.a.createElement(ut,{iconClassName:"fas fa-sync-alt",onClick:function(){return t.loadInventoriesData(!0)}},"Muat Ulang"),r.a.createElement(ut,{iconClassName:"fas fa-list",to:"/inventory/status"},"Rincian")))))}}]),a}(Oe),Nn=Object(m.f)(Object(ue.b)(pe,(function(e){return{setInventoryData:function(t){return e(ce(t))}}}))(yn)),Cn=function e(){Object(d.a)(this,e),this.inventoryData=new En,this.configuration=new ln},Sn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).state=new Cn,n.inventoryService=void 0,n.inventoriesDataLoaded=function(e){n.setState({inventoryData:e.inventoryData,configuration:e.configuration},(function(){n.props.setInventoryData(e)}))},n.loadInventoriesData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||!n.getInventoryData()?n.commonAjaxWithProgress(n.inventoryService.getInventoriesData,n.inventoriesDataLoaded,n.showCommonErrorAlert):n.setState({inventoryData:n.getInventoryData(),configuration:n.getInventoryConfig()})},n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setPageTitle("Status Persediaan"),this.validateLoginStatus(this.loadInventoriesData)}},{key:"render",value:function(){var e=this,t=this.state.configuration,a=this.state.inventoryData,n=this.state.inventoryData.inventories,o=0;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement($t,{title:"Status Persediaan"},r.a.createElement("div",null,r.a.createElement(ut,{iconClassName:"fas fa-sync-alt",onClick:function(){return e.loadInventoriesData(!0)}},"Muat Ulang"),r.a.createElement("p",null)),r.a.createElement("table",{className:"table table-striped"},ba("No","Lokasi","Total","Stok Aman","Kadaluarsa dalam "+t.expiredWarningDays+" hari","Kadaluarsa"),r.a.createElement("tbody",null,n.map((function(e,t){var a=e.totalItems-e.expiredItems-e.willExpiredItems;return o+=a,r.a.createElement("tr",{key:"p-inv-"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.location.name),r.a.createElement("td",null,Se(e.totalItems)),r.a.createElement("td",null,Se(a)),r.a.createElement("td",{className:e.willExpiredItems>0?"bg-warning":""},Se(e.willExpiredItems)," "),r.a.createElement("td",{className:e.expiredItems>0?"bg-danger text-warning":""},Se(e.expiredItems)," "))})),r.a.createElement("tr",{className:"font-weight-bold"},r.a.createElement("td",{colSpan:2},"Total"),r.a.createElement("td",null,Se(a.totalItemsSum)),r.a.createElement("td",null,Se(o)),r.a.createElement("td",null,Se(a.totalWillExpiredSum)),r.a.createElement("td",null,Se(a.totalExpiredSum)))))))}}]),a}(Oe),kn=Object(m.f)(Object(ue.b)(pe,(function(e){return{setInventoryData:function(t){return e(ce(t))}}}))(Sn)),Dn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).render=function(){var t=e.props.filter;return r.a.createElement(n.Fragment,null,r.a.createElement(Ot,{label:"Month"},r.a.createElement("select",{onChange:e.props.onChange,value:t.month,name:"month",className:"form-control"},yt.map((function(e,t){return r.a.createElement("option",{key:"filter-month-from-"+t,value:t+1},e)})))),r.a.createElement(Ot,{label:"Year"},r.a.createElement("input",{onChange:e.props.onChange,name:"year",type:"number",value:t.year,className:"form-control"})),e.props.fullPeriod?r.a.createElement(n.Fragment,null,r.a.createElement(Ot,{label:"Month To"},r.a.createElement("select",{onChange:e.props.onChange,value:t.monthTo,name:"monthTo",className:"form-control"},yt.map((function(e,t){return r.a.createElement("option",{key:"filter-month-from-"+t,value:t+1},e)})))),r.a.createElement(Ot,{label:"Year To"},r.a.createElement("input",{onChange:e.props.onChange,name:"yearTo",type:"number",value:t.yearTo,className:"form-control"}))):null)},e}return a}(n.Component),wn=(a(149),function e(){Object(d.a)(this,e),this.hoveredIndex=-1,this.updated=new Date}),On=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).middleYAxisValue=0,n.bottomYAxisValue=0,n.offsetX=100,n.offsetY=50,n.baseYIndex=200,n.baseHeight=150,n.lineWidth=0,n.maxValue=0,n.state=new wn,n.maxAmount=function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];n.getAmount()>t&&(t=n.getAmount())}return t},n.updateSizes=function(){n.maxValue=n.maxAmount(n.props.dataSet),n.middleYAxisValue=Math.round(2*n.maxValue/3),n.bottomYAxisValue=Math.round(1*n.maxValue/3),n.lineWidth=23*n.props.dataSet.length+100},n.hover=function(e){n.setState({hoveredIndex:e})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.unHover=function(){n.setState({hoveredIndex:-1})},n.updateSizes(),n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.updateSizes(),this.props.updated!=this.state.updated&&this.setState({updated:this.props.updated})}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"text-center border border-secondary",style:{minHeight:"300px",overflowX:"scroll",paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement("svg",{onMouseOut:this.unHover,className:"bg-light border",version:"1.1",baseProfile:"full",width:2*this.offsetX+23*t.dataSet.length+100,height:300,xmlns:"http://www.w3.org/2000/svg"},t.dataSet.map((function(t,a){var n=t.getAmount()/e.maxValue*e.baseHeight,o=e.baseYIndex+15,i=e.offsetX+10+23*a,l="translate(0,0) rotate(-30,"+i+","+o+")",s=a==e.state.hoveredIndex;return r.a.createElement("g",{style:s?{cursor:"pointer"}:{},className:"chart-group",onMouseOver:function(t){return e.hover(a)},onClick:function(t){return e.onClick(a)},onMouseOut:e.unHover,key:"bar-item-chart-"+a},r.a.createElement("rect",{fill:s?"red":"green",x:e.offsetX+23*a,y:e.baseYIndex-n,height:n,width:20}),r.a.createElement("text",{fill:s?"red":"black",textAnchor:"end",fontSize:10,x:i,y:o,transform:l},t.getLabel()),r.a.createElement("circle",{cx:e.offsetX+23*(a+1),cy:e.baseYIndex,r:"3",fill:"red"}))})),r.a.createElement("rect",{name:"base_axis_x",x:this.offsetX,y:this.baseYIndex,height:2,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_top",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_middle",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+1*this.baseHeight/3,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_bottom",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+2*this.baseHeight/3,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"base_axis_y",x:this.offsetX,y:this.offsetY,height:this.baseHeight,width:2}),r.a.createElement("text",{textAnchor:"end",name:"top_val",fontSize:10,x:this.offsetX,y:this.offsetY},Se(this.maxValue)),r.a.createElement("text",{textAnchor:"end",name:"middle_val",fontSize:10,x:this.offsetX,y:this.offsetY+1*this.baseHeight/3},Se(this.middleYAxisValue)),r.a.createElement("text",{textAnchor:"end",name:"bottom_val",fontSize:10,x:this.offsetX,y:this.offsetY+2*this.baseHeight/3},Se(this.bottomYAxisValue)))),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-history"})," ",new Date(this.state.updated).toString()))}}]),a}(n.Component),jn=function e(){Object(d.a)(this,e),this.product=void 0,this.filter=new Ge,this.inventoriesData=void 0,this.selectedItem=void 0,this.totalData=0,this.periodicReviewResult=void 0},Pn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e,"Penggunaan Produk",!0)).state=new jn,n.inventoryService=void 0,n.setProduct=function(e){return n.setState({product:e})},n.updateFilter=function(e){var t=e.target,a=t.getAttribute("name"),r=t.value;if(a&&r){var o=n.state.filter;o[a]=parseInt(r),n.setState({filter:o})}},n.setFilter=function(e){if(e.preventDefault(),n.state.product){var t={product:n.state.product,filter:n.state.filter};n.commonAjaxWithProgress(n.inventoryService.getProductUsage,n.usageDataLoaded,n.showCommonErrorAlert,t)}else n.showError("Please select product")},n.usageDataLoaded=function(e){var t;n.setState({selectedItem:void 0,periodicReviewResult:null===(t=e.inventoryData)||void 0===t?void 0:t.periodicReviewResult,inventoriesData:e.inventoriesData,totalData:e.totalData})},n.selectInventory=function(e){if(void 0!=n.state.inventoriesData)try{var t=n.state.inventoriesData[e];n.setState({selectedItem:t})}catch(a){}};var r=new Date;return n.state.filter.year=n.state.filter.yearTo=r.getFullYear(),n.state.filter.month=n.state.filter.monthTo=r.getMonth()+1,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.inventoriesData,t=this.state.periodicReviewResult;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Penggunaan Produk"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(ze,{title:"Periode"},r.a.createElement("form",{onSubmit:this.setFilter},r.a.createElement(Dn,{fullPeriod:!0,filter:this.state.filter,onChange:this.updateFilter}),this.state.product?r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Apply"):r.a.createElement("i",null,"Silakan pilih produk")))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Sa,{setProduct:this.setProduct}))),r.a.createElement("div",null,e?r.a.createElement(Tn,{periodicReviewResult:t,totalData:this.state.totalData,onClick:this.selectInventory,inventoriesData:e}):r.a.createElement(Mt,null,"No data")),this.state.selectedItem?r.a.createElement(In,{item:this.state.selectedItem}):null)}}]),a}(Ye),In=function(e){var t=Object.assign(new En,e.item);return r.a.createElement($t,{attributes:{style:{marginTop:"10px"}},title:"Detail Usage"},r.a.createElement(Ot,{label:"Period"},t.getLabel()),r.a.createElement(Ot,{label:"Amount"},Se(t.getAmount())))},Tn=function(e){return r.a.createElement($t,null,r.a.createElement(On,{onClick:e.onClick,updated:new Date,dataSet:En.toDataSets(e.inventoriesData)}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ot,{label:"Total"},Se(e.totalData))),r.a.createElement("div",{className:"col-md-6"},e.periodicReviewResult?r.a.createElement(Ln,{periodicReviewResult:e.periodicReviewResult}):null)))},Ln=function(e){var t=e.periodicReviewResult;return r.a.createElement(n.Fragment,null,r.a.createElement(Ot,{label:"Safety stock"},t.safetyStock),r.a.createElement(Ot,{label:"Target Stock Level"},t.targetStockLevel),r.a.createElement(Ot,{label:"Order Size"},t.orderSize),r.a.createElement(Ot,{label:"Description"},t.description))},Fn=Object(m.f)(Object(ue.b)(pe)(Pn)),An=function e(){Object(d.a)(this,e),this.filter=new Ge,this.recordList=void 0,this.totalData=0},xn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e,"Penggunaan Produk",!0)).state=new An,n.inventoryService=void 0,n.updateFilter=function(e){var t=e.target,a=t.getAttribute("name"),r=t.value;if(a&&r){var o=n.state.filter;o[a]=parseInt(r),n.setState({filter:o})}},n.setFilter=function(e){e.preventDefault(),n.loadRecords()},n.loadRecordsAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadRecords)},n.loadRecords=function(){n.commonAjaxWithProgress(n.inventoryService.getProductListWithUsage,n.usageDataLoaded,n.showCommonErrorAlert,n.state.filter)},n.usageDataLoaded=function(e){n.setState({recordList:e.entities,totalData:e.totalData})};var r=new Date;return n.state.filter.year=n.state.filter.yearTo=r.getFullYear(),n.state.filter.month=n.state.filter.monthTo=r.getMonth()+1,n.state.filter.limit=10,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,n,o,i=this.state.recordList;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Penggunaan Produk"),r.a.createElement(ze,{title:"Periode"},r.a.createElement("form",{onSubmit:this.setFilter},r.a.createElement(Dn,{fullPeriod:!0,filter:this.state.filter,onChange:this.updateFilter}),r.a.createElement(Ot,{label:"Limit"},r.a.createElement("input",{value:null!==(e=this.state.filter.limit)&&void 0!==e?e:5,type:"number",min:1,name:"limit",className:"form-control",onChange:this.updateFilter})),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Apply"))),r.a.createElement(Ze,{activePage:null!==(t=this.state.filter.page)&&void 0!==t?t:0,limit:null!==(a=this.state.filter.limit)&&void 0!==a?a:10,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),i?r.a.createElement(Rn,{products:i,startNumber:(null!==(n=this.state.filter.page)&&void 0!==n?n:0)*(null!==(o=this.state.filter.limit)&&void 0!==o?o:10)}):r.a.createElement(Mt,null,"No data"))}}]),a}(Ye),Rn=function(e){return r.a.createElement("table",{className:"table table-striped"},ba("No","Name","Usage","Unit"),r.a.createElement("tbody",null,e.products.map((function(t,a){var n,o;return r.a.createElement("tr",{key:"product-stat-item-"+a},r.a.createElement("td",null,e.startNumber+a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,Se(null!==(n=t.count)&&void 0!==n?n:0)),r.a.createElement("td",null,null===(o=t.unit)||void 0===o?void 0:o.name))}))))},Mn=Object(m.f)(Object(ue.b)(pe)(xn)),_n=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).ref=r.a.createRef(),n.setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(Ue,null)}}),r.a.createElement(m.a,{exact:!0,path:"/home",render:function(e){return r.a.createElement(Gt,null)}}),r.a.createElement(m.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(Gt,null)}}),r.a.createElement(m.a,{exact:!0,path:"/about",render:function(e){return r.a.createElement(pa,null)}}),r.a.createElement(m.a,{exact:!0,path:"/management",render:function(t){return r.a.createElement(Xt,{setSidebarMenus:e.setSidebarMenus})}}),r.a.createElement(m.a,{exact:!0,path:"/management/:code",render:function(t){return r.a.createElement(Xt,{setSidebarMenus:e.setSidebarMenus})}})),r.a.createElement(Un,null),r.a.createElement(Yn,null),r.a.createElement(Hn,null),r.a.createElement(Bn,null))}},{key:"componentDidMount",value:function(){}}]),a}(Oe),Un=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/dashboard",render:function(e){return r.a.createElement(Be,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/info",render:function(e){return r.a.createElement(Nn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/productstat",render:function(e){return r.a.createElement(Mn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/productstatdetail",render:function(e){return r.a.createElement(Fn,null)}}))},Yn=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(Jt,null)}}),r.a.createElement(m.a,{exact:!0,path:"/settings/user-profile",render:function(e){return r.a.createElement(la,null)}}),r.a.createElement(m.a,{exact:!0,path:"/settings/app-profile",render:function(e){return r.a.createElement(da,null)}}),r.a.createElement(m.a,{exact:!0,path:"/settings/inventory-config",render:function(e){return r.a.createElement(gn,null)}}))},Hn=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/transaction",render:function(e){return r.a.createElement(ha,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productin",render:function(e){return r.a.createElement(Ta,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productin/confirm",render:function(e){return r.a.createElement(Ka,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productout",render:function(e){return r.a.createElement(Ha,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productout/confirm",render:function(e){return r.a.createElement($a,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/detail",render:function(e){return r.a.createElement(Ga,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/detail/:code",render:function(e){return r.a.createElement(Ga,null)}}))},Bn=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/inventory",render:function(e){return r.a.createElement(tn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/stock",render:function(e){return r.a.createElement(un,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/status",render:function(e){return r.a.createElement(kn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/report",render:function(e){return r.a.createElement(pn,null)}}))},qn=Object(m.f)(Object(ue.b)(pe,(function(e){return{}}))(_n)),Wn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=Ne(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e}return a}(E);Wn.defaultMenuIconClassName="fas fa-folder",Wn.getIconClassName=function(e){return void 0==e.menuClass?Wn.defaultMenuIconClassName:e.menuClass};a(150);var Kn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus;return r.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},r.a.createElement(Vn,{show:null!=t,brand:t}),a.map((function(a){var n=e.isSidebarActive(a)?"menu-active":"regular-menu";return r.a.createElement("li",{className:"sidebar-item "+n,key:"SIDEBAR_"+a.code},r.a.createElement(je.b,{to:t.url+"/"+a.url},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Wn.getIconClassName(a)})),r.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(Oe),Vn=function(e){return 0==e.show?null:r.a.createElement(n.Fragment,null," ",r.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},r.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement("h3",{className:"text-dark"},r.a.createElement("i",{className:Wn.getIconClassName(e.brand)})),r.a.createElement(je.b,{to:e.brand.url,style:{textDecoration:"none"}},r.a.createElement("h4",{className:"text-dark"},e.brand.name)))),r.a.createElement("li",{className:"sidebar-item-brand "},r.a.createElement(je.b,{to:e.brand.url},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Wn.getIconClassName(e.brand)})))))},Xn=Object(m.f)(Object(ue.b)(pe,(function(e){return{performLogout:function(t){return e(se(t))}}}))(Kn)),zn=(a(151),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/");console.debug("pathName: ",e);var a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){try{for(var t=0;t<g.length;t++){var a=g[t];if(a.url=="/"+e)return a}return null}catch(n){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t;return n.state.menu&&null!=n.state.menu.subMenus&&(null===(e=n.state.menu.subMenus)||void 0===e?void 0:e.length)>0?null===(t=n.state.menu)||void 0===t?void 0:t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(p.a)({},n.state),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar;return r.a.createElement("div",{id:"main-layout"},r.a.createElement(Fe,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),r.a.createElement("div",{id:"page-content",className:"container-fluid",style:{margin:0,padding:0,minHeight:"95vh"}},r.a.createElement("div",{className:"container-fluid",style:{zIndex:1,position:"absolute",paddingTop:"55px"},id:e?"app-content":"content"},r.a.createElement(qn,{setSidebarMenus:this.setSidebarMenus})),1==e?r.a.createElement(Xn,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}):null))}}]),a}(Oe)),Gn=Object(m.f)(Object(ue.b)(pe,(function(e){return{performLogout:function(t){return e(se(t))}}}))(zn)),Qn=function e(){Object(d.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.realtime=!1,this.appIdStatus="Loading App Id",this.errorRequestAppId=!1},Jn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=new Qn,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.clientRef=r.a.createRef(),n.userService=void 0,n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.requestAppId=function(){n.setState({errorRequestAppId:!1,appIdStatus:"Authenticating application"}),n.userService.requestApplicationId((function(e){n.props.setRequestId(e,Object(s.a)(n)),n.refresh()}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({errorRequestAppId:!1,appIdStatus:"Authenticating application (Retrying)"}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(s.a)(n))}),n.errorRequestingAppId)},n.errorRequestingAppId=function(){n.setState({errorRequestAppId:!0})},n.smoothEndLoading=function(){!function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)}((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.props.setMainApp(Object(s.a)(n)),n.userService=n.props.services.userService,n}return Object(l.a)(a,[{key:"refresh",value:function(){this.setState({mainAppUpdated:new Date})}},{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(e){this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){try{this.decrementLoadings(),0==this.loadings&&(this.state.realtime?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}catch(e){console.error(e)}}},{key:"handleMessage",value:function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,n=Math.floor(a);(a<0||a>100)&&this.endLoading(),this.setState({loadingPercentage:n})}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var o=this;this.alertOnYesCallback=function(e){o.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){o.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",oe()+e.pageIcon)}}(this.props.applicationProfile)}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;if(!this.props.requestId)return r.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},r.a.createElement("h2",null,this.state.appIdStatus),this.state.errorRequestAppId?r.a.createElement("a",{className:"btn btn-outline-dark",onClick:this.retryRequestAppId},r.a.createElement("i",{className:"fas fa-redo"})):r.a.createElement(Ae,null));var t=re();return r.a.createElement(n.Fragment,null,r.a.createElement(Zn,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?r.a.createElement(be,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(Gn,null),r.a.createElement(me.a,{url:t+"realtime-app",topics:["/wsResp/progress/"+this.props.requestId],onMessage:function(t){e.handleMessage(t)},ref:function(t){e.clientRef=t}}))}}]),a}(n.Component);function Zn(e){return 1==e.loading?r.a.createElement(he,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var $n=Object(m.f)(Object(ue.b)(pe,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){var a={type:"SET_REQUEST_ID",payload:Object(p.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}};return console.debug("setRequestId: ",a),a}(t,a))}}}))(Jn)),er=function(e){var t=V();return r.a.createElement(ue.a,{store:t},r.a.createElement(je.a,null,r.a.createElement($n,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(er,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a(152)},81:function(e,t,a){},82:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.8210aada.chunk.js.map