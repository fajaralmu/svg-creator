{"version":3,"sources":["redux/appReducer.ts","redux/types.js","constant/Menus.ts","models/BaseEntity.ts","models/ApplicationProfile.ts","redux/userReducer.js","models/common/AttachmentInfo.ts","services/Promises.ts","services/UserService.ts","services/MasterDataService.ts","services/ReportService.ts","redux/servicesReducer.ts","services/Services.ts","redux/reducers.ts","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","redux/configureStore.js","middlewares/Common.ts","constant/Url.js","redux/actionCreators.ts","constant/stores.js","component/loader/Loader.js","component/alert/Alert.js","component/BaseComponent.tsx","component/navigation/Header.tsx","component/navigation/AnchorWithIcon.tsx","component/pages/home/HomeMain.tsx","utils/StringUtil.ts","utils/ComponentUtil.ts","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","component/form/FormGroup.tsx","component/navigation/ToggleButton.tsx","models/elements/BaseElement.ts","models/elements/SvgPoint.ts","models/elements/Rect.ts","models/elements/Circle.ts","constant/ElementType.ts","models/elements/QuadraticCurve.ts","models/elements/Ellipse.ts","models/elements/Path.ts","models/elements/SvgItem.ts","component/pages/creator/SettingForm.tsx","component/pages/creator/creatorHelper.tsx","component/navigation/AnchorWithSvg.tsx","component/pages/creator/Points.tsx","component/pages/creator/SvgCreator.tsx","component/pages/creator/CreatorMain.tsx","component/pages/creator/baseTemplate.ts","component/layout/ApplicationContent.tsx","models/common/Menu.ts","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","utils/EventUtil.ts","Root.tsx","serviceWorker.js","index.js"],"names":["initState","mainApp","undefined","inventoryData","inventoryConfig","reducer","state","action","type","payload","menus","code","name","url","menuClass","active","authenticated","showSidebar","BaseEntity","id","createdDate","modifiedDate","nulledFields","ApplicationProfile","appCode","shortDescription","about","welcomingMessage","address","contact","website","iconUrl","pageIcon","backgroundUrl","footerIconClass","color","fontColor","loginKey","loginStatus","loginFailed","menuData","loggedUser","loginAttempt","requestId","applicationProfile","assetsPath","result","console","debug","user","referer","refresh","setLoginKeyCookie","data","AttachmentInfo","Blob","dataUrl","axios","require","commonAjaxPostCalls","endpoint","request","Promise","resolve","reject","post","headers","commonAuthorizedHeader","then","axiosResponse","updateAccessToken","response","rawAxiosResponse","catch","e","error","UserService","updateProfile","contextPath","concat","requestApplicationId","callbackSuccess","callbackError","alert","requestApplicationIdNoAuth","commonHeader","commonAjaxPublicPostCalls","this","instance","MasterDataService","managementProperties","entityPropertyMap","Map","getProductByCode","getByKey","getProductsByName","getRecordsByKeyLike","loadHealthCenters","entity","filter","orderBy","orderType","updateApplicationProfile","profile","set","get","req","limit","page","key","value","exacts","fieldsFilter","model","editMode","responseType","fileName","split","rawSplit","extension","length","blob","window","URL","createObjectURL","attachmentInfo","commonAjaxPostCallsWithBlob","ReportService","services","userService","getInstance","masterDataService","reportService","rootReducer","combineReducers","appState","shopReducer","userState","userReducer","servicesState","servicesReducers","initialState","performLoginMiddleware","store","next","meta","app","responseJson","loginSuccess","log","common","newAction","Object","assign","dispatch","finally","endLoading","getLoggedUserMiddleware","param","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","method","body","JSON","stringify","json","err","storeChatMessageLocallyMiddleware","getStore","configureStore","createStore","applyMiddleware","userMiddleware","realtimeChatMiddleware","getRequestId","getLoginKey","LOGIN_KEY","getState","getCookie","accessToken","setCookie","cookieValue","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","ca","decodeURIComponent","i","c","charAt","substring","indexOf","devMode","getElementById","rootValue","baseImageUrl","getAssetsPath","usedHost","apiAccount","performLogout","startLoading","mapCommonUserStateToProps","LoaderContent","props","realtime","className","style","margin","position","zIndex","marginBottom","role","aria-hidden","padding","marginTop","height","width","progress","transitionDuration","disabled","Loader","timer","intervalId","update","clearInterval","setState","endMessage","withTimer","setInterval","Component","Backdrop","backgroundColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","title","onClose","Alert","React","createRef","isError","current","focus","headerClassName","display","tabIndex","aria-labelledby","children","BaseComponent","parentApp","updated","setPageTitle","validateLoginStatus","callback","isLoggedUserNull","backToLogin","handleInputChange","event","target","checked","showCommonErrorAlert","message","showError","getServices","withProgress","successCallback","errorCallback","params","doAjax","password","showAlert","showAlertError","history","push","IState","showNavLinks","buttonToggleNavRef","toggleNavLinks","onLogout","showConfirmation","ok","setMenu","menu","click","menuSet","element","getMenus","getLoggedUser","label","getApplicationProfile","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","map","isActive","activeMenuCode","String","to","NavBarTop","paddingLeft","fontSize","withRouter","connect","AnchorWithIcon","show","btnClassName","attributes","iconClassName","marginRight","tyle","HomeMain","render","Welcome","xmlns","stroke","fill","stroke-width","x","y","PenSvg","index","uniqueId","string","getUTCMilliseconds","toString","AnchorButton","Modal","hideModal","showModal","toggleable","footerContent","showFooter","FormGroup","orientation","ToggleButton","yesLabel","noLabel","BaseElement","strokeColor","strokeWidth","fillColor","init","html","baseProperties","SvgPoint","updatePosition","dim","getBoundingClientRect","parseInt","clientX","left","toFixed","clientY","top","newInstanceFromReference","refPoint","p","newStraightLineInstance","prevPoint","Math","abs","newInstanceFromEvent","Rect","r","newInstance","start","end","getBoundingRect","xMin","xMax","yMin","yMax","Circle","calculateRadius","point1","point2","radiusX","radiusY","radius","sqrt","pow","middlePoint","radiusPoint","ElementType","QuadraticCurve","closePath","endPoints","slopePoints","getPath","fullPath","slope","points","startPoint","Ellipse","rx","ry","middle","radiusXPoint","radiusYPoint","Path","firstPoint","path","point","SvgItem","PATH","insertAfter","pointCount","getPointByIndex","addPoint","splice","insertBefore","setClosePath","val","setStrokeColor","RECT","CIRCLE","ELLIPSE","addPointByEvent","straightLine","getCircleElement","adjustPoints1And2","getQuadCurveElement","CURVE","getEllipseElement","point3","getRectElement","xTemp","yTemp","getPathElement","getElement","getMaxAxis","getMinAxis","axis","max","res","getOutput","items","w","h","svg","paths","replace","GeneralForm","elements","onSubmit","preventDefault","selectedIndex","onChange","array","autoComplete","pointColor","showOutput","output","arr","WorksheetRect","size","focusable","onMouseMove","BoundingRect","boundingRect","rect","PointInfo","onDelete","dragMode","AnchorWithSvg","src","icon","State","contextMenu","Points","onContextMenu","getSelectedPoint","closeContextMenu","removePoint","movePoint","selectedPoint","activeIndex","cx","cy","closeMenu","svgWidth","svgHeight","ContextMenu","menuHeight","menuWidth","calculatePosY","exceedMaxHeight","cursor","svgElements","selectedPointIndex","SvgCreator","activePointRef","initKeyListener","onkeypress","onkeyup","setActiveIndex","KeyboardEvent","keyEvent","updateClosePath","getSelectedElement","setEditMode","dragPoint","updateSelectedPoint","setActivePointIndexAndDrag","el","updateSelectedElement","tagName","setElementType","elementType","addPointToCurrentElement","setElementNoColor","updateSelectedElementProp","setNullPointIndexLater","addSvgElement","orderFront","removeSelectedElement","orderBack","unshift","onPointClick","svgItemId","addPointFromReferencePoint","filteredElements","setSelectedPoint","removeSelectedPoint","backgroundImage","imageData","baseProps","circle","curve","ellipse","CreatorMain","onFileChange","fileInput","reader","FileReader","readAsDataURL","files","onload","onerror","InputImage","ApplicationContent","setSidebarMenus","exact","Menu","description","pathVariables","subMenus","defaultMenuIconClassName","getIconClassName","SideBar","isSidebarActive","parentMenu","pathName","location","pathname","addEventListener","handleScroll","removeEventListener","scrollTop","srcElement","min","sidebarMenus","brand","menuClassName","Brand","textAlign","paddingTop","paddingBottom","textDecoration","MainLayout","currentPathName","setMenuNull","warn","setCurrentMenu","pathRaw","firstPath","trim","extractMenuPath","getMenuByMenuPath","getSubMenus","loading","loadingPercentage","mainAppUpdated","appIdStatus","errorRequestAppId","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","clientRef","alertCallback","onOk","requestAppId","setRequestId","retryRequestAppId","errorRequestingAppId","smoothEndLoading","intervalMs","timeout","setTimeout","clearTimeout","doItLater","setMainApp","incrementLoadings","decrementLoadings","msg","percentageFloat","percentage","floor","yesCallback","noCallback","dismissAlert","link","querySelector","createElement","setAttribute","head","appendChild","updateFavicon","Loading","text","ret","loggedIn","actions","Root","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4dab7059.chunk.js","sourcesContent":["import * as types from './types'\r\n\r\nexport const initState = { \r\n    mainApp: undefined,\r\n    inventoryData: undefined,\r\n    inventoryConfig: undefined,\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case types.SET_MAIN_APP:\r\n              \r\n            return { ...state, mainApp: action.payload }; \r\n        case types.SET_INVENTORY_DATA:\r\n\r\n        return {...state, inventoryData: action.payload.inventoryData, inventoryConfig: action.payload.inventoryConfig}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","/**\r\n * \r\n */\r\n  \r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";   \r\nexport const GET_PRODUCT_SALES_DETAIL = \"get_product_Sales_detail\"; \r\nexport const SET_REQUEST_ID = \"SET_REQUEST_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\"; \r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";   \r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";\r\nexport const SET_INVENTORY_DATA = \"SET_INVENTORY_DATA\";","\r\nimport Menu from '../models/common/Menu';\r\n\r\nexport const HOME = \"home\"; \r\nexport const ABOUT = \"about\"; \r\nexport const CREATOR = \"creator\"; \r\n\r\nexport const getMenus = () => {\r\n    let menuSet: Menu[] = [];\r\n    for (let i = 0; i < menus.length; i++) {\r\n        const element: Menu = menus[i];\r\n        menuSet.push(element);\r\n    }\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n    console.debug(\"pathName: \", pathName);\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const menus: Menu[] = [\r\n    {\r\n        code: HOME,\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    },\r\n    {\r\n        code: CREATOR,\r\n        name: \"Creator\",\r\n        url: \"/creator\",\r\n        menuClass: \"fa fa-play\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    },\r\n    \r\n    // {\r\n    //     code: DASHBOARD,\r\n    //     name: \"Dasbor\",\r\n    //     url: \"/dashboard\",\r\n    //     menuClass: \"fas fa-tachometer-alt\",\r\n    //     active: false,\r\n    //     authenticated: true,\r\n    //     showSidebar: true,\r\n    //     subMenus: [\r\n    //         {\r\n    //             code: 'dashboard_info',\r\n    //             name: 'Info Persediaan',\r\n    //             url: 'info',\r\n    //             menuClass: 'fas fa-info-circle'\r\n\r\n    //         },\r\n    //         {\r\n    //             code: 'productstat',\r\n    //             name: 'Statistik Produk',\r\n    //             url: 'productstat',\r\n    //             menuClass: 'fas fa-chart-line'\r\n    //         },\r\n    //         {\r\n    //             code: 'productstat',\r\n    //             name: 'Statistik Produk Detail',\r\n    //             url: 'productstatdetail',\r\n    //             menuClass: 'fas fa-chart-line'\r\n    //         }\r\n    //     ]\r\n    // }, \r\n    // {\r\n    //     code: INVENTORY,\r\n    //     name: \"Persediaan\",\r\n    //     url: \"/inventory\",\r\n    //     menuClass: \"fas fa-warehouse\",\r\n    //     active: false,\r\n    //     authenticated: true,\r\n    //     showSidebar: true,\r\n    //     subMenus: [\r\n    //         {\r\n    //             code: 'inventory_stocks',\r\n    //             name: 'Stok',\r\n    //             url: 'stock',\r\n    //             menuClass: 'fas fa-archive'\r\n\r\n    //         },\r\n    //         {\r\n    //             code: 'inventory_status',\r\n    //             name: 'Status',\r\n    //             url: 'status',\r\n    //             menuClass: 'fas fa-layer-group'\r\n    //         }\r\n    //         ,\r\n    //         {\r\n    //             code: 'report',\r\n    //             name: 'Laporan',\r\n    //             url: 'report',\r\n    //             menuClass: 'fas fa-file-alt'\r\n    //         }\r\n    //     ]\r\n    // }, \r\n    // {\r\n    //     code: TRANSACTION,\r\n    //     name: \"Transaksi\",\r\n    //     url: \"/transaction\",\r\n    //     menuClass: \"fas fa-book\",\r\n    //     active: false,\r\n    //     authenticated: true,\r\n    //     showSidebar: true,\r\n    //     subMenus: [\r\n    //         {\r\n    //             code: 'transaction_in',\r\n    //             name: 'Pasokan',\r\n    //             url: 'productin',\r\n    //             menuClass: 'fas fa-arrow-down'\r\n\r\n    //         },\r\n    //         {\r\n    //             code: 'transaction_out',\r\n    //             name: 'Distribusi',\r\n    //             url: 'productout',\r\n    //             menuClass: 'fas fa-arrow-up'\r\n    //         },\r\n    //         {\r\n    //             code: 'transaction_detail',\r\n    //             name: 'Detail',\r\n    //             url: 'detail',\r\n    //             menuClass: 'fas fa-folder'\r\n    //         }\r\n    //     ]\r\n    // },  \r\n    // {\r\n    //     code: MENU_MASTER_DATA,\r\n    //     name: \"Master Data\",\r\n    //     url: \"/management\",\r\n    //     menuClass: \"fa fa-database\",\r\n    //     active: false,\r\n    //     authenticated: true,\r\n    //     showSidebar: true\r\n    // },\r\n    // {\r\n    //     code: MENU_SETTING,\r\n    //     name: \"Setting\",\r\n    //     url: \"/settings\",\r\n    //     menuClass: \"fas fa-cogs\",\r\n    //     active: false,\r\n    //     authenticated: true,\r\n    //     showSidebar: true,\r\n    //     subMenus: [\r\n    //         {\r\n    //             code: 'user_profile',\r\n    //             name: 'Profil Pengguna',\r\n    //             menuClass: 'fas fa-user-cog',\r\n    //             url: 'user-profile',\r\n    //         },\r\n    //         {\r\n    //             code: 'app_profile',\r\n    //             name: 'Setting Aplikasi',\r\n    //             menuClass: 'fas fa-cog',\r\n    //             url: 'app-profile',\r\n    //         },\r\n    //         {\r\n    //             code: 'inventory_config',\r\n    //             name: 'Konfigurasi Persediaan',\r\n    //             menuClass: 'fas fa-cog',\r\n    //             url: 'inventory-config',\r\n    //         },\r\n            \r\n    //     ]\r\n    // },\r\n];\r\n","\nexport default class BaseEntity{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tnulledFields?:string[] | undefined;\n\t \n\n}\n","import BaseEntity from './BaseEntity';\n\nexport default class ApplicationProfile extends BaseEntity{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n}\n","import * as types from './types'\r\nimport * as menuData from '../constant/Menus' \r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport { updateAccessToken, setLoginKeyCookie } from './../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    menus: menuData.menus,\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: new ApplicationProfile(), \r\n    assetsPath: \"/\",\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n   \r\n    let result = {};\r\n   \r\n    switch (action.type) {\r\n        case types.SET_REQUEST_ID: \r\n            console.debug(\"USER REDUCER:REQUEST_ID\", action.payload.requestId);\r\n            result = {\r\n                ...state, requestId: action.payload.requestId, \r\n                applicationProfile: action.payload.applicationProfile ?? {},\r\n                assetsPath: action.payload.applicationProfile.assetsPath\r\n            };\r\n            \r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n\r\n            console.debug(\"result\");\r\n            console.debug(\"action.payload.requestId: \",action.payload.requestId); \r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus);\r\n            if (action.payload.referer) {\r\n                action.payload.referer.refresh();\r\n            }\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n           \r\n\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            }; \r\n            setLoginKeyCookie(null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser, \r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","\r\nexport default class AttachmentInfo {\r\n    name:string = \"\";\r\n    data:Blob = new Blob();\r\n    dataUrl:string = \"\";\r\n}","\r\nimport { commonAuthorizedHeader, commonHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nimport AttachmentInfo from '../models/common/AttachmentInfo';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}\r\n\r\n\r\nexport const commonAjaxPublicPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                \r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\nexport const commonAjaxPostCallsWithBlob = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<AttachmentInfo>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            responseType: 'blob' ,\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                \r\n                const response: any = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                let contentDisposition = axiosResponse.headers[\"content-disposition\"];\r\n                let fileName = contentDisposition.split(\"filename=\")[1];\r\n                let rawSplit = fileName.split(\".\");\r\n                let extension = rawSplit[rawSplit.length - 1];\r\n                let blob = new Blob([response], { type: extension });\r\n                let url = window.URL.createObjectURL(blob);\r\n                // let a = document.createElement(\"a\");\r\n\r\n                // document.body.appendChild(a);\r\n\r\n                // a.href = url;\r\n                // a.style.display = 'none';\r\n                // a.download = fileName;\r\n                // a.click();\r\n\r\n                // window.URL.revokeObjectURL(url);\r\n                const attachmentInfo:AttachmentInfo = new AttachmentInfo();\r\n                attachmentInfo.name = fileName;\r\n                attachmentInfo.data = blob;\r\n                attachmentInfo.dataUrl = url;\r\n                resolve(attachmentInfo);\r\n                \r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","\r\nimport User from './../models/User';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPublicPostCalls } from './Promises';\r\nimport { updateAccessToken } from '../middlewares/Common';\r\nimport WebResponse from '../models/common/WebResponse';\r\nexport default class UserService {\r\n    private static instance?: UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user: User) => {\r\n\r\n        const request: WebRequest = {\r\n            user: user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    requestApplicationId = (callbackSuccess: (response: WebResponse) => any, callbackError: () => any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            const response = data.rawAxiosResponse;\r\n            updateAccessToken(response);\r\n            console.debug(\"response header:\", response.headers['access-token']);\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            console.error(\"ERROR requestApplicationId: \", e);\r\n            callbackError();\r\n        })\r\n\r\n    }\r\n    requestApplicationIdNoAuth = (callbackSuccess: (response: WebResponse) => any, callbackError: () => any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPublicPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            callbackError();\r\n            console.error(\"ERROR requestApplicationIdNoAuth: \", e);\r\n            //   alert(\"Error Occured, please reload OR try again\");\r\n        })\r\n\r\n    }\r\n\r\n}","\r\nimport Filter from '../models/common/Filter';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPostCallsWithBlob } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile'; \r\n\r\nexport default class MasterDataService {\r\n  \r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map(); \r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    getProductByCode = (code: string) => {\r\n        return this.getByKey('product', 'code', code);\r\n    }\r\n    getProductsByName = (name:string) => {\r\n        return this.getRecordsByKeyLike(\"product\", \"name\", name);\r\n    }\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadHealthCenters = () => {\r\n        const request: WebRequest = {\r\n            entity: 'healthcenter', filter: { orderBy: 'name', orderType: 'asc' }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    loadEntities(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getByKey(entity: string, key: string, value: any) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getRecordsByKeyLike(entity: string, key: string, value: any) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                // exacts: true,\r\n                limit: 10,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getById(entity: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n   \r\n\r\n    generateReport(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/report/records\");\r\n        return commonAjaxPostCallsWithBlob(endpoint, request);\r\n\r\n    }\r\n}","\r\nexport default class ReportService {\r\n\r\n    private static instance?: ReportService;\r\n\r\n    static getInstance(): ReportService {\r\n        if (this.instance == null) {\r\n            this.instance = new ReportService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n}"," \r\nimport Services from './../services/Services'; \r\n\r\nexport const initState: { services: Services } = {\r\n    services: new Services()\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default reducer;","\r\nimport UserService from './UserService';\r\nimport MasterDataService from './MasterDataService'; \r\nimport ReportService from './ReportService';\r\nexport default class Services {\r\n    userService: UserService = UserService.getInstance();\r\n    masterDataService: MasterDataService = MasterDataService.getInstance(); \r\n    reportService: ReportService = ReportService.getInstance();\r\n}","import * as shopReducer from \"./appReducer\"\r\nimport * as userReducer from \"./userReducer\" \r\nimport  * as servicesReducers from './servicesReducer';\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        appState: shopReducer.reducer,\r\n        userState: userReducer.reducer, \r\n        servicesState: servicesReducers.reducer\r\n    }\r\n);\r\n\r\nexport const initialState:any = {\r\n    appState: shopReducer.initState,\r\n    userState: userReducer.initState, \r\n    servicesState: servicesReducers.initState\r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(response => {\r\n        const responseJson = response.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = response.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        common.updateAccessToken(response);\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n \r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers' \r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware' \r\n\r\nlet store = null;\r\nexport const getStore = () => {\r\n    return store;\r\n}\r\nexport const configureStore = () => {\r\n    store = createStore(\r\n        rootReducer, initialState,\r\n        applyMiddleware(   \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware,  \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n \r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n   \r\n\r\nexport default configureStore;","import {  getStore } from '../redux/configureStore';\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\nexport const commonHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(), \r\n    }\r\n};\r\n\r\nconst LOGIN_KEY:string = \"medical-inventory-login-key\";\r\n \r\nexport const getAssetsPath = () :string => {\r\n    const store = getStore(); \r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.assetsPath;\r\n}\r\n\r\nexport const getRequestId = () :string => {\r\n    const store = getStore();\r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.requestId;\r\n}\r\nexport const getLoginKey = () => {\r\n    return getCookie(LOGIN_KEY);\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(LOGIN_KEY, accessToken);\r\n    }\r\n}\r\nexport const setLoginKeyCookie = (cookieValue:any) => {\r\n    setCookie(LOGIN_KEY, cookieValue);\r\n}\r\nexport const setCookie = function (cname, cvalue, exdays=1) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","import { getAssetsPath } from \"../middlewares/Common\";\r\n\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value+\"/\";\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl() = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl() = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl() = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = () => { return getAssetsPath()+ \"images/\"}; \r\n// export const baseImageUrl() = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url'; \r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile'; \r\nimport WebResponse from '../models/common/WebResponse';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/app/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"    \r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n} \r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n    \r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: user },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n \r\nexport const  setMainApp = (mainApp:any) => ({\r\n    type: types.SET_MAIN_APP,\r\n    payload: mainApp,\r\n    meta: { type: types.SET_MAIN_APP }\r\n})\r\n  \r\nexport const setRequestId = (data:WebResponse, app) => {\r\n   \r\n    const ret= {\r\n        type: types.SET_REQUEST_ID,\r\n        payload: { loginStatus: data.loggedIn, referer:app, ...data },\r\n        meta: {\r\n            type: types.SET_REQUEST_ID, \r\n        }\r\n    };\r\n    console.debug(\"setRequestId: \", ret);\r\n    return ret;\r\n}\r\n\r\n","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile, \r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId, \r\n        services: state.servicesState.services,\r\n\r\n        //app\r\n        mainApp: state.appState.mainApp,\r\n        inventoryData: state.appState.inventoryData,\r\n        inventoryConfig: state.appState.inventoryConfig,\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n\r\n        if (this.props.realtime == true) {\r\n            return <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props) {\r\n    if (props.realtime) {\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span style={{marginBottom:'3px'}} className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div className=\"bg-primary\" style={{\r\n                        width: props.progress + \"%\",\r\n                        transitionDuration: '50ms',\r\n                        margin: 0,\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\n\r\nclass Alert extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n\r\n        this.onYes = (e) => {\r\n             \r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        }\r\n        this.onNo = (e) => {\r\n            \r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        }\r\n        this.onClose = (e) => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        } else if (isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger':'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop />\r\n                <div className=\"modal fade show\" style={{ display: 'block' }} id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\"> {this.props.children}</div>\r\n                            <Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{backgroundColor: 'rgba(100,100,100,0.7)'}} ></div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \"+props.className}>\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\">Yes</button>\r\n            {props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                onClick={props.onNo} className=\"btn btn-outline-secondary\">No</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \"+props.className}>\r\n        <h5 className={\"modal-title \"+props.fontClassName }id=\"exampleModalCenterTitle\">{props.title}</h5>\r\n        <button onClick={props.onClose} type=\"button\" className=\"close\">\r\n            <span aria-hidden=\"true\" className={props.fontClassName}><i className=\"fas fa-times\"/></span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","import { Component } from 'react';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\nimport Services from './../services/Services';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    constructor(props: any, authenticated = false) {\r\n        super(props);\r\n\r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n        this.parentApp = this.props.mainApp;\r\n\r\n    }\r\n\r\n    setPageTitle = (title: string) => {\r\n        document.title = title;\r\n    }\r\n    validateLoginStatus = (callback?: () => void) => {\r\n        if (this.authenticated == false) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            return;\r\n        }\r\n        if (this.isLoggedUserNull()) {\r\n            this.backToLogin();\r\n        } else {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n\r\n    getApplicationProfile(): ApplicationProfile {\r\n        const profile: ApplicationProfile = new ApplicationProfile();\r\n        profile.name = \"SVG generator\";\r\n        return profile;\r\n        // return this.props.applicationProfile == null ? new ApplicationProfile() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange = (event: any) => {\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax(method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any) {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response: WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally((e: any) => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    commonAjax(method: Function, successCallback: Function, errorCallback: Function, ...params: any) {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress(method: Function, successCallback: Function, errorCallback: Function, ...params: any) {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser(): User | undefined {\r\n        const user: User | undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.password = \"^_^\";\r\n        return user;\r\n    }\r\n    isLoggedUserNull(): boolean {\r\n        return false == this.props.loginStatus || null == this.props.loggedUser;\r\n    }\r\n    isUserLoggedIn(): boolean {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation(body: any): Promise<boolean> {\r\n        const app = this;\r\n        return new Promise(function (resolve, reject) {\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Konfirmasi\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showConfirmationDanger(body: any): Promise<any> {\r\n        const app = this;\r\n        return new Promise(function (resolve, reject) {\r\n            const onYes = function (e) {\r\n                resolve(true);\r\n            }\r\n            const onNo = function (e) {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Konfirmasi\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo(body: any) {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError(body: any) {\r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (!this.authenticated || this.props.history == null) {\r\n            return;\r\n        }\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e: any) => {\r\n        console.error(e);\r\n\r\n        let message;\r\n        if (e.response && e.response.data) {\r\n            message = e.response.data.message;\r\n        } else {\r\n            message = e;\r\n        }\r\n        this.showError(\"Operation Failed: \" + message);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isLoggedUserNull()) {\r\n            console.debug(typeof this, \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n\r\n    getServices = (): Services => {\r\n        return this.props.services;\r\n    }\r\n}","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nimport User from './../../models/User';\r\nimport { baseImageUrl } from './../../constant/Url'; \r\nimport Menu from '../../models/common/Menu';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    buttonToggleNavRef: React.RefObject<HTMLButtonElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (this.state.showNavLinks && this.buttonToggleNavRef.current) {\r\n            this.buttonToggleNavRef.current.click();\r\n        }\r\n        this.props.setMenu(menu);\r\n\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n                    {/* <div className=\"container-fluid\"></div> */}\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    <button ref={this.buttonToggleNavRef} onClick={this.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || (menu.authenticated && !user)) return null;\r\n                                // if (menu.userAuthorized && menu.userAuthorized(user) == false) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <li key={\"header-menu-\" + new String(menu.code)} className={\"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n                                        <Link onClick={() => this.setMenu(menu)} className={\"nav-link  \"}\r\n                                            to={menu.url}><span>{menu.name}</span>\r\n                                        </Link></li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        {/* <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull}\r\n                                onLogout={this.onLogout} user={user} />\r\n                        </form > */}\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <header id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </header>\r\n    );\r\n}\r\nconst UserIcon = (props: { user: User | undefined, setMenuNull(): any, onLogout(e): any }) => {\r\n    if (props.user) {\r\n        return (\r\n            <Fragment>\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'>\r\n                    <img width=\"20\" src={baseImageUrl() + props.user.profileImage} className=\"rounded rounded-circle\" />\r\n                        &nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{ marginRight: '5px' }} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link style={{ marginRight: '5px' }} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n            to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\ninterface Props {\r\n    onClick?:(e?:any)=>any; \r\n    show?:boolean,\r\n    className?:string,\r\n    style?:any,\r\n    iconClassName?:string,\r\n    to?:string,\r\n    attributes?:any\r\n}\r\nexport default class AnchorWithIcon extends Component<Props, any>\r\n{\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className ?? \"btn btn-outline-secondary\";\r\n        if (this.props.to) {\r\n            return <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: this.props.children?'5px':'0px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </Link>\r\n        }\r\n        return (\r\n            <a {...this.props.attributes} tyle={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: this.props.children?'5px':'0px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment } from 'react';\r\nimport './Home.css'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass HomeMain extends BaseComponent {\r\n\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n\r\n    render = () => {\r\n\r\n        return (\r\n            <section className=\"container-fluid text-center\" style={{ marginTop: '50px' }}>\r\n                <Welcome />\r\n                <p />\r\n                <AnchorWithIcon className=\"btn btn-success btn-lg\" iconClassName=\"fas fa-play\" to={\"/creator\"} >Start</AnchorWithIcon>\r\n                <span style={{ margin: 3 }} />\r\n                <a href=\"https://github.com/fajaralmu/svg-creator\" target=\"_blank\" className=\"btn btn-dark btn-lg\"  >\r\n                    <span style={{ marginRight: '5px' }}><i className=\"fas fa-code\" /></span>\r\n                   Source\r\n                </a>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst Welcome = (props) => {\r\n    return (\r\n        <Fragment>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"150\">\r\n                <g className=\"welcome-svg-rect\" stroke=\"#343a40\" fill=\"transparent\" stroke-width=\"4\">\r\n                    <rect x=\"28.25\" y=\"19.26666259765625\" width=\"339\" height=\"120\" /></g>\r\n                <g className=\"welcome-svg\" stroke=\"black\" fill=\"transparent\" stroke-width=\"4\">\r\n                    <path stroke=\"#28a745\" d=\"M 142.8333282470703 39.93333435058594 Q 103.83332824707031 24.933334350585938 92.83332824707031 53.93333435058594\" /><path stroke=\"#28a745\" d=\"M 92.83332824707031 53.93333435058594 Q 91.83332824707031 77.93333435058594 126.83332824707031 88.93333435058594\" />\r\n                    <path stroke=\"#28a745\" d=\"M 126.83332824707031 88.93333435058594 Q 132.8333282470703 100 119.83332824707031 103\" />\r\n                    <path stroke=\"#28a745\" d=\"M 119.83332824707031 103 Q 117 106 95.25 98.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 92.25 112.66667175292969 Q 133.25 130.6666717529297 147.25 98.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 147.25 98.66667175292969 Q 149.25 80.66667175292969 127.25 69.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 127.25 69.66667175292969 Q 108.25 62.66667175292969 115.25 52.66667175292969\" /><path stroke=\"#28a745\" d=\"M 115.25 52.66667175292969 Q 126.25 46.66667175292969 139.25 54.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 139.25 54.66667175292969 L 139.25 54.66667175292969 L 142.8333282470703 39.93333435058594 \" />\r\n                    <path stroke=\"#28a745\" d=\"M 299.25 38.66667175292969 Q 245.25 26.666671752929688 233.25 67.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 233.25 67.66667175292969 Q 226.25 105.66667175292969 263.25 117.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 263.25 117.66667175292969 Q 286.25 120.66667175292969 303.25 112.66667175292969\" /><path stroke=\"#28a745\" d=\"M 303.25 112.66667175292969 L 303.25 112.66667175292969 L 303.25 70.66667175292969 L 271.25 70.66667175292969 L 271.25 84.66667175292969 L 285.25 84.66667175292969 L 285.25 100.66667175292969 \" />\r\n                    <path stroke=\"#28a745\" d=\"M 285.25 100.66667175292969 Q 263.25 106.66667175292969 252.25 88.66667175292969\" /><path stroke=\"#28a745\" d=\"M 252.25 88.66667175292969 Q 245.25 61.66667175292969 267.25 52.66667175292969\" /><path stroke=\"#28a745\" d=\"M 267.25 52.66667175292969 Q 281.25 48.66667175292969 294.25 54.66667175292969\" />\r\n                    <path stroke=\"#28a745\" d=\"M 294.25 54.66667175292969 L 294.25 54.66667175292969 L 299.25 38.66667175292969 \" />\r\n                    <path id=\"V\" stroke=\"#28a745\" d=\"M 92.25 112.66667175292969 L 92.25 112.66667175292969 L 95.25 98.66667175292969 \" />\r\n                </g>\r\n                <g className=\"welcome-svg-v\" stroke=\"#343a40\" fill=\"transparent\" stroke-width=\"4\">\r\n                    <path d=\"M 152.25 36.66667175292969 L 152.25 36.66667175292969 L 177.25 115.66667175292969 L 199.25 115.66667175292969 L 227.25 37.66667175292969 L 207.25 37.66667175292969 L 189.25 94.66667175292969 L 173.25 36.66667175292969 Z\" />\r\n                </g>\r\n            </svg>\r\n            <p />\r\n            <PenSvg />\r\n        </Fragment>\r\n    )\r\n}\r\n \r\nconst Icon = (props) => {\r\n    return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"400\"><g   className=\"welcome-svg \"stroke=\"black\" fill=\"transparent\" stroke-width=\"2\"> <path stroke-width=\"2\" stroke=\"#20f08d\" d=\"\" /><path stroke-width=\"5\" stroke=\"#ff0080\" d=\"M 238 3 Q 262 40 235 69Q 214 91 194 111Q 158 140 172 175Q 185 196 201 219Q 168 193 152 163Q 135 137 169 111Q 200 89 220 68Q 237 50 241 35 Z \"/><path stroke-width=\"5\" stroke=\"#ff0080\" d=\"M 286 83 Q 252 99 233 122Q 211 146 240 179Q 251 205 212 232Q 236 199 214 185Q 187 152 209 126Q 230 106 258 92 Z \"/><path stroke-width=\"5\" stroke=\"#004000\" d=\"M 285 234 Q 162 250 117 240Q 105 238 126 228Q 138 224 155 219Q 99 224 85 240Q 83 249 132 254Q 194 258 263 244 Z \"/><path stroke-width=\"5\" stroke=\"#004000\" d=\"M 251 274 Q 185 286 132 275Q 132 270 138 264Q 96 280 133 290Q 192 302 266 283 Z \"/><path stroke-width=\"5\" stroke=\"#004000\" d=\"M 240 316 Q 192 333 143 316Q 142 311 147 309Q 119 316 133 330Q 185 351 260 328 Z \"/><path stroke-width=\"5\" stroke=\"#004000\" d=\"M 318 339 Q 335 362 213 367Q 135 369 77 354Q 82 340 115 337Q 22 352 69 369Q 192 394 314 362Q 325 356 326 347 Z \"/><path stroke-width=\"5\" stroke=\"#004000\" d=\"M 339 365 Q 316 385 281 388Q 258 393 215 393Q 201 394 178 393Q 142 394 105 385\"/><path stroke-width=\"5\" stroke=\"#004000\" d=\"M 289 223 Q 333 215 327 250Q 324 272 283 293Q 335 276 344 243Q 339 220 310 215 Z \"/></g></svg>\r\n}\r\n\r\nconst PenSvg = (props) => { \r\n    // return <Icon/>\r\n    return (\r\n        <svg  xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"100\">\r\n            <g id=\"pen-body\" className=\"welcome-svg \"stroke=\"#343a40\" fill=\"transparent\" stroke-width=\"2\">\r\n\r\n                <path stroke-width=\"4\" d=\"M 372.25 47.26666259765625 L 372.25 47.26666259765625 L 73.41667175292969 47.26666259765625 L 103.41667175292969 33.76666259765625 L 108.41667175292969 40.76666259765625 L 108.41667175292969 52.76666259765625 L 102.41667175292969 60.76666259765625 L 79.41667175292969 51.76666259765625 \" />\r\n                <path stroke=\"#28a745\" d=\"M 177.4166717529297 30.76666259765625 L 177.4166717529297 30.76666259765625 L 177.4166717529297 61.76666259765625 L 363.8999938964844 58.46665954589844 L 372.25 47.26666259765625 L 364.4166717529297 35.76666259765625 Z\" /><path stroke=\"#28a745\" d=\"M 177.4166717529297 30.76666259765625 Q 149.4166717529297 36.76666259765625 128.4166717529297 29.76666259765625\" />\r\n                <path stroke=\"#28a745\" d=\"M 177.4166717529297 61.76666259765625 Q 149.4166717529297 55.76666259765625 127.41667175292969 62.76666259765625\" />\r\n                <path stroke=\"#28a745\" d=\"M 128.4166717529297 29.76666259765625 L 128.4166717529297 29.76666259765625 L 114.41667175292969 36.76666259765625 L 114.41667175292969 54.76666259765625 L 127.41667175292969 62.76666259765625 Z\" />\r\n            </g>\r\n            <g id=\"line\" className=\"welcome-svg-slow \" stroke=\"#343a40\" fill=\"transparent\" stroke-width=\"4\">\r\n                <path d=\"M 14.66668701171875 53.600006103515625 Q 7.66668701171875 17.600006103515625 40.66668701171875 18.600006103515625\" />\r\n                <path d=\"M 40.66668701171875 18.600006103515625 Q 53 20 49.66668701171875 47.600006103515625\" />\r\n                <path d=\"M 49.66668701171875 47.600006103515625 Q 47.66668701171875 64.60000610351562 67.66668701171875 62.600006103515625\" />\r\n                <path d=\"M 67.66668701171875 62.600006103515625 Q 81.66668701171875 64.60000610351562 73.41667175292969 47.26666259765625\" />\r\n\r\n            </g>\r\n        </svg>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(HomeMain))\r\n","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport const greeting = (): string => {\r\n\r\n\tlet hour = new Date().getHours();\r\n\tlet time: string = \"Datang\";\r\n\tif (hour >= 3 && hour < 11) {\r\n\t\ttime = \"Pagi\";\r\n\t} else if (hour >= 11 && hour < 15) {\r\n\t\ttime = \"Siang\";\r\n\t} else if (hour >= 15 && hour < 18) {\r\n\t\ttime = \"Sore\";\r\n\t} else {\r\n\t\ttime = \"Malam\";\r\n\t}\r\n\r\n\treturn \"Selamat \"+time;\r\n\r\n}\r\n\r\nexport function beautifyNominal(val: any) {\r\n\tif (val == \"\" || val == null) return \"0\";\r\n\tconst isDecimal: boolean = new String(val).includes(\".\");\r\n\tconst isNegative: boolean = new String(val).startsWith(\"-\");\r\n\tif (isNegative) {\r\n\t\tval = new String(val).replace(\"-\", \"\");\r\n\t}\r\n\tconst rawVal = isDecimal ? parseInt(new String(val).split(\".\")[0]) : parseInt(val);\r\n\tlet nominal = Math.abs(rawVal).toString();\r\n\tlet result = \"\";\r\n\tif (nominal.length > 3) {\r\n\t\tlet zeroIndex: number = 0;\r\n\t\tfor (let i = nominal.length - 1; i > 0; i--) {\r\n\t\t\tzeroIndex++;\r\n\t\t\tresult = nominal[i] + result;\r\n\t\t\tif (zeroIndex == 3) {\r\n\t\t\t\tresult = \".\" + result;\r\n\t\t\t\tzeroIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tresult = nominal[0] + result;\r\n\t} else {\r\n\t\tresult = val;\r\n\t}\r\n\tif (rawVal < 0) {\r\n\t\treturn rawVal;\r\n\t}\r\n\tif (isDecimal) {\r\n\t\tresult += \",\" + new String(val).split(\".\")[1];\r\n\t}\r\n\tif (isNegative) {\r\n\t\tresult = \"-\" + result;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const getMaxSales = (list) => {\r\n\tlet result = 0;\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tconst element = list[i];\r\n\t\tif (element.sales > result)\r\n\t\t\tresult = element.sales;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport const isNonNullArray = function (array) {\r\n\treturn array != null && array.length > 0;\r\n}\r\n\r\nexport const isNonNullArrayWithIndex = function (array, i) {\r\n\treturn array != null && array.length > 0 && array[i] != null;\r\n}\r\n\r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String: string): number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3)) * 0.5624896334383812;\r\n\tvar sizeInKb = sizeInBytes / 1000;\r\n\treturn sizeInBytes;\r\n}\r\n\r\nexport const fileExtension = (fileName: string): string => {\r\n\tif (fileName.includes(\".\") == false) {\r\n\t\treturn \"*\";\r\n\t}\r\n\r\n\tconst splitted = fileName.split(\".\");\r\n\treturn splitted[splitted.length - 1];\r\n}","import { base64StringFileSize } from './StringUtil';\r\nimport { ChangeEvent } from 'react';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\nexport const getHtmlInputElement = (e:ChangeEvent) : HTMLInputElement => {\r\n    const target = e.target as HTMLInputElement;\r\n    return target;\r\n}\r\n\r\nexport function toBase64v2(fileInput) {\r\n    return new Promise<string>(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(new String(reader.result).toString()); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class FormGroup extends Component<any, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div style={this.props.style} className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport AnchorButton from './AnchorButton';\r\ninterface Props {\r\n    onClick(val:boolean):void,\r\n    active:boolean,\r\n    yesLabel?:string,\r\n    noLabel?:string\r\n}\r\nexport default class ToggleButton extends Component<Props, any>{\r\n    \r\n    render() {\r\n        const props = this.props;\r\n        const active = this.props.active;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton className={\"btn  btn-sm \" + (active ? \"btn-dark\" : \"btn-outline-dark\")} onClick={(e) => this.props.onClick(true)} >\r\n                    {props.yesLabel??\"Yes\"}</AnchorButton>\r\n                <AnchorButton className={\"btn  btn-sm \" + (active == false ? \"btn-dark\" : \"btn-outline-dark\")} onClick={(e) => this.props.onClick(false)}  >\r\n                    {props.noLabel??\"No\"}</AnchorButton>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","import SvgItem from \"./SvgItem\";\r\nimport { uniqueId } from './../../utils/StringUtil';\r\n\r\nexport default class BaseElement {\r\n    id:string = uniqueId();\r\n    x:number = 0; y: number = 0;\r\n    strokeColor:string = \"#000\";\r\n    strokeWidth:number = 2;\r\n    fillColor:string = \"none\";\r\n\r\n    init = (ref:SvgItem) => {\r\n        this.fillColor = ref.fillColor;\r\n        this.strokeColor = ref.strokeColor;\r\n        this.strokeWidth = ref.strokeWidth;\r\n    }\r\n\r\n    html = (strokeColor?:string) => {\r\n        return '<g></g>';\r\n    }\r\n\r\n    protected baseProperties = (): string => {\r\n        return ` fill=\"`+this.fillColor+`\" stroke-width=\"`+this.strokeWidth+`\" stroke=\"` + this.strokeColor + `\" `;\r\n    }\r\n}","\r\nimport BaseElement from './BaseElement';\r\nexport default class SvgPoint extends BaseElement {\r\n\r\n    updatePosition = (e: React.MouseEvent<SVGRectElement>) => { \r\n        const target = e.target as SVGRectElement;\r\n        var dim = target.getBoundingClientRect();\r\n\r\n        this.x = parseInt((e.clientX - dim.left).toFixed(2));\r\n        this.y = parseInt((e.clientY - dim.top).toFixed(2));\r\n    }\r\n    public static newInstanceFromReference = (refPoint: SvgPoint): SvgPoint => {\r\n        const p = new SvgPoint();\r\n        p.x = refPoint.x;\r\n        p.y = refPoint.y;\r\n        return p;\r\n    }\r\n    /**\r\n     * make straight LINE\r\n     * @param e \r\n     * @param target \r\n     * @param prevPoint \r\n     */\r\n    public static newStraightLineInstance = (e: React.MouseEvent<SVGRectElement>, prevPoint: SvgPoint): SvgPoint => {\r\n        var dim = (e.target as SVGRectElement).getBoundingClientRect();\r\n        const p = new SvgPoint();\r\n\r\n        p.x = e.clientX - dim.left;\r\n        p.y = e.clientY - dim.top;;\r\n        const absX = Math.abs(prevPoint.x - p.x);\r\n        const abxY = Math.abs(prevPoint.y - p.y);\r\n        if (absX < abxY) {\r\n            p.x = prevPoint.x;\r\n        } else {\r\n            p.y = prevPoint.y;\r\n        }\r\n        return p;\r\n    }\r\n    public static newInstanceFromEvent = (e: React.MouseEvent<any>): SvgPoint => {\r\n         const p = new SvgPoint();\r\n        p.updatePosition(e); \r\n        return p;\r\n    }\r\n}","\r\nimport BaseElement from './BaseElement';\r\nimport SvgItem from './SvgItem';\r\nimport SvgPoint from './SvgPoint';\r\n\r\nexport default class Rect extends BaseElement {\r\n    \r\n    width:number = 0;\r\n    height:number = 0;\r\n\r\n    html = ( )=> {\r\n        const r=  this;\r\n        return `<rect  `+this.baseProperties()+`   x=\"` + r.x + `\" y=\"` + r.y + `\" width=\"` + r.width + `\" height=\"` + r.height + `\"  />`;\r\n\r\n    }\r\n\r\n    public static newInstance = (ref:SvgItem, start:SvgPoint, end:SvgPoint) :Rect => {\r\n        const r = new Rect();\r\n        r.init(ref);\r\n        r.x = start.x;\r\n        r.y = start.y;\r\n        r.width = end.x - start.x;\r\n        r.height = end.y - start.y;\r\n        return r;\r\n    }\r\n\r\n    public static  getBoundingRect = (xMin:number, xMax:number, yMin:number, yMax:number):Rect => {\r\n        \r\n        const r = new Rect();\r\n        r.x = xMin;\r\n        r.y = yMin;\r\n        r.width = xMax - xMin;\r\n        r.height = yMax - yMin;\r\n        r.strokeColor = '#ccc';\r\n        r.strokeWidth = 1;\r\n        return r;\r\n    }\r\n}","\r\nimport BaseElement from './BaseElement';\r\nimport SvgItem from './SvgItem';\r\nimport SvgPoint from './SvgPoint';\r\nexport default class Circle extends BaseElement {\r\n    r: number = 0;\r\n\r\n\r\n    calculateRadius = (point1: SvgPoint, point2: SvgPoint) => {\r\n        const radiusX: number = point2.x - point1.x;\r\n        const radiusY: number = point2.y - point1.y;\r\n        const radius = Math.sqrt(Math.pow(radiusX, 2) + Math.pow(radiusY, 2));\r\n        this.r = radius;\r\n    }\r\n\r\n    html = () => {\r\n        const c = this;\r\n        return `<circle  `+this.baseProperties()+`   cx=\"` + c.x + `\" cy=\"` + c.y + `\" r=\"` + c.r + `\"  />`;\r\n    }\r\n\r\n    public static newInstance = (ref:SvgItem, middlePoint:SvgPoint, radiusPoint:SvgPoint) => {\r\n        const c = new Circle();\r\n        c.init(ref);\r\n        c.x = middlePoint.x;\r\n        c.y = middlePoint.y;\r\n\r\n        c.calculateRadius(middlePoint, radiusPoint);\r\n        return c;\r\n    }\r\n}","export enum ElementType {\r\n    PATH, CURVE, CIRCLE, RECT, ELLIPSE\r\n     \r\n}","\r\nimport BaseElement from './BaseElement';\r\nimport SvgItem from './SvgItem';\r\nimport SvgPoint from './SvgPoint';\r\nexport default class QuadraticCurve extends BaseElement {\r\n    closePath: boolean = false;\r\n    endPoints: SvgPoint[] = [];\r\n    slopePoints: SvgPoint[] = [];\r\n    getPath = (): string => {\r\n        let fullPath = \"M \" + this.x + \" \" + this.y + \" \";\r\n        for (let i = 0; i < this.endPoints.length; i++) {\r\n            try {\r\n                const end = this.endPoints[i];\r\n                const slope = this.slopePoints[i];\r\n                const path = \"Q \" + slope.x + \" \" + slope.y + \" \" + end.x + \" \" + end.y;\r\n                fullPath += path;\r\n            } catch (e) { }\r\n        }\r\n        if (this.closePath) {\r\n            fullPath += \" Z \";\r\n        }\r\n        return fullPath;\r\n    }\r\n    html = () => {\r\n        return `<path  `+this.baseProperties()+`  d=\"` + this.getPath() + `\"/>`;\r\n    }\r\n\r\n    public static newInstance = (ref: SvgItem, ...points: SvgPoint[]): QuadraticCurve => {\r\n        const c = new QuadraticCurve();\r\n        c.init(ref);\r\n        if (!points || points.length == 0) {\r\n            return c;\r\n        }\r\n        const startPoint = points[0];\r\n        c.x = startPoint.x;\r\n        c.y = startPoint.y;\r\n        c.closePath = ref.closePath;\r\n        for (let i = 1; i < points.length; i++) {\r\n            const p = points[i];\r\n            if (i % 2 == 0) {\r\n                c.slopePoints.push(p);\r\n            } else {\r\n                c.endPoints.push(p);\r\n            }\r\n\r\n        }\r\n        return c;\r\n    }\r\n}","\r\nimport BaseElement from './BaseElement';\r\nimport SvgItem from './SvgItem';\r\nimport SvgPoint from './SvgPoint';\r\nexport default class Ellipse extends BaseElement {\r\n    rx: number = 0;\r\n    ry: number = 0;\r\n\r\n\r\n    calculateRadius = (middlePoint: SvgPoint, point2: SvgPoint) : number=> {\r\n        const radiusX: number = point2.x - middlePoint.x;\r\n        const radiusY: number = point2.y - middlePoint.y;\r\n        const radius = Math.sqrt(Math.pow(radiusX, 2) + Math.pow(radiusY, 2));\r\n        return radius;\r\n    }\r\n\r\n    html = () => {\r\n        const c = this;\r\n        return `<ellipse  `+this.baseProperties()+`   cx=\"` + c.x + `\" cy=\"` + c.y + `\" rx=\"` + c.rx + `\"  ry=\"` + c.ry + `\"  />`;\r\n    }\r\n\r\n    public static newInstance = (ref:SvgItem, middle:SvgPoint, radiusXPoint:SvgPoint, radiusYPoint: SvgPoint) => {\r\n        const c = new Ellipse();\r\n        c.init(ref);\r\n        c.x = middle.x;\r\n        c.y = middle.y;\r\n\r\n        c.rx = c.calculateRadius(middle, radiusXPoint);\r\n        c.ry = c.calculateRadius(middle, radiusYPoint);\r\n        return c;\r\n    }\r\n}","\r\nimport BaseElement from './BaseElement';\r\nimport SvgItem from './SvgItem';\r\nimport SvgPoint from './SvgPoint';\r\nexport default class Path extends BaseElement {\r\n \r\n    points: SvgPoint[] = [];\r\n    closePath: boolean = false;\r\n    getPath = () => {\r\n        if (this.points.length < 2) { return \"\" }\r\n\r\n        let firstPoint = this.points[0];\r\n        let path = \"M \" + firstPoint.x + \" \" + firstPoint.y;\r\n        for (let i = 0; i < this.points.length; i++) {\r\n            const point = this.points[i];\r\n            path += \" L \" + point.x + \" \" + point.y + \" \";\r\n        }\r\n        return path + (this.closePath ? \"Z\" : \"\");\r\n    }\r\n\r\n    html = () => {\r\n        return `<path  `+this.baseProperties()+`  d=\"` + this.getPath() + `\" />`;\r\n    }\r\n\r\n    public static newInstance = (ref:SvgItem) => {\r\n        const p = new Path();\r\n        p.init(ref);\r\n        p.closePath = ref.closePath;\r\n        p.points = ref.points;\r\n        return p;\r\n    }\r\n}","import SvgPoint from './SvgPoint';\r\nimport Rect from './Rect';\r\nimport Circle from './Circle';\r\nimport QuadraticCurve from './QuadraticCurve';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\nimport { ElementType } from '../../constant/ElementType';\r\nimport Ellipse from './Ellipse';\r\nimport BaseElement from './BaseElement';\r\nimport Path from './Path';\r\nexport default\r\n    class SvgItem {\r\n    points: SvgPoint[] = [];\r\n    closePath: boolean = false;\r\n    fillColor: string = \"none\";\r\n    strokeColor: string = \"#20f08d\";\r\n    strokeWidth: number = 2;\r\n    type: ElementType = ElementType.PATH;\r\n    id: string = uniqueId();\r\n\r\n    insertAfter = (index: number): boolean => {\r\n        console.debug(\"Insert After: \", index);\r\n        if (this.pointCount() <= index) return false;\r\n        const ref = this.getPointByIndex(index);\r\n        if (!ref) return false;\r\n        if (this.pointCount() == index - 1) {\r\n            this.addPoint(SvgPoint.newInstanceFromReference(ref));\r\n            return true;\r\n        }\r\n        this.points.splice(index + 1, 0, SvgPoint.newInstanceFromReference(ref));\r\n        return true;\r\n    }\r\n    insertBefore = (index: number): boolean => {\r\n        console.debug(\"insertBefore: \", index);\r\n        if (0 == this.pointCount()) return false;\r\n        const ref = this.getPointByIndex(index);\r\n        if (!ref) return false;\r\n        this.points.splice(index, 0, SvgPoint.newInstanceFromReference(ref));\r\n        return true;\r\n    }\r\n\r\n    public setClosePath = (val: boolean): SvgItem => {\r\n        this.closePath = val;\r\n        return this;\r\n    }\r\n    public setStrokeColor = (strokeColor: string): SvgItem => {\r\n        this.strokeColor = strokeColor;\r\n        return this;\r\n    }\r\n\r\n    public getPointByIndex = (index: number): SvgPoint | undefined => {\r\n        try {\r\n            return this.points[index];\r\n        } catch (e) { return undefined; }\r\n    }\r\n\r\n    public addPoint = (p: SvgPoint) => {\r\n        if ((this.type == ElementType.RECT || this.type == ElementType.CIRCLE) && this.pointCount() >= 1) {\r\n            this.points[1] = p;\r\n            return;\r\n        }\r\n        if ((this.type == ElementType.ELLIPSE) && this.pointCount() >= 2) {\r\n            this.points[2] = p;\r\n            return;\r\n        }\r\n\r\n        this.points.push(p);\r\n    }\r\n\r\n    pointCount = () => {\r\n        return this.points.length;\r\n    }\r\n\r\n    public addPointByEvent = (e: React.MouseEvent<SVGRectElement>, straightLine: boolean) => {\r\n        let point: SvgPoint;\r\n\r\n        if ((this.type == ElementType.RECT || this.type == ElementType.CIRCLE) && this.pointCount() >= 1) {\r\n            this.points[1] = SvgPoint.newInstanceFromEvent(e);\r\n            return;\r\n        }\r\n        if ((this.type == ElementType.ELLIPSE) && this.pointCount() >= 2) {\r\n            this.points[2] = SvgPoint.newInstanceFromEvent(e);\r\n            return;\r\n        }\r\n\r\n\r\n        if (straightLine && this.pointCount() > 0) {\r\n            const prevPoint = this.points[this.pointCount() - 1];\r\n            point = SvgPoint.newStraightLineInstance(e, prevPoint);\r\n        } else {\r\n            point = SvgPoint.newInstanceFromEvent(e);\r\n        }\r\n        this.points.push(point);\r\n    }\r\n\r\n    public getCircleElement = (): Circle => {\r\n        if (this.type != ElementType.CIRCLE || this.pointCount() < 2) {\r\n            return new Circle();\r\n        }\r\n        this.adjustPoints1And2();\r\n        let point1 = this.points[0];\r\n        let point2 = this.points[1];\r\n        return Circle.newInstance(this, point1, point2);\r\n    }\r\n\r\n    public getQuadCurveElement = (): QuadraticCurve => {\r\n        if (this.type != ElementType.CURVE || this.pointCount() < 3) {\r\n            return new QuadraticCurve();\r\n        }\r\n        return QuadraticCurve.newInstance(this, ...this.points);\r\n\r\n    }\r\n    public getEllipseElement = (): Ellipse => {\r\n        if (this.type != ElementType.ELLIPSE || this.pointCount() < 3) {\r\n            return new Ellipse();\r\n        }\r\n        let point1 = this.points[0];\r\n        let point2 = this.points[1];\r\n        let point3 = this.points[2];\r\n        return Ellipse.newInstance(this, point1, point2, point3);\r\n\r\n    }\r\n\r\n    public getRectElement = (): Rect => {\r\n        if (this.type != ElementType.RECT || this.pointCount() < 2) {\r\n            return new Rect();\r\n        }\r\n        this.adjustPoints1And2();\r\n        let point1 = this.points[0];\r\n        let point2 = this.points[1];\r\n        return Rect.newInstance(this, point1, point2);\r\n    }\r\n    adjustPoints1And2 = () => {\r\n        let point1 = this.points[0];\r\n        let point2 = this.points[1];\r\n        //swap if negative\r\n        if (point2.x < point1.x) {\r\n            const xTemp = point2.x;\r\n            point2.x = point1.x;\r\n            point1.x = xTemp;\r\n        }\r\n        //swap if negative\r\n        if (point2.y < point1.y) {\r\n            const yTemp = point2.y;\r\n            point2.y = point1.y;\r\n            point1.y = yTemp;\r\n        }\r\n    }\r\n    getPathElement = () => {\r\n        const path = Path.newInstance(this);\r\n        return path;\r\n    }\r\n    getElement = (): BaseElement => {\r\n        if (this.type == ElementType.RECT) {\r\n            return this.getRectElement();\r\n        }\r\n        if (this.type == ElementType.CIRCLE) {\r\n            return this.getCircleElement();\r\n        }\r\n        if (this.type == ElementType.CURVE) {\r\n            return this.getQuadCurveElement();\r\n        }\r\n        if (this.type == ElementType.ELLIPSE) {\r\n            return this.getEllipseElement();\r\n        }\r\n\r\n        return this.getPathElement();\r\n    }\r\n    html = () => {\r\n        const el = this.getElement();\r\n        return el.html();\r\n    }\r\n    getBoundingRect = (): Rect => {\r\n        const xMax = this.getMaxAxis('x');\r\n        const yMax = this.getMaxAxis('y');\r\n        const xMin = this.getMinAxis('x', xMax);\r\n        const yMin = this.getMinAxis('y', yMax);\r\n        return Rect.getBoundingRect(xMin, xMax, yMin, yMax);\r\n    }\r\n    getMaxAxis = (axis: string): number => {\r\n        let value = 0;\r\n        for (let i = 0; i < this.pointCount(); i++) {\r\n            const p = this.points[i];\r\n            if (p[axis] > value) { value = p[axis] }\r\n        }\r\n        return value;\r\n    }\r\n    getMinAxis = (axis: string, max: number): number => {\r\n        let value = max;\r\n        for (let i = 0; i < this.pointCount(); i++) {\r\n            const p = this.points[i];\r\n            if (p[axis] < value) { value = p[axis] }\r\n        }\r\n        return value;\r\n    }\r\n    public static newInstance = (type: ElementType) => {\r\n        const res = new SvgItem();\r\n        res.type = type;\r\n        return res;\r\n    }\r\n\r\n    public static getOutput = (items: SvgItem[], w: number, h: number): string => {\r\n        let svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"` + w + `\" height=\"` + h + `\"><g stroke=\"black\" fill=\"transparent\" stroke-width=\"2\">\r\n        {SVG}</g></svg>`;\r\n        let paths = \"\";\r\n        for (let i = 0; i < items.length; i++) {\r\n            const element = items[i];\r\n            paths += element.html();\r\n        }\r\n        const output = svg.replace(\"{SVG}\", paths);\r\n\r\n        return output;\r\n    }\r\n}\r\n","import React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport { ElementType } from '../../../constant/ElementType';\r\nimport SvgItem from '../../../models/elements/SvgItem';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport AnchorWithSvg from '../../navigation/AnchorWithSvg';\r\n\r\ninterface Props {\r\n    elements: SvgItem[],\r\n    handleInputChange(e: ChangeEvent): any,\r\n    selectedIndex: number,\r\n    width: number, height: number,\r\n    output?: string,\r\n    showOutput(): any,\r\n    pointColor: string,\r\n}\r\nexport default class GeneralForm extends Component<Props, any> {\r\n\r\n\r\n    render() {\r\n        const elements = this.props.elements;\r\n        return (\r\n            <Fragment>\r\n                <hr />\r\n                <h2 className=\"text-center\"><i className=\"fas fa-cog\" style={{marginRight:'5px'}}/>Setting</h2>\r\n                <form className=\"row\" onSubmit={(e) => e.preventDefault()}>\r\n                    <div className=\"col-md-12 text-center\"  ><p /></div>\r\n                    <FormGroup className=\"col-md-6\" label=\"Select Element\">\r\n                        <select name=\"selectedIndex\" value={this.props.selectedIndex} onChange={this.props.handleInputChange} className=\"form-control\">\r\n                            {array(elements.length).map((val, i) => {\r\n                                return <option key={\"select-index-\" + i} value={val}>{val}</option>\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"col-md-6\" label=\"Size\">\r\n                        <div className=\"input-group\">\r\n                            <input className=\"form-control\" disabled value=\"width\" />\r\n                            <input autoComplete=\"off\" type=\"number\" value={this.props.width} onChange={this.props.handleInputChange}\r\n                                name=\"width\" className=\"form-control\" />\r\n                            <input className=\"form-control\" disabled value=\"height\" />\r\n                            <input autoComplete=\"off\" type=\"number\" value={this.props.height} onChange={this.props.handleInputChange}\r\n                                name=\"height\" className=\"form-control\" />\r\n                        </div>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"col-md-6\" label=\"Point Color\">\r\n                        <input autoComplete=\"off\" type=\"color\" value={this.props.pointColor} onChange={this.props.handleInputChange}\r\n                            name=\"pointColor\" className=\"form-control\" />\r\n                    </FormGroup>\r\n                    <div className=\"col-md-12 text-center \" style={{ marginBottom: '20px' }}>\r\n                        <AnchorWithIcon onClick={this.props.showOutput} >Show Output</AnchorWithIcon>\r\n                    </div>\r\n                    <div className=\"col-md-12 \">\r\n                        <div className=\"alert alert-info\"><code>{this.props.output}</code></div>\r\n                    </div>\r\n                </form>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst array = (max: number) => {\r\n    const arr: Array<number> = [];\r\n    for (let i = 0; i < max; i++) {\r\n        arr.push(i);\r\n    }\r\n    return arr;\r\n}","import React from 'react'\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport Rect from './../../../models/elements/Rect';\r\nimport SvgPoint from './../../../models/elements/SvgPoint';\r\nexport const WorksheetRect = (props: {\r\n    size: number,\r\n    onMouseMove(e: React.MouseEvent<SVGRectElement>): any,\r\n    addPoint(e: React.MouseEvent<SVGRectElement>): void\r\n}) => {\r\n    const size = props.size;\r\n    return (\r\n        <rect\r\n            focusable=\"true\" id=\"svg-screen\"\r\n            onMouseMove={props.onMouseMove}\r\n            onClick={props.addPoint}\r\n            //  onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp}onMouseMove={this.onMouseMove}\r\n            fill=\"transparent\" x={0} y={0} width={size} height={size} />\r\n    )\r\n}\r\n\r\nexport const BoundingRect = (props: { rect: Rect }) => {\r\n    const boundingRect = props.rect;\r\n    return (\r\n        <rect x={boundingRect.x} y={boundingRect.y} width={boundingRect.width} height={boundingRect.height}\r\n            fill=\"none\" stroke={boundingRect.strokeColor} strokeWidth={boundingRect.strokeWidth}\r\n        />\r\n    )\r\n}\r\n\r\nexport const PointInfo = (props: { onDelete(): any, point: SvgPoint, dragMode:boolean }) => {\r\n    const p: SvgPoint = props.point;\r\n    return (\r\n        <ul className=\"list-group\" style={{ marginTop: '5px' }}>\r\n            <li className=\"list-group-item bg-info text-light\">Point Info</li>\r\n            <li className=\"list-group-item\">x:{p.x} y:{p.y}</li>\r\n\r\n            <li className=\"list-group-item \">\r\n                <AnchorWithIcon iconClassName=\"fas fa-times\" className=\"btn btn-danger\"\r\n                    onClick={props.onDelete} children=\"Press D\"\r\n                />\r\n            </li>\r\n            <li className=\"list-group-item\">\r\n                Press <span className={props.dragMode?\r\n                \"badge badge-success\":\"badge badge-dark\"}>M</span> to toggle dragging\r\n            </li>\r\n\r\n        </ul>\r\n    )\r\n}\r\n\r\n\r\n","\r\nimport React, { Component } from 'react'; \r\ninterface Props {\r\n    onClick(e:any):any,\r\n    icon:string,\r\n    show?:boolean,\r\n    className?:string,\r\n    style?:any\r\n}\r\nexport default class AnchorWithSvg extends Component<Props, any>\r\n{\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className ?? \"btn btn-outline-secondary\";\r\n        \r\n        return (\r\n            <a   style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                <img style={{ marginRight: this.props.children?'5px':'0px' }} width=\"24\" src={\"resources/assets/svg/\"+this.props.icon+\".svg\"} />\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport SvgItem from '../../../models/elements/SvgItem';\r\nimport SvgPoint from './../../../models/elements/SvgPoint';\r\ninterface Props {\r\n    active: boolean, activeIndex?: number, pointColor: string,\r\n    onClick(elementId: string, index: number): any,\r\n    element: SvgItem,\r\n    removePoint?(index: number): any,\r\n    movePoint?(index: number): any,\r\n    insertAfter?(index: number): any,\r\n    insertBefore?(index: number): any,\r\n    svgWidth: number, svgHeight: number\r\n}\r\nclass State {\r\n    selectedIndex?: number;\r\n    contextMenu: boolean = false;\r\n}\r\nexport default class Points extends Component<Props, State> {\r\n\r\n    state: State = new State();\r\n    onContextMenu = (e: React.MouseEvent<SVGCircleElement>, index: number) => {\r\n        e.preventDefault();\r\n\r\n        this.setState({ contextMenu: true, selectedIndex: index });\r\n    }\r\n    getSelectedPoint = (): SvgPoint | undefined => {\r\n        console.debug(\"this.state.selectedIndex: \", this.state.selectedIndex);\r\n        if (this.state.selectedIndex == undefined) return undefined;\r\n        try {\r\n\r\n            return this.props.element.points[this.state.selectedIndex];\r\n        } catch (error) {\r\n            return undefined;\r\n        }\r\n    }\r\n    closeContextMenu = () => {\r\n        this.setState({ contextMenu: false });\r\n    }\r\n    removePoint = () => {\r\n        if (undefined !== this.state.selectedIndex && this.props.removePoint)\r\n            this.props.removePoint(this.state.selectedIndex);\r\n        this.closeContextMenu();\r\n    }\r\n    movePoint = () => {\r\n        if (undefined !== this.state.selectedIndex && this.props.movePoint)\r\n            this.props.movePoint(this.state.selectedIndex);\r\n        this.closeContextMenu();\r\n    }\r\n    insertBefore = () => {\r\n        if (undefined !== this.state.selectedIndex && this.props.insertBefore)\r\n            this.props.insertBefore(this.state.selectedIndex);\r\n        this.closeContextMenu();\r\n    }\r\n    insertAfter = () => {\r\n        if (undefined !== this.state.selectedIndex && this.props.insertAfter)\r\n            this.props.insertAfter(this.state.selectedIndex);\r\n        this.closeContextMenu();\r\n    }\r\n    render() {\r\n        const props = this.props;\r\n        const contextMenu = this.state.contextMenu;\r\n        const selectedPoint = this.getSelectedPoint();\r\n        return (\r\n            <g fill={props.pointColor} strokeWidth={1} className=\"svg-points\">\r\n                {props.element.points.map((p, i) => {\r\n                    const activeIndex = props.activeIndex == i;\r\n                    const strokeColor = activeIndex ? 'rgb(100,255,100)' : props.active ? 'rgb(0,0,0)' : '#fff';\r\n                    const strokeWidth = i == 0 ? 1 : 1;\r\n                    return (\r\n                        <g stroke={strokeColor} key={\"point-\" + p.id}>\r\n                            <circle onContextMenu={(e) => this.onContextMenu(e, i)} strokeWidth={strokeWidth} className=\"svg-point\" onClick={(e) => {\r\n                                e.preventDefault();\r\n                                props.onClick(props.element.id, i);\r\n                            }} cx={p.x} cy={p.y} r={3} />\r\n\r\n                        </g>\r\n                    )\r\n                })\r\n                }\r\n                {props.active && contextMenu && selectedPoint ?\r\n                    <ContextMenu point={selectedPoint}\r\n                        insertAfter={this.insertAfter}\r\n                        insertBefore={this.insertBefore}\r\n                        movePoint={this.movePoint}\r\n                        removePoint={this.removePoint}\r\n                        closeMenu={this.closeContextMenu}\r\n                        svgWidth={props.svgWidth}\r\n                        svgHeight={props.svgHeight}\r\n                    />\r\n                    : null\r\n                }\r\n            </g>\r\n        )\r\n    }\r\n}\r\ninterface ContextMenuProps {\r\n    point: SvgPoint, closeMenu(): any,\r\n    insertBefore(): any, insertAfter(): any,\r\n    movePoint(): any, removePoint(): any,\r\n    svgWidth: number, svgHeight: number\r\n}\r\nclass ContextMenu extends Component<ContextMenuProps, any> {\r\n    menuHeight = 120;\r\n    menuWidth = 55;\r\n    calculatePosY = (): number => {\r\n        const p = this.props.point;\r\n        if (this.exceedMaxHeight()) {\r\n            return p.y - this.menuHeight;\r\n        }\r\n        return p.y;\r\n    }\r\n    exceedMaxHeight = () => {\r\n        return this.props.point.y + this.menuHeight > this.props.svgHeight;\r\n    }\r\n    render = () => {\r\n        const props = this.props;\r\n        const p = props.point;\r\n        const x = p.x - 25;\r\n        const y = this.calculatePosY();\r\n        const style = { padding: 1, margin: 0, cursor: 'pointer', fontSize: 9 }\r\n        return (\r\n            <g>\r\n                <rect rx={5} ry={5} stroke=\"#343a40\" x={x} y={y} width={this.menuWidth} height={this.menuHeight} fill=\"#fff\" />\r\n\r\n                <foreignObject x={x} y={y - 5} width={this.menuWidth} height={this.menuHeight}>\r\n                    <a className=\"text-info\" style={style} onClick={props.movePoint} >Move</a>\r\n                    <br />\r\n                    <a className=\"text-info\" style={style} onClick={props.insertBefore} >+ Before</a>\r\n                    <br />\r\n                    <a className=\"text-info\" style={style} onClick={props.insertAfter} >+ After</a>\r\n                    <br />\r\n                    <a className=\"text-danger\" style={style} onClick={props.removePoint} >Remove</a>\r\n                    <br />\r\n                    <a className=\"text-dark\" style={style} onClick={props.closeMenu} >Close</a>\r\n                </foreignObject>\r\n            </g>\r\n        )\r\n    }\r\n}","import React, { ChangeEvent } from 'react'\r\nimport Modal from '../../container/Modal';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport './SvgCreator.css'\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\nimport SvgItem from '../../../models/elements/SvgItem';\r\nimport SvgPoint from '../../../models/elements/SvgPoint';\r\nimport GeneralForm from './SettingForm';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { BoundingRect, PointInfo, WorksheetRect } from './creatorHelper';\r\nimport { ElementType } from '../../../constant/ElementType';\r\nimport AnchorWithSvg from './../../navigation/AnchorWithSvg';\r\nimport Points from './Points';\r\n\r\nclass State {\r\n    svgElements: SvgItem[] = [new SvgItem()];\r\n    pointColor: string = \"#cccccc\";\r\n    width: number = 400; height: number = 400;\r\n    selectedIndex: number = 0;\r\n    selectedPointIndex: number | undefined;\r\n    editMode: boolean = true;\r\n    output?: string;\r\n    dragMode: boolean = false;\r\n}\r\nclass SvgCreator extends BaseComponent {\r\n    state: State = new State();\r\n    straightLine: boolean = false;\r\n    activePointRef: React.RefObject<Points> = React.createRef();\r\n    // deleteMode: boolean = false;\r\n    constructor(props) {\r\n        super(props, false);\r\n        this.initKeyListener();\r\n    }\r\n    initKeyListener = () => {\r\n        window.onkeypress = this.onkeypress;\r\n        window.onkeyup = this.onkeyup;\r\n    }\r\n    setActiveIndex = (index: number) => {\r\n        if (this.state.editMode) return;\r\n        this.setState({ selectedIndex: index });\r\n    }\r\n    onkeyup: (((this: Window | GlobalEventHandlers, ev: KeyboardEvent) => any) & ((this: Window, ev: KeyboardEvent) => any)) =\r\n        event => { this.straightLine = false; }\r\n\r\n    onkeypress: (((this: Window | GlobalEventHandlers, ev: KeyboardEvent) => any) & ((this: Window, ev: KeyboardEvent) => any)) =\r\n        event => {\r\n            if (event instanceof KeyboardEvent) {\r\n                const keyEvent: KeyboardEvent = event as KeyboardEvent;\r\n                console.debug(\"KEY CODE: \", keyEvent.key);\r\n                if (keyEvent.key == 'h') {\r\n                    this.straightLine = true;\r\n                } else if (keyEvent.key == 'z') {\r\n                    this.updateClosePath(!this.getSelectedElement().closePath);\r\n                } else if (keyEvent.key == 'e') {\r\n                    this.setEditMode(!this.state.editMode);\r\n                } else if (keyEvent.key == 'd') {\r\n                    this.removePoint();\r\n\r\n                } else if (keyEvent.key == 'm') {\r\n                    this.setState({ dragMode: !this.state.dragMode });\r\n                }\r\n            }\r\n        }\r\n    dragPoint = (e: React.MouseEvent<SVGRectElement>) => {\r\n        if (!this.state.dragMode) return;\r\n        const p = this.getSelectedPoint();\r\n        if (!p) return;\r\n        p.updatePosition(e);\r\n        this.updateSelectedPoint(p);\r\n    }\r\n\r\n    setActivePointIndexAndDrag = (index: number) => {\r\n        this.setState({ selectedPointIndex: index, dragMode: true });\r\n    }\r\n    insertAfter = (index: number) => {\r\n        const el: SvgItem = this.getSelectedElement();\r\n        if (el.insertAfter(index)) {\r\n            this.setState({\r\n                selectedPointIndex: index + 1,  dragMode: true\r\n            }, () => this.updateSelectedElement(el));\r\n        }\r\n    }\r\n    insertBefore = (index: number) => {\r\n        const el: SvgItem = this.getSelectedElement();\r\n        if (el.insertBefore(index)) {\r\n            this.setState({\r\n                selectedPointIndex: index, dragMode: true\r\n            }, () => this.updateSelectedElement(el));\r\n        }\r\n    }\r\n\r\n    addPoint = (e: React.MouseEvent<SVGRectElement>): void => {\r\n        const target = e.target as SVGRectElement;\r\n        if (!target) return;\r\n        if (target.id !== 'svg-screen') {\r\n            console.debug(\"TAG NAME: \", target.tagName);\r\n            return;\r\n        }\r\n\r\n        const element: SvgItem = this.getSelectedElement();\r\n        element.addPointByEvent(e, this.straightLine);\r\n        this.setState({ selectedPointIndex: element.pointCount() - 1, }, () =>\r\n            this.updateSelectedElement(element));\r\n    }\r\n    getSelectedElement = (): SvgItem => {\r\n        const elements = this.state.svgElements;\r\n        return elements[this.state.selectedIndex];\r\n    }\r\n    setElementType = (e: ChangeEvent) => {\r\n        if (this.state.editMode) { return; }\r\n        this.setState({ elementType: (e.target as HTMLSelectElement).value });\r\n    }\r\n    addPointToCurrentElement = (p: SvgPoint) => {\r\n        const element = this.getSelectedElement();\r\n        element.points.push(p);\r\n        this.updateSelectedElement(element);\r\n    }\r\n    setElementNoColor = () => {\r\n        const element = this.getSelectedElement();\r\n        element.fillColor = \"none\";\r\n        this.updateSelectedElement(element);\r\n    }\r\n    updateSelectedElementProp = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name = target.name;\r\n        const val = target.type == 'number' ? parseInt(target.value) : target.value;\r\n        const element = this.getSelectedElement();\r\n        element[name] = val;\r\n        this.updateSelectedElement(element);\r\n    }\r\n    updateSelectedPoint = (p: SvgPoint) => {\r\n        if (!this.state.selectedPointIndex) return;\r\n        try {\r\n            const element = this.getSelectedElement();\r\n            element.points[this.state.selectedPointIndex] = p;\r\n            this.updateSelectedElement(element);\r\n        } catch (e) { }\r\n    }\r\n    updateSelectedElement = (element: SvgItem) => {\r\n        const elements = this.state.svgElements;\r\n        elements[this.state.selectedIndex] = element;\r\n        if (this.activePointRef.current) {\r\n            this.activePointRef.current.closeContextMenu();\r\n        }\r\n        this.setState({ svgElements: elements }, this.setNullPointIndexLater);\r\n    }\r\n    setNullPointIndexLater = () => {\r\n        // doItLater(() => {\r\n        //     this.setState({ selectedPointIndex: undefined });\r\n        // }, 2000);\r\n    }\r\n    updateClosePath = (value: boolean) => {\r\n        const element = this.getSelectedElement().setClosePath(value);\r\n        this.updateSelectedElement(element);\r\n    }\r\n    addSvgElement = (type: ElementType) => {\r\n        const elements = this.state.svgElements;\r\n        elements.push(SvgItem.newInstance(type));\r\n        this.setState({ editMode: true, svgElements: elements, selectedIndex: elements.length - 1 });\r\n    }\r\n    orderFront = (e) => {\r\n        const elements = this.state.svgElements;\r\n        const element = Object.assign(new SvgItem, this.getSelectedElement());\r\n        if (this.removeSelectedElement()) {\r\n            elements.push(element);\r\n            this.setState({ svgElements: elements, selectedIndex: elements.length - 1 });\r\n        }\r\n    }\r\n    orderBack = (e) => {\r\n        const elements = this.state.svgElements;\r\n        const element = Object.assign(new SvgItem, this.getSelectedElement());\r\n        if (this.removeSelectedElement()) {\r\n            elements.unshift(element)\r\n            this.setState({ svgElements: elements, selectedIndex: 0 });\r\n        }\r\n    }\r\n    removeSelectedElement = () => {\r\n        const elements = this.state.svgElements;\r\n        if (elements.length <= 1) {\r\n            try {\r\n                elements[this.state.selectedIndex].points = [];\r\n                this.setState({ svgElements: elements });\r\n            } catch (error) { console.error(error) }\r\n            return false;\r\n        }\r\n        for (let i = 0; i < elements.length; i++) {\r\n            if (i == this.state.selectedIndex) {\r\n                elements.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        this.setState({ svgElements: elements, selectedIndex: elements.length - 1 });\r\n        return true;\r\n    }\r\n    onPointClick = (svgItemId: string, index: number) => {\r\n        this.setState({ dragMode: false }, () => {\r\n            console.debug(\"on Point click\");\r\n            if (svgItemId == this.getSelectedElement().id) {\r\n                this.setState({ selectedPointIndex: index }, this.setNullPointIndexLater);\r\n                return;\r\n            }\r\n            this.addPointFromReferencePoint(svgItemId, index);\r\n\r\n        });\r\n    }\r\n    addPointFromReferencePoint = (id: string, index: number) => {\r\n        const elements = this.state.svgElements;\r\n        const filteredElements: SvgItem[] = elements.filter((e => e.id == id));\r\n        if (filteredElements.length == 0) return;\r\n        const refElement = filteredElements[0];\r\n        const refPoint = refElement.getPointByIndex(index);\r\n        if (!refPoint) {\r\n            return;\r\n        }\r\n        const element = this.getSelectedElement();\r\n        element.addPoint(SvgPoint.newInstanceFromReference(refPoint));\r\n        this.setState({ selectedPointIndex: element.pointCount() - 1, }, () =>\r\n            this.updateSelectedElement(element));\r\n    }\r\n    removePoint = (index?: number) => {\r\n        const element = this.getSelectedElement();\r\n        try {\r\n            for (let i = 0; i < element.points.length; i++) {\r\n                if ((index == undefined && i == this.state.selectedPointIndex) || i == index) {\r\n                    element.points.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            this.updateSelectedElement(element);\r\n        } catch (e) {\r\n            console.error(\"Unable to remove point: \", e);\r\n        }\r\n    }\r\n    setEditMode = (val: boolean) => this.setState({ editMode: val })\r\n    showOutput = () => {\r\n        this.setState({ output: SvgItem.getOutput(this.state.svgElements, this.state.width, this.state.height) });\r\n    }\r\n    setSelectedPoint = (index: number | undefined) => this.setState({ selectedPointIndex: index })\r\n    removeSelectedPoint = () => this.setSelectedPoint(undefined)\r\n\r\n    getSelectedPoint = (): SvgPoint | undefined => {\r\n        const element: SvgItem = this.getSelectedElement();\r\n        if (!element || this.state.selectedPointIndex === undefined) {\r\n            return undefined;\r\n        }\r\n        return element.getPointByIndex(this.state.selectedPointIndex);\r\n\r\n    }\r\n    render = () => {\r\n        const elements: SvgItem[] = this.state.svgElements;\r\n        const element: SvgItem = this.getSelectedElement();\r\n        const pointColor = this.state.pointColor;\r\n        const w = this.state.width, h = this.state.height;\r\n        const editMode = this.state.editMode;\r\n        const boundingRect = element.getBoundingRect();\r\n        const selectedPoint: SvgPoint | undefined = this.getSelectedPoint();\r\n\r\n        return <Modal title=\"Draw Your Svg Path\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 svg-wrapper text-center\" style={{ backgroundImage: 'url(' + this.props.imageData + ')', }}>\r\n                    <svg className=\" svg-sheet\" width={w} height={h}>\r\n                        <g fill=\"none\" className=\"svg-path\">\r\n                            {elements.map((el, i) => {\r\n                                const className = this.state.editMode == false ? \"path-selectable\" : \"path-regular\";\r\n                                // console.debug(\"element.type === ElementType.RECT: \",element.type, ElementType.RECT, (element.type == ElementType.RECT));\r\n                                const baseProps = { onClick: (e) => this.setActiveIndex(i), className: className, stroke: el.strokeColor, fill: el.fillColor, strokeWidth: el.strokeWidth }\r\n                                if (el.type == ElementType.RECT) {\r\n                                    const rect = el.getRectElement();\r\n                                    return <rect  {...baseProps} key={\"rect-\" + i}\r\n                                        x={rect.x} y={rect.y} width={rect.width} height={rect.height} />\r\n                                }\r\n                                if (el.type == ElementType.CIRCLE) {\r\n                                    const circle = el.getCircleElement();\r\n                                    return <circle {...baseProps} key={\"circle-\" + i} cx={circle.x} cy={circle.y} r={circle.r} />\r\n                                }\r\n                                if (el.type == ElementType.CURVE) {\r\n                                    const curve = el.getQuadCurveElement();\r\n                                    return <path  {...baseProps} key={\"curve-\" + i} d={curve.getPath()} />\r\n                                }\r\n                                if (el.type == ElementType.ELLIPSE) {\r\n                                    const ellipse = el.getEllipseElement();\r\n                                    return <ellipse {...baseProps} key={\"curve-\" + i} cx={ellipse.x} cy={ellipse.y} rx={ellipse.rx} ry={ellipse.ry} />\r\n                                }\r\n                                const path = el.getPathElement();\r\n\r\n                                return <path {...baseProps} key={\"path-\" + i} d={path.getPath()} />\r\n                            })}\r\n                        </g>\r\n                        <BoundingRect rect={boundingRect} />\r\n                        {editMode ?\r\n                            <g>\r\n                                <WorksheetRect onMouseMove={this.dragPoint}\r\n                                    size={w} addPoint={this.addPoint} />\r\n                                {elements.map((el, i) => {\r\n                                    if (i == this.state.selectedIndex) return null\r\n                                    return (\r\n                                        <Points svgHeight={h} svgWidth={w} key={\"pts-\" + i} active={false} pointColor={pointColor} element={el} onClick={this.onPointClick} />\r\n                                    )\r\n                                })}\r\n                                {/* bounding rect */}\r\n\r\n                                {/* selected element point */}\r\n                                <Points active ref={this.activePointRef}\r\n                                    svgHeight={h} svgWidth={w}\r\n                                    movePoint={this.setActivePointIndexAndDrag} removePoint={this.removePoint}\r\n                                    insertAfter={this.insertAfter} insertBefore={this.insertBefore}\r\n                                    // onMouseDown={this.startDrag} onMouseUp={this.stopDrag} \r\n                                    pointColor={pointColor} activeIndex={this.state.selectedPointIndex} element={element} onClick={this.onPointClick} />\r\n                            </g> : null\r\n                        }\r\n                    </svg>\r\n                </div>\r\n                <div className=\"col-md-2 text-center\">\r\n                    <div className=\" btn-group-vertical\">\r\n                        <span className=\"btn btn-dark\">Items:  {elements.length}\r\n                        </span>\r\n                        <AnchorWithIcon onClick={(e) => { this.addSvgElement(ElementType.PATH) }} iconClassName=\"fas fa-draw-polygon\" />\r\n                        <AnchorWithIcon onClick={(e) => { this.addSvgElement(ElementType.CIRCLE) }} iconClassName=\"far fa-circle\" />\r\n                        <AnchorWithIcon onClick={(e) => { this.addSvgElement(ElementType.RECT) }} iconClassName=\"far fa-square\" />\r\n                        <AnchorWithSvg onClick={(e) => { this.addSvgElement(ElementType.CURVE) }} icon=\"curve\" />\r\n                        <AnchorWithSvg onClick={(e) => { this.addSvgElement(ElementType.ELLIPSE) }} icon=\"ellips\" />\r\n\r\n                    </div>\r\n                    <div className=\"container-fluid\">\r\n                        {selectedPoint ?\r\n                            <PointInfo dragMode={this.state.dragMode} onDelete={this.removePoint} point={selectedPoint} />\r\n                            : null}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                    <form className=\"container-fluid  \" onSubmit={(e) => e.preventDefault()}>\r\n                        <h4><i className=\"fas fa-palette\" />&nbsp;Options</h4>\r\n                        <FormGroup label=\"Type\" children={element.id + \" \" + ElementType[element.type] + \" [\" + this.state.selectedIndex + \"]\"} />\r\n                        <FormGroup label=\"Close Path\">\r\n                            <ToggleButton active={element.closePath} onClick={this.updateClosePath} /><br />\r\n                            <p><span className={element.closePath ? \"badge badge-success\" : \"badge badge-dark\"}>Z</span> to toggle Close Path</p>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Fill Color\">\r\n                            <div className=\"input-group\">\r\n                                <input type=\"color\" className=\"form-control\" name=\"fillColor\" value={element.fillColor}\r\n                                    onChange={this.updateSelectedElementProp} />\r\n                                <div className=\"input-group-append\">\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-times\" onClick={this.setElementNoColor} />\r\n                                </div>\r\n                            </div>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Stroke Color\">\r\n                            <input type=\"color\" className=\"form-control\" name=\"strokeColor\" value={element.strokeColor}\r\n                                onChange={this.updateSelectedElementProp} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Stroke Width\">\r\n                            <input type=\"number\" className=\"form-control\" name=\"strokeWidth\" value={element.strokeWidth}\r\n                                onChange={this.updateSelectedElementProp} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Order\">\r\n                            <div className=\"btn-group\">\r\n                                <AnchorWithIcon onClick={this.orderFront} iconClassName=\"fas fa-angle-up\" >Front</AnchorWithIcon>\r\n                                <AnchorWithIcon onClick={this.orderBack} iconClassName=\"fas fa-angle-down\" >Back</AnchorWithIcon>\r\n                            </div>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Edit Mode\">\r\n                            <ToggleButton active={this.state.editMode == true} onClick={this.setEditMode} />\r\n                            <i>&nbsp;&nbsp;{this.state.editMode == false ? \"Select path to edit\" : null}</i>\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            <p><span className=\"badge badge-dark\">H</span> to make Straight Line</p>\r\n                            <p><span className={this.state.editMode ? \"badge badge-success\" : \"badge badge-dark\"}>E</span> to toggle Edit Mode</p>\r\n                            <AnchorWithIcon onClick={this.removeSelectedElement} iconClassName=\"fas fa-times\"\r\n                                className=\"btn btn-danger btn-sm\">Delete Path</AnchorWithIcon>\r\n                        </FormGroup>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <p />\r\n            <GeneralForm elements={elements} handleInputChange={this.handleInputChange}\r\n                showOutput={this.showOutput}\r\n                selectedIndex={this.state.selectedIndex} width={this.state.width} height={this.state.height}\r\n                pointColor={this.state.pointColor} output={this.state.output}\r\n            />\r\n        </Modal>\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(SvgCreator))","\r\nimport React, { ChangeEvent, Component } from 'react';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport SimpleError from '../../alert/SimpleError';\r\nimport Modal from '../../container/Modal';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport SvgCreator from './SvgCreator';\r\nimport { BASE_TEMPLATE } from './baseTemplate';\r\nclass State {\r\n    imageData?: string = BASE_TEMPLATE;\r\n}\r\nexport default class CreatorMain extends BaseComponent {\r\n    state: State = new State();\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    onFileChange = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        toBase64v2(target).then((data) => {\r\n            this.setState({ imageData: data });\r\n        })\r\n    }\r\n    render = () => {\r\n\r\n        return (\r\n            <section className=\"container-fluid\" style={{ marginTop: '50px' }}>\r\n                <h2>Generate Path SVG</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        <InputImage onChange={this.onFileChange} />\r\n                    </div>\r\n                    {/* <div className=\"col-md-6 text-center\">\r\n                        <Modal title=\"Preview\">\r\n                            {this.state.imageData ?\r\n                                <img src={this.state.imageData} width=\"200\" height=\"200\" /> :\r\n                                <SimpleError>No data</SimpleError>\r\n                            }\r\n                        </Modal>\r\n                    </div> */}\r\n                    <div className=\"col-12\">\r\n                         {this.state.imageData ?\r\n                         <SvgCreator imageData={this.state.imageData} />:null}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst InputImage = (props: { onChange(e: ChangeEvent): any }) => {\r\n\r\n    return (\r\n        <Modal title=\"Select Template Image\">\r\n            <form>\r\n                <FormGroup label=\"Select\" >\r\n                    <input onChange={props.onChange} type=\"file\" className=\"form-control\" />\r\n                </FormGroup>\r\n            </form>\r\n        </Modal>\r\n    )\r\n}","export const  BASE_TEMPLATE:string = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACECAIAAADN8VQEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEySURBVHhe7dEBDQAwEAOh+Tfd2fhLwAJvnCcpQFKApABJAZICJAVICpAUIClAUoCkAEkBkgIkBUgKkBQgKUBSgKQASQGSAiQFSAqQFCApQFKApABJAZICJAVICpAUIClAUoCkAEkBkgIkBUgKkBQgKUBSgKQASQGSAiQFSAqQFCApQFKApABJAZICJAVICpAUIClAUoCkAEkBkgIkBUgKkBQgKUBSgKQASQGSAiQFSAqQFCApQFKApABJAZICJAVICpAUIClAUoCkAEkBkgIkBUgKkBQgKUBSgKQASQGSAiQFSAqQFCApQFKApABJAZICJAVICpAUIClAUoCkAEkBkgIkBUgKkBQgKUBSgKQASQGSAiQFSAqQFCApQFKApABJAZICJAVICpAUIClAUoCk87YPMPvEClHp6T0AAAAASUVORK5CYII=\";","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport BaseMainMenus from './BaseMainMenus';\r\nimport Menu from '../../models/common/Menu'; \r\nimport HomeMain from './../pages/home/HomeMain';\r\nimport CreatorMain from './../pages/creator/CreatorMain';\r\n\r\nclass ApplicationContent extends BaseComponent {\r\n\r\n    ref: React.RefObject<BaseMainMenus> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <Switch>\r\n                     \r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/creator\" render={\r\n                        (props: any) =>\r\n                            <CreatorMain />\r\n                    } />\r\n                     </Switch>\r\n            </Fragment>\r\n        )\r\n    } \r\n\r\n} \r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","import BaseEntity from '../BaseEntity'; \nimport { uniqueId } from '../../utils/StringUtil';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:string = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string; \n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n}\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from '../../models/common/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n\r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n                {menus.map(menu => {\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li className={\"sidebar-item \" + menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <Fragment> <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}><div\r\n            style={{\r\n                textAlign: 'center', paddingTop: '10px',\r\n                paddingBottom: '10px'\r\n            }}>\r\n            <h3 className=\"text-dark\">\r\n                <i className={Menu.getIconClassName(props.brand)}></i>\r\n            </h3>\r\n            <Link to={props.brand.url} style={{ textDecoration: 'none' }}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n        </div></li>\r\n            <li className={\"sidebar-item-brand \"} >\r\n                <Link to={props.brand.url}>\r\n                    <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(props.brand)}></i></span>\r\n                </Link>\r\n            </li>\r\n        </Fragment>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","\r\n\r\nimport React, { Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from '../../models/common/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n       \r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () => {\r\n        if (this.state.menu && this.state.menu.subMenus != null && this.state.menu.subMenus?.length > 0) {\r\n            return this.state.menu?.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar = this.state.showSidebar == true;\r\n        return (\r\n           <Fragment>\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu}  />\r\n                <div id=\"page-content\" className=\"container-fluid\"  >    \r\n                    <div className=\"container-fluid\" style={{zIndex:  1 , \r\n                    // position:'absolute',\r\n                    paddingTop: '55px'}} \r\n                    id={showSidebar ? \"app-content\" : \"content\"}>\r\n                        <ApplicationContent setSidebarMenus={this.setSidebarMenus}  />\r\n                    </div>\r\n                    {showSidebar == true ?  \r\n                            <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} />\r\n                         : null}\r\n                    {/* </div> */}\r\n\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { withRouter } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/common/WebResponse';\nimport Spinner from './component/loader/Spinner';\nimport UserService from './services/UserService';\nimport { doItLater } from './utils/EventUtil';\n\nclass IState {\n  loading: boolean = false;\n  loadingPercentage: number = 0;\n  requestId?: undefined;\n  mainAppUpdated: Date = new Date();\n  showAlert: boolean = false;\n  realtime: boolean = false;\n  appIdStatus: string = \"Loading App Id\";\n  errorRequestAppId: boolean = false;\n}\nclass App extends Component<any, IState> {\n\n  state: IState = new IState();\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  userService: UserService;\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\",\n    message: \"Info\",\n    yesOnly: false,\n    onOk: () => { },\n    onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n\n    this.props.setMainApp(this);\n    this.userService = this.props.services.userService;\n\n  }\n  refresh() {\n    this.setState({ mainAppUpdated: new Date() });\n  }\n\n  requestAppId = () => {\n    this.setState({ errorRequestAppId: false, appIdStatus: \"Authenticating application\" });\n    this.userService.requestApplicationId((response) => {\n      this.props.setRequestId(response, this);\n      this.refresh();\n    }, this.retryRequestAppId)\n\n  }\n  retryRequestAppId = () => {\n    // console.debug(\"RETRYING\");\n    this.setState({ errorRequestAppId: false, appIdStatus: \"Authenticating application (Retrying)\" });\n    this.userService.requestApplicationIdNoAuth((response) => {\n      this.props.setRequestId(response, this);\n    }, this.errorRequestingAppId)\n\n  }\n\n  errorRequestingAppId = () => {\n    this.setState({ errorRequestAppId: true });\n  }\n\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    try {\n      this.decrementLoadings();\n      if (this.loadings == 0) {\n        if (this.state.realtime) {\n          this.setState({ loadingPercentage: 100 },\n            this.smoothEndLoading);\n        } else {\n          this.setState({ loading: false, loadingPercentage: 0 });\n        }\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n  }\n\n  smoothEndLoading = () => {\n    doItLater(() => {\n      this.setState({ loading: false, loadingPercentage: 0 });\n    }, 100);\n  }\n\n  handleMessage(msg: WebResponse) {\n    const percentageFloat: number = msg.percentage ?? 0;\n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n  }\n\n  componentDidMount() {\n\n\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  render() {\n\n\n\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout />\n        {/* <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={(client) => { this.clientRef = client }} /> */}\n        <Footer />\n      </Fragment>\n    )\n  }\n}\n\nconst Footer = (props) => {\n  return (\n    <footer  className=\"container-fluid text-center bg-light\">\n      <p />\n      <hr />\n      <p><i className=\"fas fa-coffee\" style={{marginRight:5}}/>fajaralmu 2021</p>\n      <p/>\n    </footer>\n  )\n}\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\n\nfunction updateFavicon(profile: any) {\n  if (profile.pageIcon) {\n    let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\n      document.querySelector('link[rel=\"icon\"]');\n    if (!link) {\n      link = document.createElement('link');\n      link.id = 'favicon';\n      link.setAttribute(\"rel\", 'shortcut icon');\n      document.head.appendChild(link);\n    }\n    link.setAttribute(\"href\", url.baseImageUrl() + profile.pageIcon);\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  setMainApp: (app: App) => dispatch(actions.setMainApp(app)),\n  setRequestId: (response: WebResponse, app: App) => dispatch(actions.setRequestId(response, app)),\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","export const doItLater = (callback:()=>any, intervalMs:number) => {\r\n    const timeout = setTimeout(()=>{\r\n       callback();\r\n        clearTimeout(timeout);\r\n      }, intervalMs)\r\n}","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}